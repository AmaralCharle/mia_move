(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _k(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ty={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),Ik=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),Tk=Symbol.for("react.strict_mode"),Dk=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),bk=Symbol.for("react.context"),Rk=Symbol.for("react.forward_ref"),Pk=Symbol.for("react.suspense"),Mk=Symbol.for("react.memo"),$k=Symbol.for("react.lazy"),xm=Symbol.iterator;function Ok(t){return t===null||typeof t!="object"?null:(t=xm&&t[xm]||t["@@iterator"],typeof t=="function"?t:null)}var ny={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ry=Object.assign,sy={};function ei(t,e,n){this.props=t,this.context=e,this.refs=sy,this.updater=n||ny}ei.prototype.isReactComponent={};ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iy(){}iy.prototype=ei.prototype;function fh(t,e,n){this.props=t,this.context=e,this.refs=sy,this.updater=n||ny}var mh=fh.prototype=new iy;mh.constructor=fh;ry(mh,ei.prototype);mh.isPureReactComponent=!0;var Sm=Array.isArray,oy=Object.prototype.hasOwnProperty,ph={current:null},ay={key:!0,ref:!0,__self:!0,__source:!0};function ly(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)oy.call(e,r)&&!ay.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:_o,type:t,key:i,ref:o,props:s,_owner:ph.current}}function Lk(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function Fk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Nm=/\/+/g;function Ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fk(""+t.key):e.toString(36)}function Ra(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _o:case Ik:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ku(o,0):r,Sm(s)?(n="",t!=null&&(n=t.replace(Nm,"$&/")+"/"),Ra(s,e,n,"",function(c){return c})):s!=null&&(gh(s)&&(s=Lk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Nm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sm(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ku(i,a);o+=Ra(i,e,n,l,s)}else if(l=Ok(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ku(i,a++),o+=Ra(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ia(t,e,n){if(t==null)return t;var r=[],s=0;return Ra(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Uk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Pa={transition:null},Vk={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Pa,ReactCurrentOwner:ph};function uy(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ia,forEach:function(t,e,n){ia(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ia(t,function(){e++}),e},toArray:function(t){return ia(t,function(e){return e})||[]},only:function(t){if(!gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=ei;ie.Fragment=Ck;ie.Profiler=Dk;ie.PureComponent=fh;ie.StrictMode=Tk;ie.Suspense=Pk;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;ie.act=uy;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ry({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ph.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oy.call(e,l)&&!ay.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_o,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:bk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ak,_context:t},t.Consumer=t};ie.createElement=ly;ie.createFactory=function(t){var e=ly.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Rk,render:t}};ie.isValidElement=gh;ie.lazy=function(t){return{$$typeof:$k,_payload:{_status:-1,_result:t},_init:Uk}};ie.memo=function(t,e){return{$$typeof:Mk,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Pa.transition;Pa.transition={};try{t()}finally{Pa.transition=e}};ie.unstable_act=uy;ie.useCallback=function(t,e){return _t.current.useCallback(t,e)};ie.useContext=function(t){return _t.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ie.useEffect=function(t,e){return _t.current.useEffect(t,e)};ie.useId=function(){return _t.current.useId()};ie.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return _t.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ie.useRef=function(t){return _t.current.useRef(t)};ie.useState=function(t){return _t.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return _t.current.useTransition()};ie.version="18.3.1";ty.exports=ie;var I=ty.exports;const u=_k(I);var cy={exports:{}},jt={},dy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,F){var K=A.length;A.push(F);e:for(;0<K;){var oe=K-1>>>1,De=A[oe];if(0<s(De,F))A[oe]=F,A[K]=De,K=oe;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],K=A.pop();if(K!==F){A[0]=K;e:for(var oe=0,De=A.length,ae=De>>>1;oe<ae;){var be=2*(oe+1)-1,it=A[be],Et=be+1,un=A[Et];if(0>s(it,K))Et<De&&0>s(un,it)?(A[oe]=un,A[Et]=K,oe=Et):(A[oe]=it,A[be]=K,oe=be);else if(Et<De&&0>s(un,K))A[oe]=un,A[Et]=K,oe=Et;else break e}}return F}function s(A,F){var K=A.sortIndex-F.sortIndex;return K!==0?K:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,v=!1,w=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(A){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=A)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function k(A){if(E=!1,y(A),!w)if(n(l)!==null)w=!0,Z(T);else{var F=n(c);F!==null&&j(k,F.startTime-A)}}function T(A,F){w=!1,E&&(E=!1,m(S),S=-1),v=!0;var K=f;try{for(y(F),h=n(l);h!==null&&(!(h.expirationTime>F)||A&&!M());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var De=oe(h.expirationTime<=F);F=t.unstable_now(),typeof De=="function"?h.callback=De:h===n(l)&&r(l),y(F)}else r(l);h=n(l)}if(h!==null)var ae=!0;else{var be=n(c);be!==null&&j(k,be.startTime-F),ae=!1}return ae}finally{h=null,f=K,v=!1}}var R=!1,P=null,S=-1,L=5,N=-1;function M(){return!(t.unstable_now()-N<L)}function D(){if(P!==null){var A=t.unstable_now();N=A;var F=!0;try{F=P(!0,A)}finally{F?U():(R=!1,P=null)}}else R=!1}var U;if(typeof g=="function")U=function(){g(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,J=H.port2;H.port1.onmessage=D,U=function(){J.postMessage(null)}}else U=function(){x(D,0)};function Z(A){P=A,R||(R=!0,U())}function j(A,F){S=x(function(){A(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,Z(T))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var K=f;f=F;try{return A()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var K=f;f=A;try{return F()}finally{f=K}},t.unstable_scheduleCallback=function(A,F,K){var oe=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?oe+K:oe):K=oe,A){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=K+De,A={id:d++,callback:F,priorityLevel:A,startTime:K,expirationTime:De,sortIndex:-1},K>oe?(A.sortIndex=K,e(c,A),n(l)===null&&A===n(c)&&(E?(m(S),S=-1):E=!0,j(k,K-oe))):(A.sortIndex=De,e(l,A),w||v||(w=!0,Z(T))),A},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(A){var F=f;return function(){var K=f;f=F;try{return A.apply(this,arguments)}finally{f=K}}}})(hy);dy.exports=hy;var zk=dy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk=I,Ut=zk;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fy=new Set,qi={};function es(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(qi[t]=e,t=0;t<e.length;t++)fy.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uc=Object.prototype.hasOwnProperty,Bk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_m={},Im={};function qk(t){return Uc.call(Im,t)?!0:Uc.call(_m,t)?!1:Bk.test(t)?Im[t]=!0:(_m[t]=!0,!1)}function Hk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kk(t,e,n,r){if(e===null||typeof e>"u"||Hk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yh,vh);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yh,vh);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yh,vh);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Eh(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kk(e,n,s,r)&&(n=null),r||s===null?qk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oa=Symbol.for("react.element"),ds=Symbol.for("react.portal"),hs=Symbol.for("react.fragment"),wh=Symbol.for("react.strict_mode"),Vc=Symbol.for("react.profiler"),my=Symbol.for("react.provider"),py=Symbol.for("react.context"),kh=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),xh=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),gy=Symbol.for("react.offscreen"),Cm=Symbol.iterator;function ci(t){return t===null||typeof t!="object"?null:(t=Cm&&t[Cm]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Wu;function wi(t){if(Wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wu=e&&e[1]||""}return`
`+Wu+t}var Gu=!1;function Qu(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wi(t):""}function Wk(t){switch(t.tag){case 5:return wi(t.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 2:case 15:return t=Qu(t.type,!1),t;case 11:return t=Qu(t.type.render,!1),t;case 1:return t=Qu(t.type,!0),t;default:return""}}function Bc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hs:return"Fragment";case ds:return"Portal";case Vc:return"Profiler";case wh:return"StrictMode";case zc:return"Suspense";case jc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case py:return(t.displayName||"Context")+".Consumer";case my:return(t._context.displayName||"Context")+".Provider";case kh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xh:return e=t.displayName||null,e!==null?e:Bc(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return Bc(t(e))}catch{}}return null}function Gk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bc(e);case 8:return e===wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qk(t){var e=yy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function aa(t){t._valueTracker||(t._valueTracker=Qk(t))}function vy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qc(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ey(t,e){e=e.checked,e!=null&&Eh(t,"checked",e,!1)}function Hc(t,e){Ey(t,e);var n=yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kc(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kc(t,e,n){(e!=="number"||Ja(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ki=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ki(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function wy(t,e){var n=yr(e.value),r=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var la,xy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(la=la||document.createElement("div"),la.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=la.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yk=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(t){Yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Di[e]=Di[t]})});function Sy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Di.hasOwnProperty(t)&&Di[t]?(""+e).trim():e+"px"}function Ny(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Sy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Xk=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(t,e){if(e){if(Xk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Yc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jc=null,Is=null,Cs=null;function Rm(t){if(t=To(t)){if(typeof Jc!="function")throw Error($(280));var e=t.stateNode;e&&(e=Xl(e),Jc(t.stateNode,t.type,e))}}function _y(t){Is?Cs?Cs.push(t):Cs=[t]:Is=t}function Iy(){if(Is){var t=Is,e=Cs;if(Cs=Is=null,Rm(t),e)for(t=0;t<e.length;t++)Rm(e[t])}}function Cy(t,e){return t(e)}function Ty(){}var Yu=!1;function Dy(t,e,n){if(Yu)return t(e,n);Yu=!0;try{return Cy(t,e,n)}finally{Yu=!1,(Is!==null||Cs!==null)&&(Ty(),Iy())}}function Ki(t,e){var n=t.stateNode;if(n===null)return null;var r=Xl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Zc=!1;if(Rn)try{var di={};Object.defineProperty(di,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{Zc=!1}function Jk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ai=!1,Za=null,el=!1,ed=null,Zk={onError:function(t){Ai=!0,Za=t}};function e1(t,e,n,r,s,i,o,a,l){Ai=!1,Za=null,Jk.apply(Zk,arguments)}function t1(t,e,n,r,s,i,o,a,l){if(e1.apply(this,arguments),Ai){if(Ai){var c=Za;Ai=!1,Za=null}else throw Error($(198));el||(el=!0,ed=c)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ay(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pm(t){if(ts(t)!==t)throw Error($(188))}function n1(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Pm(s),t;if(i===r)return Pm(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function by(t){return t=n1(t),t!==null?Ry(t):null}function Ry(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ry(t);if(e!==null)return e;t=t.sibling}return null}var Py=Ut.unstable_scheduleCallback,Mm=Ut.unstable_cancelCallback,r1=Ut.unstable_shouldYield,s1=Ut.unstable_requestPaint,Ve=Ut.unstable_now,i1=Ut.unstable_getCurrentPriorityLevel,Nh=Ut.unstable_ImmediatePriority,My=Ut.unstable_UserBlockingPriority,tl=Ut.unstable_NormalPriority,o1=Ut.unstable_LowPriority,$y=Ut.unstable_IdlePriority,Wl=null,vn=null;function a1(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Wl,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:c1,l1=Math.log,u1=Math.LN2;function c1(t){return t>>>=0,t===0?32:31-(l1(t)/u1|0)|0}var ua=64,ca=4194304;function xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xi(a):(i&=o,i!==0&&(r=xi(i)))}else o=n&~s,o!==0?r=xi(o):i!==0&&(r=xi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function d1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=d1(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function td(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Oy(){var t=ua;return ua<<=1,!(ua&4194240)&&(ua=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Io(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function f1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function Ly(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fy,Ih,Uy,Vy,zy,nd=!1,da=[],sr=null,ir=null,or=null,Wi=new Map,Gi=new Map,Qn=[],m1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $m(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":Wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(e.pointerId)}}function hi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=To(e),e!==null&&Ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function p1(t,e,n,r,s){switch(e){case"focusin":return sr=hi(sr,t,e,n,r,s),!0;case"dragenter":return ir=hi(ir,t,e,n,r,s),!0;case"mouseover":return or=hi(or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wi.set(i,hi(Wi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gi.set(i,hi(Gi.get(i)||null,t,e,n,r,s)),!0}return!1}function jy(t){var e=Pr(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=Ay(n),e!==null){t.blockedOn=e,zy(t.priority,function(){Uy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xc=r,n.target.dispatchEvent(r),Xc=null}else return e=To(n),e!==null&&Ih(e),t.blockedOn=n,!1;e.shift()}return!0}function Om(t,e,n){Ma(t)&&n.delete(e)}function g1(){nd=!1,sr!==null&&Ma(sr)&&(sr=null),ir!==null&&Ma(ir)&&(ir=null),or!==null&&Ma(or)&&(or=null),Wi.forEach(Om),Gi.forEach(Om)}function fi(t,e){t.blockedOn===e&&(t.blockedOn=null,nd||(nd=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,g1)))}function Qi(t){function e(s){return fi(s,t)}if(0<da.length){fi(da[0],t);for(var n=1;n<da.length;n++){var r=da[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sr!==null&&fi(sr,t),ir!==null&&fi(ir,t),or!==null&&fi(or,t),Wi.forEach(e),Gi.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)jy(n),n.blockedOn===null&&Qn.shift()}var Ts=Bn.ReactCurrentBatchConfig,rl=!0;function y1(t,e,n,r){var s=Ee,i=Ts.transition;Ts.transition=null;try{Ee=1,Ch(t,e,n,r)}finally{Ee=s,Ts.transition=i}}function v1(t,e,n,r){var s=Ee,i=Ts.transition;Ts.transition=null;try{Ee=4,Ch(t,e,n,r)}finally{Ee=s,Ts.transition=i}}function Ch(t,e,n,r){if(rl){var s=rd(t,e,n,r);if(s===null)ac(t,e,r,sl,n),$m(t,r);else if(p1(s,t,e,n,r))r.stopPropagation();else if($m(t,r),e&4&&-1<m1.indexOf(t)){for(;s!==null;){var i=To(s);if(i!==null&&Fy(i),i=rd(t,e,n,r),i===null&&ac(t,e,r,sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ac(t,e,r,null,n)}}var sl=null;function rd(t,e,n,r){if(sl=null,t=Sh(r),t=Pr(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sl=t,null}function By(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i1()){case Nh:return 1;case My:return 4;case tl:case o1:return 16;case $y:return 536870912;default:return 16}default:return 16}}var tr=null,Th=null,$a=null;function qy(){if($a)return $a;var t,e=Th,n=e.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $a=s.slice(t,1<r?1-r:void 0)}function Oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ha(){return!0}function Lm(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ha:Lm,this.isPropagationStopped=Lm,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),e}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Bt(ti),Co=$e({},ti,{view:0,detail:0}),E1=Bt(Co),Ju,Zu,mi,Gl=$e({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mi&&(mi&&t.type==="mousemove"?(Ju=t.screenX-mi.screenX,Zu=t.screenY-mi.screenY):Zu=Ju=0,mi=t),Ju)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),Fm=Bt(Gl),w1=$e({},Gl,{dataTransfer:0}),k1=Bt(w1),x1=$e({},Co,{relatedTarget:0}),ec=Bt(x1),S1=$e({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),N1=Bt(S1),_1=$e({},ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I1=Bt(_1),C1=$e({},ti,{data:0}),Um=Bt(C1),T1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=A1[t])?!!e[t]:!1}function Ah(){return b1}var R1=$e({},Co,{key:function(t){if(t.key){var e=T1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ah,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P1=Bt(R1),M1=$e({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vm=Bt(M1),$1=$e({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ah}),O1=Bt($1),L1=$e({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),F1=Bt(L1),U1=$e({},Gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V1=Bt(U1),z1=[9,13,27,32],bh=Rn&&"CompositionEvent"in window,bi=null;Rn&&"documentMode"in document&&(bi=document.documentMode);var j1=Rn&&"TextEvent"in window&&!bi,Hy=Rn&&(!bh||bi&&8<bi&&11>=bi),zm=" ",jm=!1;function Ky(t,e){switch(t){case"keyup":return z1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function B1(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(jm=!0,zm);case"textInput":return t=e.data,t===zm&&jm?null:t;default:return null}}function q1(t,e){if(fs)return t==="compositionend"||!bh&&Ky(t,e)?(t=qy(),$a=Th=tr=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hy&&e.locale!=="ko"?null:e.data;default:return null}}var H1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H1[t.type]:e==="textarea"}function Gy(t,e,n,r){_y(r),e=il(e,"onChange"),0<e.length&&(n=new Dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ri=null,Yi=null;function K1(t){i0(t,0)}function Ql(t){var e=gs(t);if(vy(e))return t}function W1(t,e){if(t==="change")return e}var Qy=!1;if(Rn){var tc;if(Rn){var nc="oninput"in document;if(!nc){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),nc=typeof qm.oninput=="function"}tc=nc}else tc=!1;Qy=tc&&(!document.documentMode||9<document.documentMode)}function Hm(){Ri&&(Ri.detachEvent("onpropertychange",Yy),Yi=Ri=null)}function Yy(t){if(t.propertyName==="value"&&Ql(Yi)){var e=[];Gy(e,Yi,t,Sh(t)),Dy(K1,e)}}function G1(t,e,n){t==="focusin"?(Hm(),Ri=e,Yi=n,Ri.attachEvent("onpropertychange",Yy)):t==="focusout"&&Hm()}function Q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ql(Yi)}function Y1(t,e){if(t==="click")return Ql(e)}function X1(t,e){if(t==="input"||t==="change")return Ql(e)}function J1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:J1;function Xi(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uc.call(e,s)||!on(t[s],e[s]))return!1}return!0}function Km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wm(t,e){var n=Km(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Km(n)}}function Xy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jy(){for(var t=window,e=Ja();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ja(t.document)}return e}function Rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z1(t){var e=Jy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xy(n.ownerDocument.documentElement,n)){if(r!==null&&Rh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Wm(n,i);var o=Wm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ex=Rn&&"documentMode"in document&&11>=document.documentMode,ms=null,sd=null,Pi=null,id=!1;function Gm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;id||ms==null||ms!==Ja(r)||(r=ms,"selectionStart"in r&&Rh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pi&&Xi(Pi,r)||(Pi=r,r=il(sd,"onSelect"),0<r.length&&(e=new Dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ps={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},rc={},Zy={};Rn&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Yl(t){if(rc[t])return rc[t];if(!ps[t])return t;var e=ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zy)return rc[t]=e[n];return t}var e0=Yl("animationend"),t0=Yl("animationiteration"),n0=Yl("animationstart"),r0=Yl("transitionend"),s0=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){s0.set(t,e),es(e,[t])}for(var sc=0;sc<Qm.length;sc++){var ic=Qm[sc],tx=ic.toLowerCase(),nx=ic[0].toUpperCase()+ic.slice(1);Nr(tx,"on"+nx)}Nr(e0,"onAnimationEnd");Nr(t0,"onAnimationIteration");Nr(n0,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(r0,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function Ym(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,t1(r,e,void 0,t),t.currentTarget=null}function i0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ym(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ym(s,a,c),i=l}}}if(el)throw t=ed,el=!1,ed=null,t}function Ne(t,e){var n=e[cd];n===void 0&&(n=e[cd]=new Set);var r=t+"__bubble";n.has(r)||(o0(e,t,2,!1),n.add(r))}function oc(t,e,n){var r=0;e&&(r|=4),o0(n,t,r,e)}var ma="_reactListening"+Math.random().toString(36).slice(2);function Ji(t){if(!t[ma]){t[ma]=!0,fy.forEach(function(n){n!=="selectionchange"&&(rx.has(n)||oc(n,!1,t),oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ma]||(e[ma]=!0,oc("selectionchange",!1,e))}}function o0(t,e,n,r){switch(By(e)){case 1:var s=y1;break;case 4:s=v1;break;default:s=Ch}n=s.bind(null,e,n,t),s=void 0,!Zc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Pr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Dy(function(){var c=i,d=Sh(n),h=[];e:{var f=s0.get(t);if(f!==void 0){var v=Dh,w=t;switch(t){case"keypress":if(Oa(n)===0)break e;case"keydown":case"keyup":v=P1;break;case"focusin":w="focus",v=ec;break;case"focusout":w="blur",v=ec;break;case"beforeblur":case"afterblur":v=ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=k1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=O1;break;case e0:case t0:case n0:v=N1;break;case r0:v=F1;break;case"scroll":v=E1;break;case"wheel":v=V1;break;case"copy":case"cut":case"paste":v=I1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vm}var E=(e&4)!==0,x=!E&&t==="scroll",m=E?f!==null?f+"Capture":null:f;E=[];for(var g=c,y;g!==null;){y=g;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,m!==null&&(k=Ki(g,m),k!=null&&E.push(Zi(g,k,y)))),x)break;g=g.return}0<E.length&&(f=new v(f,w,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==Xc&&(w=n.relatedTarget||n.fromElement)&&(Pr(w)||w[Pn]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=c,w=w?Pr(w):null,w!==null&&(x=ts(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(E=Fm,k="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=Vm,k="onPointerLeave",m="onPointerEnter",g="pointer"),x=v==null?f:gs(v),y=w==null?f:gs(w),f=new E(k,g+"leave",v,n,d),f.target=x,f.relatedTarget=y,k=null,Pr(d)===c&&(E=new E(m,g+"enter",w,n,d),E.target=y,E.relatedTarget=x,k=E),x=k,v&&w)t:{for(E=v,m=w,g=0,y=E;y;y=as(y))g++;for(y=0,k=m;k;k=as(k))y++;for(;0<g-y;)E=as(E),g--;for(;0<y-g;)m=as(m),y--;for(;g--;){if(E===m||m!==null&&E===m.alternate)break t;E=as(E),m=as(m)}E=null}else E=null;v!==null&&Xm(h,f,v,E,!1),w!==null&&x!==null&&Xm(h,x,w,E,!0)}}e:{if(f=c?gs(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var T=W1;else if(Bm(f))if(Qy)T=X1;else{T=Q1;var R=G1}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=Y1);if(T&&(T=T(t,c))){Gy(h,T,n,d);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Kc(f,"number",f.value)}switch(R=c?gs(c):window,t){case"focusin":(Bm(R)||R.contentEditable==="true")&&(ms=R,sd=c,Pi=null);break;case"focusout":Pi=sd=ms=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Gm(h,n,d);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":Gm(h,n,d)}var P;if(bh)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else fs?Ky(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Hy&&n.locale!=="ko"&&(fs||S!=="onCompositionStart"?S==="onCompositionEnd"&&fs&&(P=qy()):(tr=d,Th="value"in tr?tr.value:tr.textContent,fs=!0)),R=il(c,S),0<R.length&&(S=new Um(S,t,null,n,d),h.push({event:S,listeners:R}),P?S.data=P:(P=Wy(n),P!==null&&(S.data=P)))),(P=j1?B1(t,n):q1(t,n))&&(c=il(c,"onBeforeInput"),0<c.length&&(d=new Um("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=P))}i0(h,e)})}function Zi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function il(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ki(t,n),i!=null&&r.unshift(Zi(t,i,s)),i=Ki(t,e),i!=null&&r.push(Zi(t,i,s))),t=t.return}return r}function as(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ki(n,i),l!=null&&o.unshift(Zi(n,l,a))):s||(l=Ki(n,i),l!=null&&o.push(Zi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sx=/\r\n?/g,ix=/\u0000|\uFFFD/g;function Jm(t){return(typeof t=="string"?t:""+t).replace(sx,`
`).replace(ix,"")}function pa(t,e,n){if(e=Jm(e),Jm(t)!==e&&n)throw Error($(425))}function ol(){}var od=null,ad=null;function ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(t){return Zm.resolve(null).then(t).catch(lx)}:ud;function lx(t){setTimeout(function(){throw t})}function lc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Qi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qi(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ep(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ni=Math.random().toString(36).slice(2),mn="__reactFiber$"+ni,eo="__reactProps$"+ni,Pn="__reactContainer$"+ni,cd="__reactEvents$"+ni,ux="__reactListeners$"+ni,cx="__reactHandles$"+ni;function Pr(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pn]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ep(t);t!==null;){if(n=t[mn])return n;t=ep(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[mn]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Xl(t){return t[eo]||null}var dd=[],ys=-1;function _r(t){return{current:t}}function Ce(t){0>ys||(t.current=dd[ys],dd[ys]=null,ys--)}function Se(t,e){ys++,dd[ys]=t.current,t.current=e}var vr={},gt=_r(vr),At=_r(!1),Br=vr;function Fs(t,e){var n=t.type.contextTypes;if(!n)return vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function al(){Ce(At),Ce(gt)}function tp(t,e,n){if(gt.current!==vr)throw Error($(168));Se(gt,e),Se(At,n)}function a0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,Gk(t)||"Unknown",s));return $e({},n,r)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,Br=gt.current,Se(gt,t),Se(At,At.current),!0}function np(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=a0(t,e,Br),r.__reactInternalMemoizedMergedChildContext=t,Ce(At),Ce(gt),Se(gt,t)):Ce(At),Se(At,n)}var _n=null,Jl=!1,uc=!1;function l0(t){_n===null?_n=[t]:_n.push(t)}function dx(t){Jl=!0,l0(t)}function Ir(){if(!uc&&_n!==null){uc=!0;var t=0,e=Ee;try{var n=_n;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_n=null,Jl=!1}catch(s){throw _n!==null&&(_n=_n.slice(t+1)),Py(Nh,Ir),s}finally{Ee=e,uc=!1}}return null}var vs=[],Es=0,ul=null,cl=0,qt=[],Ht=0,qr=null,In=1,Cn="";function Ar(t,e){vs[Es++]=cl,vs[Es++]=ul,ul=t,cl=e}function u0(t,e,n){qt[Ht++]=In,qt[Ht++]=Cn,qt[Ht++]=qr,qr=t;var r=In;t=Cn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,In=1<<32-rn(e)+s|n<<s|r,Cn=i+t}else In=1<<i|n<<s|r,Cn=t}function Ph(t){t.return!==null&&(Ar(t,1),u0(t,1,0))}function Mh(t){for(;t===ul;)ul=vs[--Es],vs[Es]=null,cl=vs[--Es],vs[Es]=null;for(;t===qr;)qr=qt[--Ht],qt[Ht]=null,Cn=qt[--Ht],qt[Ht]=null,In=qt[--Ht],qt[Ht]=null}var Ot=null,Mt=null,Ae=!1,tn=null;function c0(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qr!==null?{id:In,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Mt=null,!0):!1;default:return!1}}function hd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fd(t){if(Ae){var e=Mt;if(e){var n=e;if(!rp(t,e)){if(hd(t))throw Error($(418));e=ar(n.nextSibling);var r=Ot;e&&rp(t,e)?c0(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Ot=t)}}else{if(hd(t))throw Error($(418));t.flags=t.flags&-4097|2,Ae=!1,Ot=t}}}function sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function ga(t){if(t!==Ot)return!1;if(!Ae)return sp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ld(t.type,t.memoizedProps)),e&&(e=Mt)){if(hd(t))throw d0(),Error($(418));for(;e;)c0(t,e),e=ar(e.nextSibling)}if(sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ot?ar(t.stateNode.nextSibling):null;return!0}function d0(){for(var t=Mt;t;)t=ar(t.nextSibling)}function Us(){Mt=Ot=null,Ae=!1}function $h(t){tn===null?tn=[t]:tn.push(t)}var hx=Bn.ReactCurrentBatchConfig;function pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ya(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ip(t){var e=t._init;return e(t._payload)}function h0(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=dr(m,g),m.index=0,m.sibling=null,m}function i(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,y,k){return g===null||g.tag!==6?(g=gc(y,m.mode,k),g.return=m,g):(g=s(g,y),g.return=m,g)}function l(m,g,y,k){var T=y.type;return T===hs?d(m,g,y.props.children,k,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wn&&ip(T)===g.type)?(k=s(g,y.props),k.ref=pi(m,g,y),k.return=m,k):(k=Ba(y.type,y.key,y.props,null,m.mode,k),k.ref=pi(m,g,y),k.return=m,k)}function c(m,g,y,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=yc(y,m.mode,k),g.return=m,g):(g=s(g,y.children||[]),g.return=m,g)}function d(m,g,y,k,T){return g===null||g.tag!==7?(g=Vr(y,m.mode,k,T),g.return=m,g):(g=s(g,y),g.return=m,g)}function h(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=gc(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case oa:return y=Ba(g.type,g.key,g.props,null,m.mode,y),y.ref=pi(m,null,g),y.return=m,y;case ds:return g=yc(g,m.mode,y),g.return=m,g;case Wn:var k=g._init;return h(m,k(g._payload),y)}if(ki(g)||ci(g))return g=Vr(g,m.mode,y,null),g.return=m,g;ya(m,g)}return null}function f(m,g,y,k){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(m,g,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case oa:return y.key===T?l(m,g,y,k):null;case ds:return y.key===T?c(m,g,y,k):null;case Wn:return T=y._init,f(m,g,T(y._payload),k)}if(ki(y)||ci(y))return T!==null?null:d(m,g,y,k,null);ya(m,y)}return null}function v(m,g,y,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(y)||null,a(g,m,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case oa:return m=m.get(k.key===null?y:k.key)||null,l(g,m,k,T);case ds:return m=m.get(k.key===null?y:k.key)||null,c(g,m,k,T);case Wn:var R=k._init;return v(m,g,y,R(k._payload),T)}if(ki(k)||ci(k))return m=m.get(y)||null,d(g,m,k,T,null);ya(g,k)}return null}function w(m,g,y,k){for(var T=null,R=null,P=g,S=g=0,L=null;P!==null&&S<y.length;S++){P.index>S?(L=P,P=null):L=P.sibling;var N=f(m,P,y[S],k);if(N===null){P===null&&(P=L);break}t&&P&&N.alternate===null&&e(m,P),g=i(N,g,S),R===null?T=N:R.sibling=N,R=N,P=L}if(S===y.length)return n(m,P),Ae&&Ar(m,S),T;if(P===null){for(;S<y.length;S++)P=h(m,y[S],k),P!==null&&(g=i(P,g,S),R===null?T=P:R.sibling=P,R=P);return Ae&&Ar(m,S),T}for(P=r(m,P);S<y.length;S++)L=v(P,m,S,y[S],k),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?S:L.key),g=i(L,g,S),R===null?T=L:R.sibling=L,R=L);return t&&P.forEach(function(M){return e(m,M)}),Ae&&Ar(m,S),T}function E(m,g,y,k){var T=ci(y);if(typeof T!="function")throw Error($(150));if(y=T.call(y),y==null)throw Error($(151));for(var R=T=null,P=g,S=g=0,L=null,N=y.next();P!==null&&!N.done;S++,N=y.next()){P.index>S?(L=P,P=null):L=P.sibling;var M=f(m,P,N.value,k);if(M===null){P===null&&(P=L);break}t&&P&&M.alternate===null&&e(m,P),g=i(M,g,S),R===null?T=M:R.sibling=M,R=M,P=L}if(N.done)return n(m,P),Ae&&Ar(m,S),T;if(P===null){for(;!N.done;S++,N=y.next())N=h(m,N.value,k),N!==null&&(g=i(N,g,S),R===null?T=N:R.sibling=N,R=N);return Ae&&Ar(m,S),T}for(P=r(m,P);!N.done;S++,N=y.next())N=v(P,m,S,N.value,k),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?S:N.key),g=i(N,g,S),R===null?T=N:R.sibling=N,R=N);return t&&P.forEach(function(D){return e(m,D)}),Ae&&Ar(m,S),T}function x(m,g,y,k){if(typeof y=="object"&&y!==null&&y.type===hs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case oa:e:{for(var T=y.key,R=g;R!==null;){if(R.key===T){if(T=y.type,T===hs){if(R.tag===7){n(m,R.sibling),g=s(R,y.props.children),g.return=m,m=g;break e}}else if(R.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wn&&ip(T)===R.type){n(m,R.sibling),g=s(R,y.props),g.ref=pi(m,R,y),g.return=m,m=g;break e}n(m,R);break}else e(m,R);R=R.sibling}y.type===hs?(g=Vr(y.props.children,m.mode,k,y.key),g.return=m,m=g):(k=Ba(y.type,y.key,y.props,null,m.mode,k),k.ref=pi(m,g,y),k.return=m,m=k)}return o(m);case ds:e:{for(R=y.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=s(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=yc(y,m.mode,k),g.return=m,m=g}return o(m);case Wn:return R=y._init,x(m,g,R(y._payload),k)}if(ki(y))return w(m,g,y,k);if(ci(y))return E(m,g,y,k);ya(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,y),g.return=m,m=g):(n(m,g),g=gc(y,m.mode,k),g.return=m,m=g),o(m)):n(m,g)}return x}var Vs=h0(!0),f0=h0(!1),dl=_r(null),hl=null,ws=null,Oh=null;function Lh(){Oh=ws=hl=null}function Fh(t){var e=dl.current;Ce(dl),t._currentValue=e}function md(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){hl=t,Oh=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Oh!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(hl===null)throw Error($(308));ws=t,hl.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var Mr=null;function Uh(t){Mr===null?Mr=[t]:Mr.push(t)}function m0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mn(t,n)}return s=r.interleaved,s===null?(e.next=e,Uh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mn(t,n)}function La(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}function op(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fl(t,e,n,r){var s=t.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,v=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,E=a;switch(f=e,v=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){h=w.call(v,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(v,h,f):w,f==null)break e;h=$e({},h,f);break e;case 2:Gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,l=h):d=d.next=v,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Kr|=o,t.lanes=o,t.memoizedState=h}}function ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Do={},En=_r(Do),to=_r(Do),no=_r(Do);function $r(t){if(t===Do)throw Error($(174));return t}function zh(t,e){switch(Se(no,e),Se(to,t),Se(En,Do),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gc(e,t)}Ce(En),Se(En,e)}function zs(){Ce(En),Ce(to),Ce(no)}function g0(t){$r(no.current);var e=$r(En.current),n=Gc(e,t.type);e!==n&&(Se(to,t),Se(En,n))}function jh(t){to.current===t&&(Ce(En),Ce(to))}var Pe=_r(0);function ml(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cc=[];function Bh(){for(var t=0;t<cc.length;t++)cc[t]._workInProgressVersionPrimary=null;cc.length=0}var Fa=Bn.ReactCurrentDispatcher,dc=Bn.ReactCurrentBatchConfig,Hr=0,Me=null,He=null,Qe=null,pl=!1,Mi=!1,ro=0,fx=0;function ot(){throw Error($(321))}function qh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Hh(t,e,n,r,s,i){if(Hr=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fa.current=t===null||t.memoizedState===null?yx:vx,t=n(r,s),Mi){i=0;do{if(Mi=!1,ro=0,25<=i)throw Error($(301));i+=1,Qe=He=null,e.updateQueue=null,Fa.current=Ex,t=n(r,s)}while(Mi)}if(Fa.current=gl,e=He!==null&&He.next!==null,Hr=0,Qe=He=Me=null,pl=!1,e)throw Error($(300));return t}function Kh(){var t=ro!==0;return ro=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Me.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Yt(){if(He===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Qe===null?Me.memoizedState:Qe.next;if(e!==null)Qe=e,He=t;else{if(t===null)throw Error($(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Me.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function so(t,e){return typeof e=="function"?e(t):e}function hc(t){var e=Yt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Hr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Me.lanes|=d,Kr|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,on(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,Kr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fc(t){var e=Yt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function y0(){}function v0(t,e){var n=Me,r=Yt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,Wh(k0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,io(9,w0.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error($(349));Hr&30||E0(n,e,s)}return s}function E0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w0(t,e,n,r){e.value=n,e.getSnapshot=r,x0(e)&&S0(t)}function k0(t,e,n){return n(function(){x0(e)&&S0(t)})}function x0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function S0(t){var e=Mn(t,1);e!==null&&sn(e,t,1,-1)}function lp(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:t},e.queue=t,t=t.dispatch=gx.bind(null,Me,t),[e.memoizedState,t]}function io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function N0(){return Yt().memoizedState}function Ua(t,e,n,r){var s=fn();Me.flags|=t,s.memoizedState=io(1|e,n,void 0,r===void 0?null:r)}function Zl(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&qh(r,o.deps)){s.memoizedState=io(e,n,i,r);return}}Me.flags|=t,s.memoizedState=io(1|e,n,i,r)}function up(t,e){return Ua(8390656,8,t,e)}function Wh(t,e){return Zl(2048,8,t,e)}function _0(t,e){return Zl(4,2,t,e)}function I0(t,e){return Zl(4,4,t,e)}function C0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T0(t,e,n){return n=n!=null?n.concat([t]):null,Zl(4,4,C0.bind(null,e,t),n)}function Gh(){}function D0(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A0(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function b0(t,e,n){return Hr&21?(on(n,e)||(n=Oy(),Me.lanes|=n,Kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function mx(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=dc.transition;dc.transition={};try{t(!1),e()}finally{Ee=n,dc.transition=r}}function R0(){return Yt().memoizedState}function px(t,e,n){var r=cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},P0(t))M0(e,n);else if(n=m0(t,e,n,r),n!==null){var s=xt();sn(n,t,r,s),$0(n,e,r)}}function gx(t,e,n){var r=cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(P0(t))M0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,on(a,o)){var l=e.interleaved;l===null?(s.next=s,Uh(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=m0(t,e,s,r),n!==null&&(s=xt(),sn(n,t,r,s),$0(n,e,r))}}function P0(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function M0(t,e){Mi=pl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}var gl={readContext:Qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},yx={readContext:Qt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:up,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ua(4194308,4,C0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=px.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:lp,useDebugValue:Gh,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=lp(!1),e=t[0];return t=mx.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=fn();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ye===null)throw Error($(349));Hr&30||E0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,up(k0.bind(null,r,i,t),[t]),r.flags|=2048,io(9,w0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fn(),e=Ye.identifierPrefix;if(Ae){var n=Cn,r=In;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vx={readContext:Qt,useCallback:D0,useContext:Qt,useEffect:Wh,useImperativeHandle:T0,useInsertionEffect:_0,useLayoutEffect:I0,useMemo:A0,useReducer:hc,useRef:N0,useState:function(){return hc(so)},useDebugValue:Gh,useDeferredValue:function(t){var e=Yt();return b0(e,He.memoizedState,t)},useTransition:function(){var t=hc(so)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:y0,useSyncExternalStore:v0,useId:R0,unstable_isNewReconciler:!1},Ex={readContext:Qt,useCallback:D0,useContext:Qt,useEffect:Wh,useImperativeHandle:T0,useInsertionEffect:_0,useLayoutEffect:I0,useMemo:A0,useReducer:fc,useRef:N0,useState:function(){return fc(so)},useDebugValue:Gh,useDeferredValue:function(t){var e=Yt();return He===null?e.memoizedState=t:b0(e,He.memoizedState,t)},useTransition:function(){var t=fc(so)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:y0,useSyncExternalStore:v0,useId:R0,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eu={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=cr(t),i=bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(sn(e,t,s,r),La(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=cr(t),i=bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(sn(e,t,s,r),La(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=cr(t),s=bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,r),e!==null&&(sn(e,t,r,n),La(e,t,r))}};function cp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xi(n,r)||!Xi(s,i):!0}function O0(t,e,n){var r=!1,s=vr,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=bt(e)?Br:gt.current,r=e.contextTypes,i=(r=r!=null)?Fs(t,s):vr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function dp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eu.enqueueReplaceState(e,e.state,null)}function gd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=bt(e)?Br:gt.current,s.context=Fs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eu.enqueueReplaceState(s,s.state,null),fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e){try{var n="",r=e;do n+=Wk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wx=typeof WeakMap=="function"?WeakMap:Map;function L0(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vl||(vl=!0,Cd=r),yd(t,e)},n}function F0(t,e,n){n=bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yd(t,e),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Mx.bind(null,t,e,n),e.then(t,t))}function fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,lr(n,e,1))),n.lanes|=1),t)}var kx=Bn.ReactCurrentOwner,Dt=!1;function wt(t,e,n,r){e.child=t===null?f0(e,null,n,r):Vs(e,t.child,n,r)}function pp(t,e,n,r,s){n=n.render;var i=e.ref;return Ds(e,s),r=Hh(t,e,n,r,i,s),n=Kh(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Ae&&n&&Ph(e),e.flags|=1,wt(t,e,r,s),e.child)}function gp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!nf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,U0(t,e,i,r,s)):(t=Ba(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(o,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function U0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xi(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,$n(t,e,s)}return vd(t,e,n,r,s)}function V0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(xs,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(xs,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(xs,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Se(xs,Pt),Pt|=r;return wt(t,e,s,n),e.child}function z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vd(t,e,n,r,s){var i=bt(n)?Br:gt.current;return i=Fs(e,i),Ds(e,s),n=Hh(t,e,n,r,i,s),r=Kh(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Ae&&r&&Ph(e),e.flags|=1,wt(t,e,n,s),e.child)}function yp(t,e,n,r,s){if(bt(n)){var i=!0;ll(e)}else i=!1;if(Ds(e,s),e.stateNode===null)Va(t,e),O0(e,n,r),gd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qt(c):(c=bt(n)?Br:gt.current,c=Fs(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&dp(e,o,r,c),Gn=!1;var f=e.memoizedState;o.state=f,fl(e,r,o,s),l=e.memoizedState,a!==r||f!==l||At.current||Gn?(typeof d=="function"&&(pd(e,n,d,r),l=e.memoizedState),(a=Gn||cp(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,p0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qt(l):(l=bt(n)?Br:gt.current,l=Fs(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&dp(e,o,r,l),Gn=!1,f=e.memoizedState,o.state=f,fl(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||At.current||Gn?(typeof v=="function"&&(pd(e,n,v,r),w=e.memoizedState),(c=Gn||cp(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ed(t,e,n,r,i,s)}function Ed(t,e,n,r,s,i){z0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&np(e,n,!1),$n(t,e,i);r=e.stateNode,kx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vs(e,t.child,null,i),e.child=Vs(e,null,a,i)):wt(t,e,a,i),e.memoizedState=r.state,s&&np(e,n,!0),e.child}function j0(t){var e=t.stateNode;e.pendingContext?tp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tp(t,e.context,!1),zh(t,e.containerInfo)}function vp(t,e,n,r,s){return Us(),$h(s),e.flags|=256,wt(t,e,n,r),e.child}var wd={dehydrated:null,treeContext:null,retryLane:0};function kd(t){return{baseLanes:t,cachePool:null,transitions:null}}function B0(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Se(Pe,s&1),t===null)return fd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ru(o,r,0,null),t=Vr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kd(n),e.memoizedState=wd,t):Qh(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xx(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=dr(a,i):(i=Vr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wd,r}return i=t.child,t=i.sibling,r=dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qh(t,e){return e=ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function va(t,e,n,r){return r!==null&&$h(r),Vs(e,t.child,null,n),t=Qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mc(Error($(422))),va(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ru({mode:"visible",children:r.children},s,0,null),i=Vr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vs(e,t.child,null,o),e.child.memoizedState=kd(o),e.memoizedState=wd,i);if(!(e.mode&1))return va(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=mc(i,r,void 0),va(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dt||a){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mn(t,s),sn(r,t,s,-1))}return tf(),r=mc(Error($(421))),va(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$x.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mt=ar(s.nextSibling),Ot=e,Ae=!0,tn=null,t!==null&&(qt[Ht++]=In,qt[Ht++]=Cn,qt[Ht++]=qr,In=t.id,Cn=t.overflow,qr=e),e=Qh(e,r.children),e.flags|=4096,e)}function Ep(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),md(t.return,e,n)}function pc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function q0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ep(t,n,e);else if(t.tag===19)Ep(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ml(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),pc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ml(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}pc(e,!0,n,null,i);break;case"together":pc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sx(t,e,n){switch(e.tag){case 3:j0(e),Us();break;case 5:g0(e);break;case 1:bt(e.type)&&ll(e);break;case 4:zh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Se(dl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?B0(t,e,n):(Se(Pe,Pe.current&1),t=$n(t,e,n),t!==null?t.sibling:null);Se(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return q0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,V0(t,e,n)}return $n(t,e,n)}var H0,xd,K0,W0;H0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xd=function(){};K0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$r(En.current);var i=null;switch(n){case"input":s=qc(t,s),r=qc(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=Wc(t,s),r=Wc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ol)}Qc(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};W0=function(t,e,n,r){n!==r&&(e.flags|=4)};function gi(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Nx(t,e,n){var r=e.pendingProps;switch(Mh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return bt(e.type)&&al(),at(e),null;case 3:return r=e.stateNode,zs(),Ce(At),Ce(gt),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ga(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Ad(tn),tn=null))),xd(t,e),at(e),null;case 5:jh(e);var s=$r(no.current);if(n=e.type,t!==null&&e.stateNode!=null)K0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return at(e),null}if(t=$r(En.current),ga(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mn]=e,r[eo]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Si.length;s++)Ne(Si[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Tm(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":Am(r,i),Ne("invalid",r)}Qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&pa(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&pa(r.textContent,a,t),s=["children",""+a]):qi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":aa(r),Dm(r,i,!0);break;case"textarea":aa(r),bm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ol)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ky(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[eo]=r,H0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yc(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Si.length;s++)Ne(Si[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":Tm(t,r),s=qc(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Am(t,r),s=Wc(t,r),Ne("invalid",t);break;default:s=r}Qc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ny(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xy(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hi(t,l):typeof l=="number"&&Hi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Eh(t,i,l,o))}switch(n){case"input":aa(t),Dm(t,r,!1);break;case"textarea":aa(t),bm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_s(t,!!r.multiple,i,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)W0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=$r(no.current),$r(En.current),ga(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:pa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return at(e),null;case 13:if(Ce(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Mt!==null&&e.mode&1&&!(e.flags&128))d0(),Us(),e.flags|=98560,i=!1;else if(i=ga(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[mn]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else tn!==null&&(Ad(tn),tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):tf())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return zs(),xd(t,e),t===null&&Ji(e.stateNode.containerInfo),at(e),null;case 10:return Fh(e.type._context),at(e),null;case 17:return bt(e.type)&&al(),at(e),null;case 19:if(Ce(Pe),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)gi(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ml(t),o!==null){for(e.flags|=128,gi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Bs&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ml(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return at(e),null}else 2*Ve()-i.renderingStartTime>Bs&&n!==1073741824&&(e.flags|=128,r=!0,gi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Pe.current,Se(Pe,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return ef(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function _x(t,e){switch(Mh(e),e.tag){case 1:return bt(e.type)&&al(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),Ce(At),Ce(gt),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(Ce(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Pe),null;case 4:return zs(),null;case 10:return Fh(e.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Ea=!1,ct=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,q=null;function ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Sd(t,e,n){try{n()}catch(r){Le(t,e,r)}}var wp=!1;function Cx(t,e){if(od=rl,t=Jy(),Rh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ad={focusedElem:t,selectionRange:n},rl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,x=w.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?E:Zt(e.type,E),x);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){Le(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return w=wp,wp=!1,w}function $i(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sd(e,n,i)}s=s.next}while(s!==r)}}function tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function G0(t){var e=t.alternate;e!==null&&(t.alternate=null,G0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[eo],delete e[cd],delete e[ux],delete e[cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Q0(t){return t.tag===5||t.tag===3||t.tag===4}function kp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ol));else if(r!==4&&(t=t.child,t!==null))for(_d(t,e,n),t=t.sibling;t!==null;)_d(t,e,n),t=t.sibling}function Id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}var Ze=null,en=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Y0(t,e,n),n=n.sibling}function Y0(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Wl,n)}catch{}switch(n.tag){case 5:ct||ks(n,e);case 6:var r=Ze,s=en;Ze=null,Hn(t,e,n),Ze=r,en=s,Ze!==null&&(en?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(en?(t=Ze,n=n.stateNode,t.nodeType===8?lc(t.parentNode,n):t.nodeType===1&&lc(t,n),Qi(t)):lc(Ze,n.stateNode));break;case 4:r=Ze,s=en,Ze=n.stateNode.containerInfo,en=!0,Hn(t,e,n),Ze=r,en=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sd(n,e,o),s=s.next}while(s!==r)}Hn(t,e,n);break;case 1:if(!ct&&(ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Le(n,e,a)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Hn(t,e,n),ct=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function xp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ix),e.forEach(function(r){var s=Ox.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ze=a.stateNode,en=!1;break e;case 3:Ze=a.stateNode.containerInfo,en=!0;break e;case 4:Ze=a.stateNode.containerInfo,en=!0;break e}a=a.return}if(Ze===null)throw Error($(160));Y0(i,o,s),Ze=null,en=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Le(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X0(e,t),e=e.sibling}function X0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),dn(t),r&4){try{$i(3,t,t.return),tu(3,t)}catch(E){Le(t,t.return,E)}try{$i(5,t,t.return)}catch(E){Le(t,t.return,E)}}break;case 1:Jt(e,t),dn(t),r&512&&n!==null&&ks(n,n.return);break;case 5:if(Jt(e,t),dn(t),r&512&&n!==null&&ks(n,n.return),t.flags&32){var s=t.stateNode;try{Hi(s,"")}catch(E){Le(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ey(s,i),Yc(a,o);var c=Yc(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ny(s,h):d==="dangerouslySetInnerHTML"?xy(s,h):d==="children"?Hi(s,h):Eh(s,d,h,c)}switch(a){case"input":Hc(s,i);break;case"textarea":wy(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?_s(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?_s(s,!!i.multiple,i.defaultValue,!0):_s(s,!!i.multiple,i.multiple?[]:"",!1))}s[eo]=i}catch(E){Le(t,t.return,E)}}break;case 6:if(Jt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Le(t,t.return,E)}}break;case 3:if(Jt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qi(e.containerInfo)}catch(E){Le(t,t.return,E)}break;case 4:Jt(e,t),dn(t);break;case 13:Jt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jh=Ve())),r&4&&xp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(c=ct)||d,Jt(e,t),ct=c):Jt(e,t),dn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(h=q=d;q!==null;){switch(f=q,v=f.child,f.tag){case 0:case 11:case 14:case 15:$i(4,f,f.return);break;case 1:ks(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(E){Le(r,n,E)}}break;case 5:ks(f,f.return);break;case 22:if(f.memoizedState!==null){Np(h);continue}}v!==null?(v.return=f,q=v):Np(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Sy("display",o))}catch(E){Le(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){Le(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(e,t),dn(t),r&4&&xp(t);break;case 21:break;default:Jt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Q0(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Hi(s,""),r.flags&=-33);var i=kp(t);Id(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=kp(t);_d(t,a,o);break;default:throw Error($(161))}}catch(l){Le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tx(t,e,n){q=t,J0(t)}function J0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ea;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ct;a=Ea;var c=ct;if(Ea=o,(ct=l)&&!c)for(q=s;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?_p(s):l!==null?(l.return=o,q=l):_p(s);for(;i!==null;)q=i,J0(i),i=i.sibling;q=s,Ea=a,ct=c}Sp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Sp(t)}}function Sp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ap(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ap(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Qi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ct||e.flags&512&&Nd(e)}catch(f){Le(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Np(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function _p(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(l){Le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Le(e,s,l)}}var i=e.return;try{Nd(e)}catch(l){Le(e,i,l)}break;case 5:var o=e.return;try{Nd(e)}catch(l){Le(e,o,l)}}}catch(l){Le(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var Dx=Math.ceil,yl=Bn.ReactCurrentDispatcher,Yh=Bn.ReactCurrentOwner,Gt=Bn.ReactCurrentBatchConfig,fe=0,Ye=null,Be=null,nt=0,Pt=0,xs=_r(0),Ke=0,oo=null,Kr=0,nu=0,Xh=0,Oi=null,Ct=null,Jh=0,Bs=1/0,Nn=null,vl=!1,Cd=null,ur=null,wa=!1,nr=null,El=0,Li=0,Td=null,za=-1,ja=0;function xt(){return fe&6?Ve():za!==-1?za:za=Ve()}function cr(t){return t.mode&1?fe&2&&nt!==0?nt&-nt:hx.transition!==null?(ja===0&&(ja=Oy()),ja):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:By(t.type)),t):1}function sn(t,e,n,r){if(50<Li)throw Li=0,Td=null,Error($(185));Io(t,n,r),(!(fe&2)||t!==Ye)&&(t===Ye&&(!(fe&2)&&(nu|=n),Ke===4&&Yn(t,nt)),Rt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Bs=Ve()+500,Jl&&Ir()))}function Rt(t,e){var n=t.callbackNode;h1(t,e);var r=nl(t,t===Ye?nt:0);if(r===0)n!==null&&Mm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mm(n),e===1)t.tag===0?dx(Ip.bind(null,t)):l0(Ip.bind(null,t)),ax(function(){!(fe&6)&&Ir()}),n=null;else{switch(Ly(r)){case 1:n=Nh;break;case 4:n=My;break;case 16:n=tl;break;case 536870912:n=$y;break;default:n=tl}n=ov(n,Z0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Z0(t,e){if(za=-1,ja=0,fe&6)throw Error($(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var r=nl(t,t===Ye?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wl(t,r);else{e=r;var s=fe;fe|=2;var i=tv();(Ye!==t||nt!==e)&&(Nn=null,Bs=Ve()+500,Ur(t,e));do try{Rx();break}catch(a){ev(t,a)}while(!0);Lh(),yl.current=i,fe=s,Be!==null?e=0:(Ye=null,nt=0,e=Ke)}if(e!==0){if(e===2&&(s=td(t),s!==0&&(r=s,e=Dd(t,s))),e===1)throw n=oo,Ur(t,0),Yn(t,r),Rt(t,Ve()),n;if(e===6)Yn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ax(s)&&(e=wl(t,r),e===2&&(i=td(t),i!==0&&(r=i,e=Dd(t,i))),e===1))throw n=oo,Ur(t,0),Yn(t,r),Rt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:br(t,Ct,Nn);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Jh+500-Ve(),10<e)){if(nl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ud(br.bind(null,t,Ct,Nn),e);break}br(t,Ct,Nn);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dx(r/1960))-r,10<r){t.timeoutHandle=ud(br.bind(null,t,Ct,Nn),r);break}br(t,Ct,Nn);break;case 5:br(t,Ct,Nn);break;default:throw Error($(329))}}}return Rt(t,Ve()),t.callbackNode===n?Z0.bind(null,t):null}function Dd(t,e){var n=Oi;return t.current.memoizedState.isDehydrated&&(Ur(t,e).flags|=256),t=wl(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Ad(e)),t}function Ad(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Ax(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Xh,e&=~nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function Ip(t){if(fe&6)throw Error($(327));As();var e=nl(t,0);if(!(e&1))return Rt(t,Ve()),null;var n=wl(t,e);if(t.tag!==0&&n===2){var r=td(t);r!==0&&(e=r,n=Dd(t,r))}if(n===1)throw n=oo,Ur(t,0),Yn(t,e),Rt(t,Ve()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,br(t,Ct,Nn),Rt(t,Ve()),null}function Zh(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Bs=Ve()+500,Jl&&Ir())}}function Wr(t){nr!==null&&nr.tag===0&&!(fe&6)&&As();var e=fe;fe|=1;var n=Gt.transition,r=Ee;try{if(Gt.transition=null,Ee=1,t)return t()}finally{Ee=r,Gt.transition=n,fe=e,!(fe&6)&&Ir()}}function ef(){Pt=xs.current,Ce(xs)}function Ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ox(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:zs(),Ce(At),Ce(gt),Bh();break;case 5:jh(r);break;case 4:zs();break;case 13:Ce(Pe);break;case 19:Ce(Pe);break;case 10:Fh(r.type._context);break;case 22:case 23:ef()}n=n.return}if(Ye=t,Be=t=dr(t.current,null),nt=Pt=e,Ke=0,oo=null,Xh=nu=Kr=0,Ct=Oi=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Mr=null}return t}function ev(t,e){do{var n=Be;try{if(Lh(),Fa.current=gl,pl){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pl=!1}if(Hr=0,Qe=He=Me=null,Mi=!1,ro=0,Yh.current=null,n===null||n.return===null){Ke=1,oo=e,Be=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=fp(o);if(v!==null){v.flags&=-257,mp(v,o,a,i,e),v.mode&1&&hp(i,c,e),e=v,l=c;var w=e.updateQueue;if(w===null){var E=new Set;E.add(l),e.updateQueue=E}else w.add(l);break e}else{if(!(e&1)){hp(i,c,e),tf();break e}l=Error($(426))}}else if(Ae&&a.mode&1){var x=fp(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mp(x,o,a,i,e),$h(js(l,a));break e}}i=l=js(l,a),Ke!==4&&(Ke=2),Oi===null?Oi=[i]:Oi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=L0(i,l,e);op(i,m);break e;case 1:a=l;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ur===null||!ur.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=F0(i,a,e);op(i,k);break e}}i=i.return}while(i!==null)}rv(n)}catch(T){e=T,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function tv(){var t=yl.current;return yl.current=gl,t===null?gl:t}function tf(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||!(Kr&268435455)&&!(nu&268435455)||Yn(Ye,nt)}function wl(t,e){var n=fe;fe|=2;var r=tv();(Ye!==t||nt!==e)&&(Nn=null,Ur(t,e));do try{bx();break}catch(s){ev(t,s)}while(!0);if(Lh(),fe=n,yl.current=r,Be!==null)throw Error($(261));return Ye=null,nt=0,Ke}function bx(){for(;Be!==null;)nv(Be)}function Rx(){for(;Be!==null&&!r1();)nv(Be)}function nv(t){var e=iv(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?rv(t):Be=e,Yh.current=null}function rv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_x(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Be=null;return}}else if(n=Nx(n,e,Pt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ke===0&&(Ke=5)}function br(t,e,n){var r=Ee,s=Gt.transition;try{Gt.transition=null,Ee=1,Px(t,e,n,r)}finally{Gt.transition=s,Ee=r}return null}function Px(t,e,n,r){do As();while(nr!==null);if(fe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(f1(t,i),t===Ye&&(Be=Ye=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wa||(wa=!0,ov(tl,function(){return As(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=Ee;Ee=1;var a=fe;fe|=4,Yh.current=null,Cx(t,n),X0(n,t),Z1(ad),rl=!!od,ad=od=null,t.current=n,Tx(n),s1(),fe=a,Ee=o,Gt.transition=i}else t.current=n;if(wa&&(wa=!1,nr=t,El=s),i=t.pendingLanes,i===0&&(ur=null),a1(n.stateNode),Rt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vl)throw vl=!1,t=Cd,Cd=null,t;return El&1&&t.tag!==0&&As(),i=t.pendingLanes,i&1?t===Td?Li++:(Li=0,Td=t):Li=0,Ir(),null}function As(){if(nr!==null){var t=Ly(El),e=Gt.transition,n=Ee;try{if(Gt.transition=null,Ee=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,El=0,fe&6)throw Error($(331));var s=fe;for(fe|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:$i(8,d,i)}var h=d.child;if(h!==null)h.return=d,q=h;else for(;q!==null;){d=q;var f=d.sibling,v=d.return;if(G0(d),d===c){q=null;break}if(f!==null){f.return=v,q=f;break}q=v}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var x=E.sibling;E.sibling=null,E=x}while(E!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$i(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,q=m;break e}q=i.return}}var g=t.current;for(q=g;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=g;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tu(9,a)}}catch(T){Le(a,a.return,T)}if(a===o){q=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,q=k;break e}q=a.return}}if(fe=s,Ir(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Wl,t)}catch{}r=!0}return r}finally{Ee=n,Gt.transition=e}}return!1}function Cp(t,e,n){e=js(n,e),e=L0(t,e,1),t=lr(t,e,1),e=xt(),t!==null&&(Io(t,1,e),Rt(t,e))}function Le(t,e,n){if(t.tag===3)Cp(t,t,n);else for(;e!==null;){if(e.tag===3){Cp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){t=js(n,t),t=F0(e,t,1),e=lr(e,t,1),t=xt(),e!==null&&(Io(e,1,t),Rt(e,t));break}}e=e.return}}function Mx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(nt&n)===n&&(Ke===4||Ke===3&&(nt&130023424)===nt&&500>Ve()-Jh?Ur(t,0):Xh|=n),Rt(t,e)}function sv(t,e){e===0&&(t.mode&1?(e=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):e=1);var n=xt();t=Mn(t,e),t!==null&&(Io(t,e,n),Rt(t,n))}function $x(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sv(t,n)}function Ox(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),sv(t,n)}var iv;iv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,Sx(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ae&&e.flags&1048576&&u0(e,cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Va(t,e),t=e.pendingProps;var s=Fs(e,gt.current);Ds(e,n),s=Hh(null,e,r,t,s,n);var i=Kh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,ll(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vh(e),s.updater=eu,e.stateNode=s,s._reactInternals=e,gd(e,r,t,n),e=Ed(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&Ph(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Va(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fx(r),t=Zt(r,t),s){case 0:e=vd(null,e,r,t,n);break e;case 1:e=yp(null,e,r,t,n);break e;case 11:e=pp(null,e,r,t,n);break e;case 14:e=gp(null,e,r,Zt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),vd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),yp(t,e,r,s,n);case 3:e:{if(j0(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,p0(t,e),fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=js(Error($(423)),e),e=vp(t,e,r,n,s);break e}else if(r!==s){s=js(Error($(424)),e),e=vp(t,e,r,n,s);break e}else for(Mt=ar(e.stateNode.containerInfo.firstChild),Ot=e,Ae=!0,tn=null,n=f0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===s){e=$n(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return g0(e),t===null&&fd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ld(r,s)?o=null:i!==null&&ld(r,i)&&(e.flags|=32),z0(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&fd(e),null;case 13:return B0(t,e,n);case 4:return zh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vs(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),pp(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Se(dl,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!At.current){e=$n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),md(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),md(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ds(e,n),s=Qt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=Zt(r,e.pendingProps),s=Zt(r.type,s),gp(t,e,r,s,n);case 15:return U0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Va(t,e),e.tag=1,bt(r)?(t=!0,ll(e)):t=!1,Ds(e,n),O0(e,r,s),gd(e,r,s,n),Ed(null,e,r,!0,t,n);case 19:return q0(t,e,n);case 22:return V0(t,e,n)}throw Error($(156,e.tag))};function ov(t,e){return Py(t,e)}function Lx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new Lx(t,e,n,r)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return nf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kh)return 11;if(t===xh)return 14}return 2}function dr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ba(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")nf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hs:return Vr(n.children,s,i,e);case wh:o=8,s|=8;break;case Vc:return t=Wt(12,n,e,s|2),t.elementType=Vc,t.lanes=i,t;case zc:return t=Wt(13,n,e,s),t.elementType=zc,t.lanes=i,t;case jc:return t=Wt(19,n,e,s),t.elementType=jc,t.lanes=i,t;case gy:return ru(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case my:o=10;break e;case py:o=9;break e;case kh:o=11;break e;case xh:o=14;break e;case Wn:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function ru(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=gy,t.lanes=n,t.stateNode={isHidden:!1},t}function gc(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function yc(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ux(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rf(t,e,n,r,s,i,o,a,l){return t=new Ux(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(i),t}function Vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function av(t){if(!t)return vr;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(bt(n))return a0(t,n,e)}return e}function lv(t,e,n,r,s,i,o,a,l){return t=rf(n,r,!0,t,s,i,o,a,l),t.context=av(null),n=t.current,r=xt(),s=cr(n),i=bn(r,s),i.callback=e??null,lr(n,i,s),t.current.lanes=s,Io(t,s,r),Rt(t,r),t}function su(t,e,n,r){var s=e.current,i=xt(),o=cr(s);return n=av(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lr(s,e,o),t!==null&&(sn(t,s,o,i),La(t,s,o)),o}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sf(t,e){Tp(t,e),(t=t.alternate)&&Tp(t,e)}function zx(){return null}var uv=typeof reportError=="function"?reportError:function(t){console.error(t)};function of(t){this._internalRoot=t}iu.prototype.render=of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));su(t,e,null,null)};iu.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){su(null,t,null,null)}),e[Pn]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&jy(t)}};function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function jx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=kl(o);i.call(c)}}var o=lv(e,r,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=o,t[Pn]=o.current,Ji(t.nodeType===8?t.parentNode:t),Wr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=kl(l);a.call(c)}}var l=rf(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=l,t[Pn]=l.current,Ji(t.nodeType===8?t.parentNode:t),Wr(function(){su(e,l,n,r)}),l}function au(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=kl(o);a.call(l)}}su(e,o,t,s)}else o=jx(n,e,t,s,r);return kl(o)}Fy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xi(e.pendingLanes);n!==0&&(_h(e,n|1),Rt(e,Ve()),!(fe&6)&&(Bs=Ve()+500,Ir()))}break;case 13:Wr(function(){var r=Mn(t,1);if(r!==null){var s=xt();sn(r,t,1,s)}}),sf(t,1)}};Ih=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=xt();sn(e,t,134217728,n)}sf(t,134217728)}};Uy=function(t){if(t.tag===13){var e=cr(t),n=Mn(t,e);if(n!==null){var r=xt();sn(n,t,e,r)}sf(t,e)}};Vy=function(){return Ee};zy=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Jc=function(t,e,n){switch(e){case"input":if(Hc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xl(r);if(!s)throw Error($(90));vy(r),Hc(r,s)}}}break;case"textarea":wy(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};Cy=Zh;Ty=Wr;var Bx={usingClientEntryPoint:!1,Events:[To,gs,Xl,_y,Iy,Zh]},yi={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:yi.bundleType,version:yi.version,rendererPackageName:yi.rendererPackageName,rendererConfig:yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=by(t),t===null?null:t.stateNode},findFiberByHostInstance:yi.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{Wl=ka.inject(qx),vn=ka}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bx;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(e))throw Error($(200));return Vx(t,e,null,n)};jt.createRoot=function(t,e){if(!af(t))throw Error($(299));var n=!1,r="",s=uv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rf(t,1,!1,null,null,n,!1,r,s),t[Pn]=e.current,Ji(t.nodeType===8?t.parentNode:t),new of(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=by(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Wr(t)};jt.hydrate=function(t,e,n){if(!ou(e))throw Error($(200));return au(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!af(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=uv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lv(e,null,t,1,n??null,s,!1,i,o),t[Pn]=e.current,Ji(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new iu(e)};jt.render=function(t,e,n){if(!ou(e))throw Error($(200));return au(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!ou(t))throw Error($(40));return t._reactRootContainer?(Wr(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};jt.unstable_batchedUpdates=Zh;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ou(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return au(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cv)}catch(t){console.error(t)}}cv(),cy.exports=jt;var Hx=cy.exports,dv,Ap=Hx;dv=Ap.createRoot,Ap.hydrateRoot;var bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Kx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,v=c&63;l||(v=64,o||(f=64)),r.push(n[d],n[h],n[f],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Wx;const f=i<<2|a>>4;if(r.push(f),c!==64){const v=a<<4&240|c>>2;if(r.push(v),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gx=function(t){const e=hv(t);return fv.encodeByteArray(e,!0)},xl=function(t){return Gx(t).replace(/\./g,"")},mv=function(t){try{return fv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=()=>Qx().__FIREBASE_DEFAULTS__,Xx=()=>{if(typeof process>"u"||typeof bp>"u")return;const t=bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mv(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return Yx()||Xx()||Jx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pv=t=>{var e,n;return(n=(e=lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zx=t=>{const e=pv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gv=()=>{var t;return(t=lf())===null||t===void 0?void 0:t.config},yv=t=>{var e;return(e=lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xl(JSON.stringify(n)),xl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function rS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iS(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oS(){try{return typeof indexedDB=="object"}catch{return!1}}function aS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lS,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uS(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new qn(s,a,r)}}function uS(t,e){return t.replace(cS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cS=/\{\$([^}]+)}/g;function dS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rp(i)&&Rp(o)){if(!Sl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hS(t,e){const n=new fS(t,e);return n.subscribe.bind(n)}class fS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vc),s.error===void 0&&(s.error=vc),s.complete===void 0&&(s.complete=vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yS(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(t){return t===Rr?void 0:t}function yS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const ES={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},wS=pe.INFO,kS={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},xS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uf{constructor(e){this.name=e,this._logLevel=wS,this._logHandler=xS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ES[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const SS=(t,e)=>e.some(n=>t instanceof n);let Pp,Mp;function NS(){return Pp||(Pp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return Mp||(Mp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vv=new WeakMap,bd=new WeakMap,Ev=new WeakMap,Ec=new WeakMap,cf=new WeakMap;function IS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vv.set(n,t)}).catch(()=>{}),cf.set(e,t),e}function CS(t){if(bd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});bd.set(t,e)}let Rd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ev.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TS(t){Rd=t(Rd)}function DS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wc(this),e,...n);return Ev.set(r,e.sort?e.sort():[e]),hr(r)}:_S().includes(t)?function(...e){return t.apply(wc(this),e),hr(vv.get(this))}:function(...e){return hr(t.apply(wc(this),e))}}function AS(t){return typeof t=="function"?DS(t):(t instanceof IDBTransaction&&CS(t),SS(t,NS())?new Proxy(t,Rd):t)}function hr(t){if(t instanceof IDBRequest)return IS(t);if(Ec.has(t))return Ec.get(t);const e=AS(t);return e!==t&&(Ec.set(t,e),cf.set(e,t)),e}const wc=t=>cf.get(t);function bS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hr(o.result),l.oldVersion,l.newVersion,hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const RS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],kc=new Map;function $p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kc.get(e))return kc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RS.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return kc.set(e,i),i}TS(t=>({...t,get:(e,n,r)=>$p(e,n)||t.get(e,n,r),has:(e,n)=>!!$p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",Op="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new uf("@firebase/app"),OS="@firebase/app-compat",LS="@firebase/analytics-compat",FS="@firebase/analytics",US="@firebase/app-check-compat",VS="@firebase/app-check",zS="@firebase/auth",jS="@firebase/auth-compat",BS="@firebase/database",qS="@firebase/database-compat",HS="@firebase/functions",KS="@firebase/functions-compat",WS="@firebase/installations",GS="@firebase/installations-compat",QS="@firebase/messaging",YS="@firebase/messaging-compat",XS="@firebase/performance",JS="@firebase/performance-compat",ZS="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",rN="@firebase/firestore",sN="@firebase/firestore-compat",iN="firebase",oN="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]",aN={[Pd]:"fire-core",[OS]:"fire-core-compat",[FS]:"fire-analytics",[LS]:"fire-analytics-compat",[VS]:"fire-app-check",[US]:"fire-app-check-compat",[zS]:"fire-auth",[jS]:"fire-auth-compat",[BS]:"fire-rtdb",[qS]:"fire-rtdb-compat",[HS]:"fire-fn",[KS]:"fire-fn-compat",[WS]:"fire-iid",[GS]:"fire-iid-compat",[QS]:"fire-fcm",[YS]:"fire-fcm-compat",[XS]:"fire-perf",[JS]:"fire-perf-compat",[ZS]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[rN]:"fire-fst",[sN]:"fire-fst-compat","fire-js":"fire-js",[iN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Map,$d=new Map;function lN(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qs(t){const e=t.name;if($d.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;$d.set(e,t);for(const n of Nl.values())lN(n,t);return!0}function df(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fr=new Ao("app","Firebase",uN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=oN;function wv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Md,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=gv()),!n)throw fr.create("no-options");const i=Nl.get(s);if(i){if(Sl(n,i.options)&&Sl(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const o=new vS(s);for(const l of $d.values())o.addComponent(l);const a=new cN(n,r,o);return Nl.set(s,a),a}function kv(t=Md){const e=Nl.get(t);if(!e&&t===Md&&gv())return wv();if(!e)throw fr.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let s=(r=aN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}qs(new Gr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firebase-heartbeat-database",hN=1,ao="firebase-heartbeat-store";let xc=null;function xv(){return xc||(xc=bS(dN,hN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),xc}async function fN(t){try{return await(await xv()).transaction(ao).objectStore(ao).get(Sv(t))}catch(e){if(e instanceof qn)Qr.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function Lp(t,e){try{const r=(await xv()).transaction(ao,"readwrite");await r.objectStore(ao).put(e,Sv(t)),await r.done}catch(n){if(n instanceof qn)Qr.warn(n.message);else{const r=fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(r.message)}}}function Sv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1024,pN=30*24*60*60*1e3;class gN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fp();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=pN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fp(),{heartbeatsToSend:n,unsentEntries:r}=yN(this._heartbeatsCache.heartbeats),s=xl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Fp(){return new Date().toISOString().substring(0,10)}function yN(t,e=mN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Up(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Up(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oS()?aS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Up(t){return xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){qs(new Gr("platform-logger",e=>new MS(e),"PRIVATE")),qs(new Gr("heartbeat",e=>new gN(e),"PRIVATE")),mr(Pd,Op,t),mr(Pd,Op,"esm2017"),mr("fire-js","")}EN("");var wN="firebase",kN="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(wN,kN,"app");function hf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Nv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xN=Nv,_v=new Ao("auth","Firebase",Nv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new uf("@firebase/auth");function SN(t,...e){_l.logLevel<=pe.WARN&&_l.warn(`Auth (${ri}): ${t}`,...e)}function qa(t,...e){_l.logLevel<=pe.ERROR&&_l.error(`Auth (${ri}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw ff(t,...e)}function wn(t,...e){return ff(t,...e)}function NN(t,e,n){const r=Object.assign(Object.assign({},xN()),{[e]:n});return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function ff(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _v.create(t,...e)}function te(t,e,...n){if(!t)throw ff(e,...n)}function Tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qa(e),new Error(e)}function Ln(t,e){t||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _N(){return Vp()==="http:"||Vp()==="https:"}function Vp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_N()||rS()||"connection"in navigator)?navigator.onLine:!0}function CN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ln(n>e,"Short delay should be less than long delay!"),this.isMobile=nS()||sS()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Ro(3e4,6e4);function pf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Po(t,e,n,r,s={}){return Cv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=bo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Iv.fetch()(Dv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function Cv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TN),e);try{const s=new AN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xa(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw NN(t,d,c);On(t,d)}}catch(s){if(s instanceof qn)throw s;On(t,"network-request-failed",{message:String(s)})}}async function Tv(t,e,n,r,s={}){const i=await Po(t,e,n,r,s);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Dv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?mf(t.config,s):`${t.config.apiScheme}://${s}`}class AN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),DN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e){return Po(t,"POST","/v1/accounts:delete",e)}async function RN(t,e){return Po(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PN(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=gf(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fi(Sc(s.auth_time)),issuedAtTime:Fi(Sc(s.iat)),expirationTime:Fi(Sc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Sc(t){return Number(t)*1e3}function gf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qa("JWT malformed, contained fewer than 3 sections"),null;try{const s=mv(n);return s?JSON.parse(s):(qa("Failed to decode base64 JWT payload"),null)}catch(s){return qa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function MN(t){const e=gf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&$N(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){var e;const n=t.auth,r=await t.getIdToken(),s=await lo(t,RN(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?UN(i.providerUserInfo):[],a=FN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Av(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function LN(t){const e=We(t);await Il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function UN(t){return t.map(e=>{var{providerId:n}=e,r=hf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){const n=await Cv(t,{},async()=>{const r=bo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Dv(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Iv.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await VN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new uo;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=hf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ON(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Av(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await lo(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PN(this,e)}reload(){return LN(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Il(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await lo(this,bN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:k,isAnonymous:T,providerData:R,stsTokenManager:P}=n;te(y&&P,e,"internal-error");const S=uo.fromJSON(this.name,P);te(typeof y=="string",e,"internal-error"),Kn(h,e.name),Kn(f,e.name),te(typeof k=="boolean",e,"internal-error"),te(typeof T=="boolean",e,"internal-error"),Kn(v,e.name),Kn(w,e.name),Kn(E,e.name),Kn(x,e.name),Kn(m,e.name),Kn(g,e.name);const L=new zr({uid:y,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:T,photoURL:w,phoneNumber:v,tenantId:E,stsTokenManager:S,createdAt:m,lastLoginAt:g});return R&&Array.isArray(R)&&(L.providerData=R.map(N=>Object.assign({},N))),x&&(L._redirectEventId=x),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new uo;s.updateFromServerResponse(n);const i=new zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Il(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=new Map;function Dn(t){Ln(t instanceof Function,"Expected a class definition");let e=zp.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bv.type="NONE";const jp=bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t,e,n){return`firebase:${t}:${e}:${n}`}class bs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ha(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ha("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bs(Dn(jp),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Dn(jp);const o=Ha(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=zr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new bs(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new bs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ov(e))return"Blackberry";if(Lv(e))return"Webos";if(yf(e))return"Safari";if((e.includes("chrome/")||Pv(e))&&!e.includes("edge/"))return"Chrome";if($v(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rv(t=yt()){return/firefox\//i.test(t)}function yf(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pv(t=yt()){return/crios\//i.test(t)}function Mv(t=yt()){return/iemobile/i.test(t)}function $v(t=yt()){return/android/i.test(t)}function Ov(t=yt()){return/blackberry/i.test(t)}function Lv(t=yt()){return/webos/i.test(t)}function lu(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zN(t=yt()){var e;return lu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jN(){return iS()&&document.documentMode===10}function Fv(t=yt()){return lu(t)||$v(t)||Lv(t)||Ov(t)||/windows phone/i.test(t)||Mv(t)}function BN(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e=[]){let n;switch(t){case"Browser":n=Bp(yt());break;case"Worker":n=`${Bp(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ri}/${r}`}async function Vv(t,e){return Po(t,"GET","/v2/recaptchaConfig",pf(t,e))}function qp(t){return t!==void 0&&t.enterprise!==void 0}class zv{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function jv(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",qN().appendChild(r)})}function HN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const KN="https://www.google.com/recaptcha/enterprise.js?render=",WN="recaptcha-enterprise",GN="NO_RECAPTCHA";class QN{constructor(e){this.type=WN,this.auth=Mo(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Vv(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new zv(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;qp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(GN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&qp(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}jv(KN+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hp(this),this.idTokenSubscription=new Hp(this),this.beforeStateQueue=new YN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_v,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await bs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Il(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?We(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}async initializeRecaptchaConfig(){const e=await Vv(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new zv(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new QN(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await bs.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return te(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mo(t){return We(t)}class Hp{constructor(e){this.auth=e,this.observer=null,this.addObserver=hS(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t,e){const n=df(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sl(i,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function ZN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function e_(t,e,n){const r=Mo(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Bv(e),{host:o,port:a}=t_(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),n_()}function Bv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t_(t){const e=Bv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Kp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Kp(o)}}}function Kp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function n_(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return Tv(t,"POST","/v1/accounts:signInWithIdp",pf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="http://localhost";class Yr extends qv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=hf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Yr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:r_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Hv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends $o{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jn.credential(n,r)}catch{return null}}}Jn.GOOGLE_SIGN_IN_METHOD="google.com";Jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends $o{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com";Zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends $o{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(t,e){return Tv(t,"POST","/v1/accounts:signUp",pf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zr._fromIdTokenResponse(e,r,s),o=Wp(r);return new Er({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Wp(r);return new Er({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Wp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(t){var e;const n=Mo(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Er({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await s_(n,{returnSecureToken:!0}),s=await Er._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cl(e,n,r,s)}}function Kv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Cl._fromErrorAndOperation(t,i,e,r):i})}async function o_(t,e,n=!1){const r=await lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Er._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await lo(t,Kv(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=gf(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),Er._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&On(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(t,e,n=!1){const r="signIn",s=await Kv(t,r,e),i=await Er._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function u_(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function c_(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function d_(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}const Tl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tl,"1"),this.storage.removeItem(Tl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(){const t=yt();return yf(t)||lu(t)}const f_=1e3,m_=10;class Gv extends Wv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=h_()&&BN(),this.fallbackToPolling=Fv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);jN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,m_):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},f_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gv.type="LOCAL";const p_=Gv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Wv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qv.type="SESSION";const Yv=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new uu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await g_(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=vf("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function v_(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function E_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w_(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function k_(){return Xv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="firebaseLocalStorageDb",x_=1,Dl="firebaseLocalStorage",Zv="fbase_key";class Oo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cu(t,e){return t.transaction([Dl],e?"readwrite":"readonly").objectStore(Dl)}function S_(){const t=indexedDB.deleteDatabase(Jv);return new Oo(t).toPromise()}function Ld(){const t=indexedDB.open(Jv,x_);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dl,{keyPath:Zv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dl)?e(r):(r.close(),await S_(),e(await Ld()))})})}async function Gp(t,e,n){const r=cu(t,!0).put({[Zv]:e,value:n});return new Oo(r).toPromise()}async function N_(t,e){const n=cu(t,!1).get(e),r=await new Oo(n).toPromise();return r===void 0?null:r.value}function Qp(t,e){const n=cu(t,!0).delete(e);return new Oo(n).toPromise()}const __=800,I_=3;class eE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>I_)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uu._getInstance(k_()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await E_(),!this.activeServiceWorker)return;this.sender=new y_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await Gp(e,Tl,"1"),await Qp(e,Tl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>N_(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cu(s,!1).getAll();return new Oo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),__)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eE.type="LOCAL";const C_=eE;new Ro(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e){return e?Dn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends qv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D_(t){return l_(t.auth,new Ef(t),t.bypassAuthState)}function A_(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),a_(n,new Ef(t),t.bypassAuthState)}async function b_(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),o_(n,new Ef(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D_;case"linkViaPopup":case"linkViaRedirect":return b_;case"reauthViaPopup":case"reauthViaRedirect":return A_;default:On(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Ro(2e3,1e4);class Ss extends tE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R_.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="pendingRedirect",Ka=new Map;class M_ extends tE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ka.get(this.auth._key());if(!e){try{const r=await $_(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ka.set(this.auth._key(),e)}return this.bypassAuthState||Ka.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $_(t,e){const n=F_(e),r=L_(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function O_(t,e){Ka.set(t._key(),e)}function L_(t){return Dn(t._redirectPersistence)}function F_(t){return Ha(P_,t.config.apiKey,t.name)}async function U_(t,e,n=!1){const r=Mo(t),s=T_(r,e),o=await new M_(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=10*60*1e3;class z_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j_(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V_&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yp(e))}saveEventToCache(e){this.cachedEventUids.add(Yp(e)),this.lastProcessedEventTime=Date.now()}}function Yp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function j_(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(t,e={}){return Po(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H_=/^https?/;async function K_(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B_(t);for(const n of e)try{if(W_(n))return}catch{}On(t,"unauthorized-domain")}function W_(t){const e=Od(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H_.test(n))return!1;if(q_.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Ro(3e4,6e4);function Xp(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q_(t){return new Promise((e,n)=>{var r,s,i;function o(){Xp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xp(),n(wn(t,"network-request-failed"))},timeout:G_.get()})}if(!((s=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=kn().gapi)===null||i===void 0)&&i.load)o();else{const a=HN("iframefcb");return kn()[a]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},jv(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wa=null,e})}let Wa=null;function Y_(t){return Wa=Wa||Q_(t),Wa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Ro(5e3,15e3),J_="__/auth/iframe",Z_="emulator/auth/iframe",eI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nI(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mf(e,Z_):`https://${t.config.authDomain}/${J_}`,r={apiKey:e.apiKey,appName:t.name,v:ri},s=tI.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bo(r).slice(1)}`}async function rI(t){const e=await Y_(t),n=kn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:nI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eI,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),a=kn().setTimeout(()=>{i(o)},X_.get());function l(){kn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iI=500,oI=600,aI="_blank",lI="http://localhost";class Jp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uI(t,e,n,r=iI,s=oI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sI),{width:r.toString(),height:s.toString(),top:i,left:o}),c=yt().toLowerCase();n&&(a=Pv(c)?aI:n),Rv(c)&&(e=e||lI,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[v,w])=>`${f}${v}=${w},`,"");if(zN(c)&&a!=="_self")return cI(e||"",a),new Jp(null);const h=window.open(e||"",a,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new Jp(h)}function cI(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="__/auth/handler",hI="emulator/auth/handler",fI=encodeURIComponent("fac");async function Zp(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ri,eventId:s};if(e instanceof Hv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof $o){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${fI}=${encodeURIComponent(l)}`:"";return`${mI(t)}?${bo(a).slice(1)}${c}`}function mI({config:t}){return t.emulator?mf(t,hI):`https://${t.authDomain}/${dI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="webStorageSupport";class pI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yv,this._completeRedirectFn=U_,this._overrideRedirectResult=O_}async _openPopup(e,n,r,s){var i;Ln((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zp(e,n,r,Od(),s);return uI(e,o,vf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zp(e,n,r,Od(),s);return v_(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ln(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rI(e),r=new z_(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nc,{type:Nc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Nc];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K_(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fv()||yf()||lu()}}const gI=pI;var eg="@firebase/auth",tg="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function EI(t){qs(new Gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uv(t)},c=new XN(r,s,i,l);return ZN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qs(new Gr("auth-internal",e=>{const n=Mo(e.getProvider("auth").getImmediate());return(r=>new yI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(eg,tg,vI(t)),mr(eg,tg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=5*60,kI=yv("authIdTokenMaxAge")||wI;let ng=null;const xI=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kI)return;const s=n==null?void 0:n.token;ng!==s&&(ng=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function SI(t=kv()){const e=df(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JN(t,{popupRedirectResolver:gI,persistence:[C_,p_,Yv]}),r=yv("authTokenSyncURL");if(r){const i=xI(r);c_(n,i,()=>i(n.currentUser)),u_(n,o=>i(o))}const s=pv("auth");return s&&e_(n,`http://${s}`),n}EI("Browser");var NI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,wf=wf||{},X=NI||self;function du(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function hu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function _I(t,e,n){return t.call.apply(t.bind,arguments)}function II(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function ft(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ft=_I:ft=II,ft.apply(null,arguments)}function Sa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Je(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Cr(){this.s=this.s,this.o=this.o}var CI=0;Cr.prototype.s=!1;Cr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),CI!=0)};Cr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kf(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function rg(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(du(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var TI=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{X.addEventListener("test",()=>{},e),X.removeEventListener("test",()=>{},e)}catch{}return t}();function co(t){return/^[\s\xa0]*$/.test(t)}function fu(){var t=X.navigator;return t&&(t=t.userAgent)?t:""}function pn(t){return fu().indexOf(t)!=-1}function xf(t){return xf[" "](t),t}xf[" "]=function(){};function DI(t,e){var n=xC;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var AI=pn("Opera"),Hs=pn("Trident")||pn("MSIE"),sE=pn("Edge"),Fd=sE||Hs,iE=pn("Gecko")&&!(fu().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),bI=fu().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge");function oE(){var t=X.document;return t?t.documentMode:void 0}var Ud;e:{var _c="",Ic=function(){var t=fu();if(iE)return/rv:([^\);]+)(\)|;)/.exec(t);if(sE)return/Edge\/([\d\.]+)/.exec(t);if(Hs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(bI)return/WebKit\/(\S+)/.exec(t);if(AI)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ic&&(_c=Ic?Ic[1]:""),Hs){var Cc=oE();if(Cc!=null&&Cc>parseFloat(_c)){Ud=String(Cc);break e}}Ud=_c}var Vd;if(X.document&&Hs){var sg=oE();Vd=sg||parseInt(Ud,10)||void 0}else Vd=void 0;var RI=Vd;function ho(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(iE){e:{try{xf(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:PI[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ho.$.h.call(this)}}Je(ho,mt);var PI={2:"touch",3:"pen",4:"mouse"};ho.prototype.h=function(){ho.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mu="closure_listenable_"+(1e6*Math.random()|0),MI=0;function $I(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++MI,this.fa=this.ia=!1}function pu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Sf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function OI(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function aE(t){const e={};for(const n in t)e[n]=t[n];return e}const ig="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lE(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<ig.length;i++)n=ig[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gu(t){this.src=t,this.g={},this.h=0}gu.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=jd(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new $I(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function zd(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=rE(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(pu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function jd(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Nf="closure_lm_"+(1e6*Math.random()|0),Tc={};function uE(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)uE(t,e[i],n,r,s);return null}return n=hE(n),t&&t[mu]?t.O(e,n,hu(r)?!!r.capture:!1,s):LI(t,e,n,!1,r,s)}function LI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=hu(s)?!!s.capture:!!s,a=If(t);if(a||(t[Nf]=a=new gu(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=FI(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)TI||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(dE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function FI(){function t(n){return e.call(t.src,t.listener,n)}const e=UI;return t}function cE(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)cE(t,e[i],n,r,s);else r=hu(r)?!!r.capture:!!r,n=hE(n),t&&t[mu]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=jd(i,n,r,s),-1<n&&(pu(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=If(t))&&(e=t.g[e.toString()],t=-1,e&&(t=jd(e,n,r,s)),(n=-1<t?e[t]:null)&&_f(n))}function _f(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[mu])zd(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=If(e))?(zd(n,t),n.h==0&&(n.src=null,e[Nf]=null)):pu(t)}}}function dE(t){return t in Tc?Tc[t]:Tc[t]="on"+t}function UI(t,e){if(t.fa)t=!0;else{e=new ho(e,this);var n=t.listener,r=t.la||t.src;t.ia&&_f(t),t=n.call(r,e)}return t}function If(t){return t=t[Nf],t instanceof gu?t:null}var Dc="__closure_events_fn_"+(1e9*Math.random()>>>0);function hE(t){return typeof t=="function"?t:(t[Dc]||(t[Dc]=function(e){return t.handleEvent(e)}),t[Dc])}function Xe(){Cr.call(this),this.i=new gu(this),this.S=this,this.J=null}Je(Xe,Cr);Xe.prototype[mu]=!0;Xe.prototype.removeEventListener=function(t,e,n,r){cE(this,t,e,n,r)};function rt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new mt(e,t);else if(e instanceof mt)e.target=e.target||t;else{var s=e;e=new mt(r,t),lE(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Na(o,r,!0,e)&&s}if(o=e.g=t,s=Na(o,r,!0,e)&&s,s=Na(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Na(o,r,!1,e)&&s}Xe.prototype.N=function(){if(Xe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pu(n[r]);delete t.g[e],t.h--}}this.J=null};Xe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Xe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Na(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&zd(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Cf=X.JSON.stringify;class VI{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function zI(){var t=Tf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jI{constructor(){this.h=this.g=null}add(e,n){const r=fE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var fE=new VI(()=>new BI,t=>t.reset());class BI{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qI(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function HI(t){X.setTimeout(()=>{throw t},0)}let fo,mo=!1,Tf=new jI,mE=()=>{const t=X.Promise.resolve(void 0);fo=()=>{t.then(KI)}};var KI=()=>{for(var t;t=zI();){try{t.h.call(t.g)}catch(n){HI(n)}var e=fE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}mo=!1};function yu(t,e){Xe.call(this),this.h=t||1,this.g=e||X,this.j=ft(this.qb,this),this.l=Date.now()}Je(yu,Xe);V=yu.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rt(this,"tick"),this.ga&&(Df(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Df(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){yu.$.N.call(this),Df(this),delete this.g};function Af(t,e,n){if(typeof t=="function")n&&(t=ft(t,n));else if(t&&typeof t.handleEvent=="function")t=ft(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:X.setTimeout(t,e||0)}function pE(t){t.g=Af(()=>{t.g=null,t.i&&(t.i=!1,pE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class WI extends Cr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pE(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(t){Cr.call(this),this.h=t,this.g={}}Je(po,Cr);var og=[];function gE(t,e,n,r){Array.isArray(n)||(n&&(og[0]=n.toString()),n=og);for(var s=0;s<n.length;s++){var i=uE(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yE(t){Sf(t.g,function(e,n){this.g.hasOwnProperty(n)&&_f(e)},t),t.g={}}po.prototype.N=function(){po.$.N.call(this),yE(this)};po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vu(){this.g=!0}vu.prototype.Ea=function(){this.g=!1};function GI(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function QI(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+XI(t,n)+(r?" "+r:"")})}function YI(t,e){t.info(function(){return"TIMEOUT: "+e})}vu.prototype.info=function(){};function XI(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Cf(n)}catch{return e}}var ns={},ag=null;function Eu(){return ag=ag||new Xe}ns.Ta="serverreachability";function vE(t){mt.call(this,ns.Ta,t)}Je(vE,mt);function go(t){const e=Eu();rt(e,new vE(e))}ns.STAT_EVENT="statevent";function EE(t,e){mt.call(this,ns.STAT_EVENT,t),this.stat=e}Je(EE,mt);function kt(t){const e=Eu();rt(e,new EE(e,t))}ns.Ua="timingevent";function wE(t,e){mt.call(this,ns.Ua,t),this.size=e}Je(wE,mt);function Lo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){t()},e)}var wu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bf(){}bf.prototype.h=null;function lg(t){return t.h||(t.h=t.i())}function xE(){}var Fo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rf(){mt.call(this,"d")}Je(Rf,mt);function Pf(){mt.call(this,"c")}Je(Pf,mt);var Bd;function ku(){}Je(ku,bf);ku.prototype.g=function(){return new XMLHttpRequest};ku.prototype.i=function(){return{}};Bd=new ku;function Uo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new po(this),this.P=JI,t=Fd?125:void 0,this.V=new yu(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SE}function SE(){this.i=null,this.g="",this.h=!1}var JI=45e3,qd={},Al={};V=Uo.prototype;V.setTimeout=function(t){this.P=t};function Hd(t,e,n){t.L=1,t.v=Su(Fn(e)),t.s=n,t.S=!0,NE(t,null)}function NE(t,e){t.G=Date.now(),Vo(t),t.A=Fn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),RE(n.i,"t",r),t.C=0,n=t.l.J,t.h=new SE,t.g=ZE(t.l,n?e:null,!t.s),0<t.O&&(t.M=new WI(ft(t.Pa,t,t.g),t.O)),gE(t.U,t.g,"readystatechange",t.nb),e=t.I?aE(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),go(),GI(t.j,t.u,t.A,t.m,t.W,t.s)}V.nb=function(t){t=t.target;const e=this.M;e&&gn(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const d=gn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||Fd||this.g&&(this.h.h||this.g.ja()||hg(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?go(3):go(2)),xu(this);var n=this.g.da();this.ca=n;t:if(_E(this)){var r=hg(this.g);t="";var s=r.length,i=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),Ui(this);var o="";break t}this.h.i=new X.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,QI(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!co(a)){var c=a;break t}}c=null}if(n=c)Ns(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kd(this,n);else{this.i=!1,this.o=3,kt(12),Or(this),Ui(this);break e}}this.S?(IE(this,d,o),Fd&&this.i&&d==3&&(gE(this.U,this.V,"tick",this.mb),this.V.start())):(Ns(this.j,this.m,o,null),Kd(this,o)),d==4&&Or(this),this.i&&!this.J&&(d==4?QE(this.l,this):(this.i=!1,Vo(this)))}else EC(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,kt(12)):(this.o=0,kt(13)),Or(this),Ui(this)}}}catch{}finally{}};function _E(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function IE(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=ZI(t,n),s==Al){e==4&&(t.o=4,kt(14),r=!1),Ns(t.j,t.m,null,"[Incomplete Response]");break}else if(s==qd){t.o=4,kt(15),Ns(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ns(t.j,t.m,s,null),Kd(t,s);_E(t)&&s!=Al&&s!=qd&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,kt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uf(e),e.M=!0,kt(11))):(Ns(t.j,t.m,n,"[Invalid Chunked Response]"),Or(t),Ui(t))}V.mb=function(){if(this.g){var t=gn(this.g),e=this.g.ja();this.C<e.length&&(xu(this),IE(this,t,e),this.i&&t!=4&&Vo(this))}};function ZI(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Al:(n=Number(e.substring(n,r)),isNaN(n)?qd:(r+=1,r+n>e.length?Al:(e=e.slice(r,r+n),t.C=r+n,e)))}V.cancel=function(){this.J=!0,Or(this)};function Vo(t){t.Y=Date.now()+t.P,CE(t,t.P)}function CE(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Lo(ft(t.lb,t),e)}function xu(t){t.B&&(X.clearTimeout(t.B),t.B=null)}V.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(YI(this.j,this.A),this.L!=2&&(go(),kt(17)),Or(this),this.o=2,Ui(this)):CE(this,this.Y-t)};function Ui(t){t.l.H==0||t.J||QE(t.l,t)}function Or(t){xu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Df(t.V),yE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Kd(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Wd(n.i,t))){if(!t.K&&Wd(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Pl(n),Iu(n);else break e;Ff(n),kt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Lo(ft(n.ib,n),6e3));if(1>=$E(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Lr(n,11)}else if((t.K||n.g==t)&&Pl(n),!co(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var i=r.i;i.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Mf(i,i.h),i.h=null))}if(r.F){const E=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,_e(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=JE(r,r.J?r.pa:null,r.Y),o.K){OE(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(xu(a),Vo(a)),r.g=o}else WE(r);0<n.j.length&&Cu(n)}else c[0]!="stop"&&c[0]!="close"||Lr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Lr(n,7):Lf(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}go(4)}catch{}}function eC(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(du(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function tC(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(du(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function TE(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(du(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=tC(t),r=eC(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var DE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nC(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function jr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof jr){this.h=t.h,bl(this,t.j),this.s=t.s,this.g=t.g,Rl(this,t.m),this.l=t.l;var e=t.i,n=new yo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ug(this,n),this.o=t.o}else t&&(e=String(t).match(DE))?(this.h=!1,bl(this,e[1]||"",!0),this.s=Ni(e[2]||""),this.g=Ni(e[3]||"",!0),Rl(this,e[4]),this.l=Ni(e[5]||"",!0),ug(this,e[6]||"",!0),this.o=Ni(e[7]||"")):(this.h=!1,this.i=new yo(null,this.h))}jr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_i(e,cg,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(_i(e,cg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(_i(n,n.charAt(0)=="/"?iC:sC,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",_i(n,aC)),t.join("")};function Fn(t){return new jr(t)}function bl(t,e,n){t.j=n?Ni(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ug(t,e,n){e instanceof yo?(t.i=e,lC(t.i,t.h)):(n||(e=_i(e,oC)),t.i=new yo(e,t.h))}function _e(t,e,n){t.i.set(e,n)}function Su(t){return _e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _i(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,rC),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rC(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var cg=/[#\/\?@]/g,sC=/[#\?:]/g,iC=/[#\?]/g,oC=/[#\?@]/g,aC=/#/g;function yo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Tr(t){t.g||(t.g=new Map,t.h=0,t.i&&nC(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=yo.prototype;V.add=function(t,e){Tr(this),this.i=null,t=si(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function AE(t,e){Tr(t),e=si(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function bE(t,e){return Tr(t),e=si(t,e),t.g.has(e)}V.forEach=function(t,e){Tr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};V.ta=function(){Tr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};V.Z=function(t){Tr(this);let e=[];if(typeof t=="string")bE(this,t)&&(e=e.concat(this.g.get(si(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Tr(this),this.i=null,t=si(this,t),bE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function RE(t,e,n){AE(t,e),0<n.length&&(t.i=null,t.g.set(si(t,e),kf(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function si(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function lC(t,e){e&&!t.j&&(Tr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(AE(this,r),RE(this,s,n))},t)),t.j=e}var uC=class{constructor(t,e){this.g=t,this.map=e}};function PE(t){this.l=t||cC,X.PerformanceNavigationTiming?(t=X.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cC=10;function ME(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function $E(t){return t.h?1:t.g?t.g.size:0}function Wd(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Mf(t,e){t.g?t.g.add(e):t.h=e}function OE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}PE.prototype.cancel=function(){if(this.i=LE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function LE(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kf(t.i)}var dC=class{stringify(t){return X.JSON.stringify(t,void 0)}parse(t){return X.JSON.parse(t,void 0)}};function hC(){this.g=new dC}function fC(t,e,n){const r=n||"";try{TE(t,function(s,i){let o=s;hu(s)&&(o=Cf(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function mC(t,e){const n=new vu;if(X.Image){const r=new Image;r.onload=Sa(_a,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Sa(_a,n,r,"TestLoadImage: error",!1,e),r.onabort=Sa(_a,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sa(_a,n,r,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function _a(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function zo(t){this.l=t.fc||null,this.j=t.ob||!1}Je(zo,bf);zo.prototype.g=function(){return new Nu(this.l,this.j)};zo.prototype.i=function(t){return function(){return t}}({});function Nu(t,e){Xe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=$f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Je(Nu,Xe);var $f=0;V=Nu.prototype;V.open=function(t,e){if(this.readyState!=$f)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vo(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=$f};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FE(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function FE(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?jo(this):vo(this),this.readyState==3&&FE(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,jo(this))};V.Ya=function(t){this.g&&(this.response=t,jo(this))};V.ka=function(){this.g&&jo(this)};function jo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vo(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function vo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Nu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var pC=X.JSON.parse;function Ue(t){Xe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UE,this.L=this.M=!1}Je(Ue,Xe);var UE="",gC=/^https?$/i,yC=["POST","PUT"];V=Ue.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bd.g(),this.C=this.u?lg(this.u):lg(Bd),this.g.onreadystatechange=ft(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){dg(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=X.FormData&&t instanceof X.FormData,!(0<=rE(yC,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jE(this),0<this.B&&((this.L=vC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ft(this.ua,this)):this.A=Af(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){dg(this,i)}};function vC(t){return Hs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof wf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rt(this,"timeout"),this.abort(8))};function dg(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VE(t),_u(t)}function VE(t){t.F||(t.F=!0,rt(t,"complete"),rt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,rt(this,"complete"),rt(this,"abort"),_u(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_u(this,!0)),Ue.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?zE(this):this.kb())};V.kb=function(){zE(this)};function zE(t){if(t.h&&typeof wf<"u"&&(!t.C[1]||gn(t)!=4||t.da()!=2)){if(t.v&&gn(t)==4)Af(t.La,0,t);else if(rt(t,"readystatechange"),gn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(DE)[1]||null;!s&&X.self&&X.self.location&&(s=X.self.location.protocol.slice(0,-1)),r=!gC.test(s?s.toLowerCase():"")}n=r}if(n)rt(t,"complete"),rt(t,"success");else{t.m=6;try{var i=2<gn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",VE(t)}}finally{_u(t)}}}}function _u(t,e){if(t.g){jE(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||rt(t,"ready");try{n.onreadystatechange=r}catch{}}}function jE(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(X.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function gn(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),pC(e)}};function hg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case UE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function EC(t){const e={};t=(t.g&&2<=gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(co(t[r]))continue;var n=qI(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}OI(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function BE(t){let e="";return Sf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Of(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=BE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):_e(t,e,n))}function vi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qE(t){this.Ga=0,this.j=[],this.l=new vu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vi("baseRetryDelayMs",5e3,t),this.hb=vi("retryDelaySeedMs",1e4,t),this.eb=vi("forwardChannelMaxRetries",2,t),this.xa=vi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new PE(t&&t.concurrentRequestLimit),this.Ja=new hC,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=qE.prototype;V.ra=8;V.H=1;function Lf(t){if(HE(t),t.H==3){var e=t.W++,n=Fn(t.I);if(_e(n,"SID",t.K),_e(n,"RID",e),_e(n,"TYPE","terminate"),Bo(t,n),e=new Uo(t,t.l,e),e.L=2,e.v=Su(Fn(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&X.Image&&(new Image().src=e.v,n=!0),n||(e.g=ZE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Vo(e)}XE(t)}function Iu(t){t.g&&(Uf(t),t.g.cancel(),t.g=null)}function HE(t){Iu(t),t.u&&(X.clearTimeout(t.u),t.u=null),Pl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&X.clearTimeout(t.m),t.m=null)}function Cu(t){if(!ME(t.i)&&!t.m){t.m=!0;var e=t.Na;fo||mE(),mo||(fo(),mo=!0),Tf.add(e,t),t.C=0}}function wC(t,e){return $E(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Lo(ft(t.Na,t,e),YE(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Uo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=aE(i),lE(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=KE(this,s,e),n=Fn(this.I),_e(n,"RID",t),_e(n,"CVER",22),this.F&&_e(n,"X-HTTP-Session-Id",this.F),Bo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(BE(i)))+"&"+e:this.o&&Of(n,this.o,i)),Mf(this.i,s),this.bb&&_e(n,"TYPE","init"),this.P?(_e(n,"$req",e),_e(n,"SID","null"),s.aa=!0,Hd(s,n,null)):Hd(s,n,e),this.H=2}}else this.H==3&&(t?fg(this,t):this.j.length==0||ME(this.i)||fg(this))};function fg(t,e){var n;e?n=e.m:n=t.W++;const r=Fn(t.I);_e(r,"SID",t.K),_e(r,"RID",n),_e(r,"AID",t.V),Bo(t,r),t.o&&t.s&&Of(r,t.o,t.s),n=new Uo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=KE(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Mf(t.i,n),Hd(n,r,e)}function Bo(t,e){t.na&&Sf(t.na,function(n,r){_e(e,r,n)}),t.h&&TE({},function(n,r){_e(e,r,n)})}function KE(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ft(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{fC(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function WE(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;fo||mE(),mo||(fo(),mo=!0),Tf.add(e,t),t.A=0}}function Ff(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Lo(ft(t.Ma,t),YE(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,GE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Lo(ft(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),Iu(this),GE(this))};function Uf(t){t.B!=null&&(X.clearTimeout(t.B),t.B=null)}function GE(t){t.g=new Uo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Fn(t.wa);_e(e,"RID","rpc"),_e(e,"SID",t.K),_e(e,"AID",t.V),_e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&_e(e,"TO",t.qa),_e(e,"TYPE","xmlhttp"),Bo(t,e),t.o&&t.s&&Of(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Su(Fn(e)),n.s=null,n.S=!0,NE(n,t)}V.ib=function(){this.v!=null&&(this.v=null,Iu(this),Ff(this),kt(19))};function Pl(t){t.v!=null&&(X.clearTimeout(t.v),t.v=null)}function QE(t,e){var n=null;if(t.g==e){Pl(t),Uf(t),t.g=null;var r=2}else if(Wd(t.i,e))n=e.F,OE(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Eu(),rt(r,new wE(r,n)),Cu(t)}else WE(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&wC(t,e)||r==2&&Ff(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Lr(t,5);break;case 4:Lr(t,10);break;case 3:Lr(t,6);break;default:Lr(t,2)}}}function YE(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Lr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ft(t.pb,t);n||(n=new jr("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||bl(n,"https"),Su(n)),mC(n.toString(),r)}else kt(2);t.H=0,t.h&&t.h.za(e),XE(t),HE(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))};function XE(t){if(t.H=0,t.ma=[],t.h){const e=LE(t.i);(e.length!=0||t.j.length!=0)&&(rg(t.ma,e),rg(t.ma,t.j),t.i.i.length=0,kf(t.j),t.j.length=0),t.h.ya()}}function JE(t,e,n){var r=n instanceof jr?Fn(n):new jr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Rl(r,r.m);else{var s=X.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new jr(null);r&&bl(i,r),e&&(i.g=e),s&&Rl(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&_e(r,n,e),_e(r,"VER",t.ra),Bo(t,r),r}function ZE(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ue(new zo({ob:!0})):new Ue(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function ew(){}V=ew.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Ml(){if(Hs&&!(10<=Number(RI)))throw Error("Environmental error: no available transport.")}Ml.prototype.g=function(t,e){return new Vt(t,e)};function Vt(t,e){Xe.call(this),this.g=new qE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!co(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!co(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ii(this)}Je(Vt,Xe);Vt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;kt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JE(t,null,t.Y),Cu(t)};Vt.prototype.close=function(){Lf(this.g)};Vt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Cf(t),t=n);e.j.push(new uC(e.fb++,t)),e.H==3&&Cu(e)};Vt.prototype.N=function(){this.g.h=null,delete this.j,Lf(this.g),delete this.g,Vt.$.N.call(this)};function tw(t){Rf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Je(tw,Rf);function nw(){Pf.call(this),this.status=1}Je(nw,Pf);function ii(t){this.g=t}Je(ii,ew);ii.prototype.Ba=function(){rt(this.g,"a")};ii.prototype.Aa=function(t){rt(this.g,new tw(t))};ii.prototype.za=function(t){rt(this.g,new nw)};ii.prototype.ya=function(){rt(this.g,"b")};function kC(){this.blockSize=-1}function an(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Je(an,kC);an.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ac(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}an.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Ac(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Ac(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Ac(this,r),s=0;break}}this.h=s,this.i+=e};an.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function we(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var xC={};function Vf(t){return-128<=t&&128>t?DI(t,function(e){return new we([e|0],0>e?-1:0)}):new we([t|0],0>t?-1:0)}function yn(t){if(isNaN(t)||!isFinite(t))return Ps;if(0>t)return tt(yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Gd;return new we(e,0)}function rw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return tt(rw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=yn(Math.pow(e,8)),r=Ps,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=yn(Math.pow(e,i)),r=r.R(i).add(yn(o))):(r=r.R(n),r=r.add(yn(o)))}return r}var Gd=4294967296,Ps=Vf(0),Qd=Vf(1),mg=Vf(16777216);V=we.prototype;V.ea=function(){if(Kt(this))return-tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Gd+r)*e,e*=Gd}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(An(this))return"0";if(Kt(this))return"-"+tt(this).toString(t);for(var e=yn(Math.pow(t,6)),n=this,r="";;){var s=Ol(n,e).g;n=$l(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,An(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function An(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Kt(t){return t.h==-1}V.X=function(t){return t=$l(this,t),Kt(t)?-1:An(t)?0:1};function tt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new we(n,~t.h).add(Qd)}V.abs=function(){return Kt(this)?tt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new we(n,n[n.length-1]&-2147483648?-1:0)};function $l(t,e){return t.add(tt(e))}V.R=function(t){if(An(this)||An(t))return Ps;if(Kt(this))return Kt(t)?tt(this).R(tt(t)):tt(tt(this).R(t));if(Kt(t))return tt(this.R(tt(t)));if(0>this.X(mg)&&0>t.X(mg))return yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Ia(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Ia(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ia(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ia(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new we(n,0)};function Ia(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ei(t,e){this.g=t,this.h=e}function Ol(t,e){if(An(e))throw Error("division by zero");if(An(t))return new Ei(Ps,Ps);if(Kt(t))return e=Ol(tt(t),e),new Ei(tt(e.g),tt(e.h));if(Kt(e))return e=Ol(t,tt(e)),new Ei(tt(e.g),e.h);if(30<t.g.length){if(Kt(t)||Kt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Qd,r=e;0>=r.X(t);)n=pg(n),r=pg(r);var s=ls(n,1),i=ls(r,1);for(r=ls(r,2),n=ls(n,2);!An(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=ls(r,1),n=ls(n,1)}return e=$l(t,s.R(e)),new Ei(s,e)}for(s=Ps;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=yn(n),o=i.R(e);Kt(o)||0<o.X(t);)n-=r,i=yn(n),o=i.R(e);An(i)&&(i=Qd),s=s.add(i),t=$l(t,o)}return new Ei(s,t)}V.gb=function(t){return Ol(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new we(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new we(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new we(n,this.h^t.h)};function pg(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new we(n,t.h)}function ls(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new we(s,t.h)}Ml.prototype.createWebChannel=Ml.prototype.g;Vt.prototype.send=Vt.prototype.u;Vt.prototype.open=Vt.prototype.m;Vt.prototype.close=Vt.prototype.close;wu.NO_ERROR=0;wu.TIMEOUT=8;wu.HTTP_ERROR=6;kE.COMPLETE="complete";xE.EventType=Fo;Fo.OPEN="a";Fo.CLOSE="b";Fo.ERROR="c";Fo.MESSAGE="d";Xe.prototype.listen=Xe.prototype.O;Ue.prototype.listenOnce=Ue.prototype.P;Ue.prototype.getLastError=Ue.prototype.Sa;Ue.prototype.getLastErrorCode=Ue.prototype.Ia;Ue.prototype.getStatus=Ue.prototype.da;Ue.prototype.getResponseJson=Ue.prototype.Wa;Ue.prototype.getResponseText=Ue.prototype.ja;Ue.prototype.send=Ue.prototype.ha;Ue.prototype.setWithCredentials=Ue.prototype.Oa;an.prototype.digest=an.prototype.l;an.prototype.reset=an.prototype.reset;an.prototype.update=an.prototype.j;we.prototype.add=we.prototype.add;we.prototype.multiply=we.prototype.R;we.prototype.modulo=we.prototype.gb;we.prototype.compare=we.prototype.X;we.prototype.toNumber=we.prototype.ea;we.prototype.toString=we.prototype.toString;we.prototype.getBits=we.prototype.D;we.fromNumber=yn;we.fromString=rw;var SC=function(){return new Ml},NC=function(){return Eu()},bc=wu,_C=kE,IC=ns,gg={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},CC=zo,Ca=xE,TC=Ue,DC=an,Ms=we;const yg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new uf("@firebase/firestore");function vg(){return wr.logLevel}function AC(t){wr.setLogLevel(t)}function W(t,...e){if(wr.logLevel<=pe.DEBUG){const n=e.map(zf);wr.debug(`Firestore (${oi}): ${t}`,...n)}}function Un(t,...e){if(wr.logLevel<=pe.ERROR){const n=e.map(zf);wr.error(`Firestore (${oi}): ${t}`,...n)}}function Ks(t,...e){if(wr.logLevel<=pe.WARN){const n=e.map(zf);wr.warn(`Firestore (${oi}): ${t}`,...n)}}function zf(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function Te(t,e){t||Y()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class RC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PC{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new sw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new ut(e)}}class MC{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $C{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new MC(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LC{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.T=n.token,new OC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=FC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Ws(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new ye(0,0))}static max(){return new ee(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Eo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Eo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends Eo{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const UC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Eo{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return UC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new B(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new B(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ie.fromString(e))}static fromName(e){return new G(Ie.fromString(e).popFirst(5))}static empty(){return new G(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ie(e.slice()))}}function VC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new kr(s,G.empty(),e)}function zC(t){return new kr(t.readTime,t.key,-1)}class kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kr(ee.min(),G.empty(),-1)}static max(){return new kr(ee.max(),G.empty(),-1)}}function jC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==BC)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}jf.ct=-1;function Tu(t){return t==null}function Ll(t){return t===0&&1/t==-1/0}function HC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ll(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ow(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ta(this.root,e,this.comparator,!0)}}class Ta{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,n,r,s){return this}insert(t,e,n){return new et(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new $t([])}unionWith(e){let n=new pt(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aw("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const KC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=KC.exec(t);if(Te(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qf(t){const e=t.mapValue.fields.__previous_value__;return Bf(e)?qf(e):e}function wo(t){const e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ko{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da={mapValue:{}};function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bf(t)?4:GC(t)?9007199254740991:10:Y()}function Sn(t,e){if(t===e)return!0;const n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wo(t).isEqual(wo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=xr(r.timestampValue),o=xr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Xr(r.bytesValue).isEqual(Xr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return je(r.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(r.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return je(r.integerValue)===je(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=je(r.doubleValue),o=je(s.doubleValue);return i===o?Ll(i)===Ll(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ws(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Eg(i)!==Eg(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Sn(i[a],o[a])))return!1;return!0}(t,e);default:return Y()}}function xo(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=Jr(t),r=Jr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=je(s.integerValue||s.doubleValue),a=je(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return kg(t.timestampValue,e.timestampValue);case 4:return kg(wo(t),wo(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Xr(s),a=Xr(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ge(o[l],a[l]);if(c!==0)return c}return ge(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ge(je(s.latitude),je(i.latitude));return o!==0?o:ge(je(s.longitude),je(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Gs(o[l],a[l]);if(c)return c}return ge(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Da.mapValue&&i===Da.mapValue)return 0;if(s===Da.mapValue)return 1;if(i===Da.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let d=0;d<a.length&&d<c.length;++d){const h=ge(a[d],c[d]);if(h!==0)return h;const f=Gs(o[a[d]],l[c[d]]);if(f!==0)return f}return ge(a.length,c.length)}(t.mapValue,e.mapValue);default:throw Y()}}function kg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=xr(t),r=xr(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function Qs(t){return Yd(t)}function Yd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=xr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,G.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Yd(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Yd(r.fields[a])}`;return i+"}"}(t.mapValue):Y();var e,n}function xg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xd(t){return!!t&&"integerValue"in t}function Hf(t){return!!t&&"arrayValue"in t}function Sg(t){return!!t&&"nullValue"in t}function Ng(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ga(t){return!!t&&"mapValue"in t}function Vi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ga(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(n)}setAll(e){let n=ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Vi(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ga(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ga(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){rs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tt(Vi(this.value))}}function lw(t){const e=[];return rs(t.fields,(n,r)=>{const s=new ht([n]);if(Ga(r)){const i=lw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ee.min(),ee.min(),ee.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,ee.min(),ee.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ee.min(),ee.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.position=e,this.inclusive=n}}function _g(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Gs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ig(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n="asc"){this.field=e,this.dir=n}}function QC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{}class qe extends uw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XC(e,n,r):n==="array-contains"?new eT(e,r):n==="in"?new tT(e,r):n==="not-in"?new nT(e,r):n==="array-contains-any"?new rT(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JC(e,r):new ZC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gs(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ln extends uw{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new ln(e,n)}matches(e){return cw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function cw(t){return t.op==="and"}function dw(t){return YC(t)&&cw(t)}function YC(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function Jd(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(dw(t))return t.filters.map(e=>Jd(e)).join(",");{const e=t.filters.map(n=>Jd(n)).join(",");return`${t.op}(${e})`}}function hw(t,e){return t instanceof qe?function(n,r){return r instanceof qe&&n.op===r.op&&n.field.isEqual(r.field)&&Sn(n.value,r.value)}(t,e):t instanceof ln?function(n,r){return r instanceof ln&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&hw(i,r.filters[o]),!0):!1}(t,e):void Y()}function fw(t){return t instanceof qe?function(e){return`${e.field.canonicalString()} ${e.op} ${Qs(e.value)}`}(t):t instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(fw).join(" ,")+"}"}(t):"Filter"}class XC extends qe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class JC extends qe{constructor(e,n){super(e,"in",n),this.keys=mw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZC extends qe{constructor(e,n){super(e,"not-in",n),this.keys=mw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class eT extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hf(n)&&xo(n.arrayValue,this.value)}}class tT extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class nT extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xo(this.value.arrayValue,n)}}class rT extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function Cg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new sT(t,e,n,r,s,i,o)}function Kf(t){const e=ne(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.dt=n}return e.dt}function Wf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ig(t.startAt,e.startAt)&&Ig(t.endAt,e.endAt)}function Zd(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function iT(t,e,n,r,s,i,o,a){return new Ko(t,e,n,r,s,i,o,a)}function Gf(t){return new Ko(t)}function Tg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Qf(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function gw(t){return t.collectionGroup!==null}function $s(t){const e=ne(t);if(e.wt===null){e.wt=[];const n=Qf(e),r=pw(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new zi(n)),e.wt.push(new zi(ht.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zi(ht.keyField(),i))}}}return e.wt}function Vn(t){const e=ne(t);if(!e._t)if(e.limitType==="F")e._t=Cg(e.path,e.collectionGroup,$s(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of $s(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new zi(i.field,o))}const r=e.endAt?new Fl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Fl(e.startAt.position,e.startAt.inclusive):null;e._t=Cg(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function eh(t,e){e.getFirstInequalityField(),Qf(t);const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function th(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Du(t,e){return Wf(Vn(t),Vn(e))&&t.limitType===e.limitType}function yw(t){return`${Kf(Vn(t))}|lt:${t.limitType}`}function nh(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>fw(r)).join(", ")}]`),Tu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),`Target(${n})`}(Vn(t))}; limitType=${t.limitType})`}function Au(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):G.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of $s(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=_g(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,$s(n),r)||n.endAt&&!function(s,i,o){const a=_g(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,$s(n),r))}(t,e)}function oT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vw(t){return(e,n)=>{let r=!1;for(const s of $s(t)){const i=aT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aT(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Gs(a,l):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=new Oe(G.comparator);function zn(){return lT}const Ew=new Oe(G.comparator);function Ii(...t){let e=Ew;for(const n of t)e=e.insert(n.key,n);return e}function ww(t){let e=Ew;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fr(){return ji()}function kw(){return ji()}function ji(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const uT=new Oe(G.comparator),cT=new pt(G.comparator);function ce(...t){let e=cT;for(const n of t)e=e.add(n);return e}const dT=new pt(ge);function hT(){return dT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function Sw(t){return{integerValue:""+t}}function fT(t,e){return HC(e)?Sw(e):xw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this._=void 0}}function mT(t,e,n){return t instanceof Ul?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Bf(s)&&(s=qf(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof So?_w(t,e):t instanceof No?Iw(t,e):function(r,s){const i=Nw(r,s),o=Dg(i)+Dg(r.gt);return Xd(i)&&Xd(r.gt)?Sw(o):xw(r.serializer,o)}(t,e)}function pT(t,e,n){return t instanceof So?_w(t,e):t instanceof No?Iw(t,e):n}function Nw(t,e){return t instanceof Vl?Xd(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Ul extends bu{}class So extends bu{constructor(e){super(),this.elements=e}}function _w(t,e){const n=Cw(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class No extends bu{constructor(e){super(),this.elements=e}}function Iw(t,e){let n=Cw(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class Vl extends bu{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Dg(t){return je(t.integerValue||t.doubleValue)}function Cw(t){return Hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gT(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof So&&r instanceof So||n instanceof No&&r instanceof No?Ws(n.elements,r.elements,Sn):n instanceof Vl&&r instanceof Vl?Sn(n.gt,r.gt):n instanceof Ul&&r instanceof Ul}(t.transform,e.transform)}class yT{constructor(e,n){this.version=e,this.transformResults=n}}class St{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new St}static exists(e){return new St(void 0,e)}static updateTime(e){return new St(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ru{}function Tw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pu(t.key,St.none()):new Wo(t.key,t.data,St.none());{const n=t.data,r=Tt.empty();let s=new pt(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dr(t.key,r,new $t(s.toArray()),St.none())}}function vT(t,e,n){t instanceof Wo?function(r,s,i){const o=r.value.clone(),a=bg(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(r,s,i){if(!Qa(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=bg(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(Dw(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Bi(t,e,n,r){return t instanceof Wo?function(s,i,o,a){if(!Qa(s.precondition,i))return o;const l=s.value.clone(),c=Rg(s.fieldTransforms,a,i);return l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(s,i,o,a){if(!Qa(s.precondition,i))return o;const l=Rg(s.fieldTransforms,a,i),c=i.data;return c.setAll(Dw(s)),c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,i,o){return Qa(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function ET(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Nw(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function Ag(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ws(n,r,(s,i)=>gT(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wo extends Ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bg(t,e,n){const r=new Map;Te(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,pT(o,a,n[s]))}return r}function Rg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mT(i,o,e))}return r}class Pu extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wT extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Tw(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(n,r)=>Ag(n,r))&&Ws(this.baseMutations,e.baseMutations,(n,r)=>Ag(n,r))}}class Yf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length);let s=uT;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Yf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,de;function NT(t){switch(t){default:return Y();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function Aw(t){if(t===void 0)return Un("GRPC error has no .code"),C.UNKNOWN;switch(t){case ze.OK:return C.OK;case ze.CANCELLED:return C.CANCELLED;case ze.UNKNOWN:return C.UNKNOWN;case ze.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case ze.INTERNAL:return C.INTERNAL;case ze.UNAVAILABLE:return C.UNAVAILABLE;case ze.UNAUTHENTICATED:return C.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case ze.NOT_FOUND:return C.NOT_FOUND;case ze.ALREADY_EXISTS:return C.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return C.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case ze.ABORTED:return C.ABORTED;case ze.OUT_OF_RANGE:return C.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return C.UNIMPLEMENTED;case ze.DATA_LOSS:return C.DATA_LOSS;default:return Y()}}(de=ze||(ze={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Aa}static getOrCreateInstance(){return Aa===null&&(Aa=new Xf),Aa}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Aa=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Ms([4294967295,4294967295],0);function Pg(t){const e=_T().encode(t),n=new DC;return n.update(e),new Uint8Array(n.digest())}function Mg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ms([n,r],0),new Ms([s,i],0)]}class Jf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ci(`Invalid padding: ${n}`);if(r<0)throw new Ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ms.fromNumber(this.It)}Et(e,n,r){let s=e.add(n.multiply(Ms.fromNumber(r)));return s.compare(IT)===1&&(s=new Ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Pg(e),[r,s]=Mg(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);if(!this.At(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Jf(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Pg(e),[r,s]=Mg(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Go.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mu(ee.min(),s,new Oe(ge),zn(),ce())}}class Go{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Go(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r,s){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=s}}class bw{constructor(e,n){this.targetId=e,this.Vt=n}}class Rw{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $g{constructor(){this.St=0,this.Dt=Lg(),this.Ct=vt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ce(),n=ce(),r=ce();return this.Dt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Go(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Lg()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class CT{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=zn(),this.zt=Og(),this.Wt=new Oe(ge)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,s)=>{this.te(s)&&n(s)})}ne(e){var n;const r=e.targetId,s=e.Vt.count,i=this.se(r);if(i){const o=i.target;if(Zd(o))if(s===0){const a=new G(o.path);this.Yt(r,a,dt.newNoDocument(a,ee.min()))}else Te(s===1);else{const a=this.ie(r);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,c)}(n=Xf.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,d,h){var f,v,w,E,x,m;const g={localCacheCount:d,existenceFilterCount:h.count},y=h.unchangedNames;return y&&(g.bloomFilter={applied:c===0,hashCount:(f=y==null?void 0:y.hashCount)!==null&&f!==void 0?f:0,bitmapLength:(E=(w=(v=y==null?void 0:y.bits)===null||v===void 0?void 0:v.bitmap)===null||w===void 0?void 0:w.length)!==null&&E!==void 0?E:0,padding:(m=(x=y==null?void 0:y.bits)===null||x===void 0?void 0:x.padding)!==null&&m!==void 0?m:0}),g}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let l,c;try{l=Xr(i).toUint8Array()}catch(d){if(d instanceof aw)return Ks("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw d}try{c=new Jf(l,o,a)}catch(d){return Ks(d instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",d),1}return c.It===0?1:s!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.vt(a)||(this.Yt(e,i,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((i,o)=>{const a=this.se(o);if(a){if(i.current&&Zd(a.target)){const l=new G(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,dt.newNoDocument(l,e))}i.Mt&&(n.set(o,i.Ot()),i.Ft())}});let r=ce();this.zt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.jt.forEach((i,o)=>o.setReadTime(e));const s=new Mu(e,n,this.Wt,this.jt,r);return this.jt=zn(),this.zt=Og(),this.Wt=new Oe(ge),s}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new $g,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new pt(ge),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new $g),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Og(){return new Oe(G.comparator)}function Lg(){return new Oe(G.comparator)}const TT={asc:"ASCENDING",desc:"DESCENDING"},DT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AT={and:"AND",or:"OR"};class bT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rh(t,e){return t.useProto3Json||Tu(e)?e:{value:e}}function zl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RT(t,e){return zl(t,e.toTimestamp())}function xn(t){return Te(!!t),ee.fromTimestamp(function(e){const n=xr(e);return new ye(n.seconds,n.nanos)}(t))}function Zf(t,e){return function(n){return new Ie(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Mw(t){const e=Ie.fromString(t);return Te(Fw(e)),e}function sh(t,e){return Zf(t.databaseId,e.path)}function Rc(t,e){const n=Mw(e);if(n.get(1)!==t.databaseId.projectId)throw new B(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G($w(n))}function ih(t,e){return Zf(t.databaseId,e)}function PT(t){const e=Mw(t);return e.length===4?Ie.emptyPath():$w(e)}function oh(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $w(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fg(t,e,n){return{name:sh(t,e),fields:n.value.mapValue.fields}}function MT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,c){return l.useProto3Json?(Te(c===void 0||typeof c=="string"),vt.fromBase64String(c||"")):(Te(c===void 0||c instanceof Uint8Array),vt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?C.UNKNOWN:Aw(l.code);return new B(c,l.message||"")}(o);n=new Rw(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rc(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):ee.min(),a=new Tt({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ya(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rc(t,r.document),i=r.readTime?xn(r.readTime):ee.min(),o=dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ya([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rc(t,r.document),i=r.removedTargetIds||[];n=new Ya([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ST(s,i),a=r.targetId;n=new bw(a,o)}}return n}function $T(t,e){let n;if(e instanceof Wo)n={update:Fg(t,e.key,e.value)};else if(e instanceof Pu)n={delete:sh(t,e.key)};else if(e instanceof Dr)n={update:Fg(t,e.key,e.data),updateMask:qT(e.fieldMask)};else{if(!(e instanceof wT))return Y();n={verify:sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Ul)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof So)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof No)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vl)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:RT(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function OT(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?xn(r.updateTime):xn(s);return i.isEqual(ee.min())&&(i=xn(s)),new yT(i,r.transformResults||[])}(n,e))):[]}function LT(t,e){return{documents:[ih(t,e.path)]}}function FT(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ih(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ih(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return Lw(ln.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:us(d.field),direction:zT(d.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=rh(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function UT(t){let e=PT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(d){const h=Ow(d);return h instanceof ln&&dw(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(d=>function(h){return new zi(cs(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d)));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Tu(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new Fl(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new Fl(f,h)}(n.endAt)),iT(e,s,o,i,a,"F",l,c)}function VT(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ow(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=cs(e.unaryFilter.field);return qe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=cs(e.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cs(e.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=cs(e.unaryFilter.field);return qe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(e){return qe.create(cs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return ln.create(e.compositeFilter.filters.map(n=>Ow(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(t):Y()}function zT(t){return TT[t]}function jT(t){return DT[t]}function BT(t){return AT[t]}function us(t){return{fieldPath:t.canonicalString()}}function cs(t){return ht.fromServerFormat(t.fieldPath)}function Lw(t){return t instanceof qe?function(e){if(e.op==="=="){if(Ng(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NAN"}};if(Sg(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ng(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NOT_NAN"}};if(Sg(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(e.field),op:jT(e.op),value:e.value}}}(t):t instanceof ln?function(e){const n=e.getFilters().map(r=>Lw(r));return n.length===1?n[0]:{compositeFilter:{op:BT(e.op),filters:n}}}(t):Y()}function qT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.fe=e}}function KT(t){const e=UT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.rn=new GT}addToCollectionParentIndex(e,n){return this.rn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(kr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class GT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pt(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ys(0)}static Mn(){return new Ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Bi(r.mutation,s,$t.empty(),ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Fr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ii();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zn();const o=ji(),a=ji();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Dr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Bi(d.mutation,c,d.mutation.getFieldMask(),ye.now())):o.set(c.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new YT(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ji();let s=new Oe((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||$t.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=kw();d.forEach(f=>{if(!i.has(f)){const v=Tw(n.get(f),r.get(f));v!==null&&h.set(f,v),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Fr());let a=-1,l=i;return o.next(c=>O.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ce())).next(d=>({batchId:a,changes:ww(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Ii();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Ii();return this.indexManager.getCollectionParents(e,s).next(o=>O.forEach(o,a=>{const l=function(c,d){return new Ko(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,dt.newInvalidDocument(c)))});let o=Ii();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Bi(c.mutation,l,$t.empty(),ye.now()),Au(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return O.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:xn(r.createTime)}),O.resolve()}getNamedQuery(e,n){return O.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:KT(r.bundledQuery),readTime:xn(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.overlays=new Oe(G.comparator),this.ls=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Fr(),i=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Fr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Fr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return O.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xT(n,r));let i=this.ls.get(n);i===void 0&&(i=ce(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.fs=new pt(Ge.ds),this.ws=new pt(Ge._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new Ge(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new G(new Ie([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new G(new Ie([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ce();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return G.comparator(e.key,n.key)||ge(e.As,n.As)}static _s(e,n){return ge(e.As,n.As)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new pt(Ge.ds)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kT(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Ge(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ge);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),O.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new G(i),0);let a=new pt(ge);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.As)),!0)},o),O.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return O.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Rs.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.Ds=e,this.docs=new Oe(G.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,a=new G(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jC(zC(d),r)<=0||(s.has(d.key)||Au(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Cs(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nD(this)}getSize(e){return O.resolve(this.size)}}class nD extends QT{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.persistence=e,this.xs=new ai(n=>Kf(n),Wf),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Ns=0,this.ks=new em,this.targetCount=0,this.Ms=Ys.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),O.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ys(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Fn(n),O.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.$s={},this.overlays={},this.Os=new jf(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new rD(this),this.indexManager=new WT,this.remoteDocumentCache=function(r){return new tD(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new HT(n),this.qs=new JT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new eD(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new iD(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return O.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class iD extends qC{constructor(e){super(),this.currentSequenceNumber=e}}class tm{constructor(e){this.persistence=e,this.Qs=new em,this.js=null}static zs(e){return new tm(e)}get Ws(){if(this.js)return this.js;throw Y()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),O.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Ws,r=>{const s=G.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return O.or([()=>O.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(Tg(n))return O.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=th(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,th(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,r,s){return Tg(n)||s.isEqual(ee.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(vg()<=pe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nh(n)),this.Wi(e,o,n,VC(s,-1)))})}ji(e,n){let r=new pt(vw(e));return n.forEach((s,i)=>{Au(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return vg()<=pe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",nh(n)),this.Ui.getDocumentsMatchingQuery(e,n,kr.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Oe(ge),this.Yi=new ai(i=>Kf(i),Wf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XT(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function lD(t,e,n,r){return new aD(t,e,n,r)}async function Uw(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function uD(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const d=l.batch,h=d.keys();let f=O.resolve();return h.forEach(v=>{f=f.next(()=>c.getEntry(a,v)).next(w=>{const E=l.docVersions.get(v);Te(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ce();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Vw(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function cD(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Bs.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(i,d.addedDocuments,h)));let v=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(vt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(h,v),function(w,E,x){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,v,d)&&a.push(n.Bs.updateTargetData(i,v))});let l=zn(),c=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(dD(i,o,e.documentUpdates).next(d=>{l=d.nr,c=d.sr})),!r.isEqual(ee.min())){const d=n.Bs.getLastRemoteSnapshotVersion(i).next(h=>n.Bs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ji=s,i))}function dD(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:s}})}function hD(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fD(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Bs.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Bs.allocateTargetId(r).next(o=>(s=new rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function ah(t,e,n){const r=ne(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ho(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function Ug(t,e,n){const r=ne(t);let s=ee.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const d=ne(a),h=d.Yi.get(c);return h!==void 0?O.resolve(d.Ji.get(h)):d.Bs.getTargetData(l,c)}(r,o,Vn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ce())).next(a=>(mD(r,oT(e),a),{documents:a,ir:i})))}function mD(t,e,n){let r=t.Xi.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Xi.set(e,r)}class Vg{constructor(){this.activeTargetIds=hT()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pD{constructor(){this.Hr=new Vg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Vg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba=null;function Pc(){return ba===null?ba=268435456+Math.round(2147483648*Math.random()):ba++,"0x"+ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class ED extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=Pc(),a=this.To(e,n);W("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,s,i),this.Ao(e,a,l,r).then(c=>(W("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Ks("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=yD[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=Pc();return new Promise((o,a)=>{const l=new TC;l.setWithCredentials(!0),l.listenOnce(_C.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bc.NO_ERROR:const d=l.getResponseJson();W(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case bc.TIMEOUT:W(lt,`RPC '${e}' ${i} timed out`),a(new B(C.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const h=l.getStatus();if(W(lt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const v=f==null?void 0:f.error;if(v&&v.status&&v.message){const w=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(x)>=0?x:C.UNKNOWN}(v.status);a(new B(w,v.message))}else a(new B(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new B(C.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(lt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(lt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Ro(e,n,r){const s=Pc(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SC(),a=NC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new CC({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");W(lt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,v=!1;const w=new vD({ro:x=>{v?W(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(W(lt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),W(lt,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},oo:()=>h.close()}),E=(x,m,g)=>{x.listen(m,y=>{try{g(y)}catch(k){setTimeout(()=>{throw k},0)}})};return E(h,Ca.EventType.OPEN,()=>{v||W(lt,`RPC '${e}' stream ${s} transport opened.`)}),E(h,Ca.EventType.CLOSE,()=>{v||(v=!0,W(lt,`RPC '${e}' stream ${s} transport closed`),w.wo())}),E(h,Ca.EventType.ERROR,x=>{v||(v=!0,Ks(lt,`RPC '${e}' stream ${s} transport errored:`,x),w.wo(new B(C.UNAVAILABLE,"The operation could not be completed")))}),E(h,Ca.EventType.MESSAGE,x=>{var m;if(!v){const g=x.data[0];Te(!!g);const y=g,k=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(k){W(lt,`RPC '${e}' stream ${s} received error:`,k);const T=k.status;let R=function(S){const L=ze[S];if(L!==void 0)return Aw(L)}(T),P=k.message;R===void 0&&(R=C.INTERNAL,P="Unknown error status: "+T+" with message "+k.message),v=!0,w.wo(new B(R,P)),h.close()}else W(lt,`RPC '${e}' stream ${s} received:`,g),w._o(g)}}),E(a,IC.STAT_EVENT,x=>{x.stat===gg.PROXY?W(lt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===gg.NOPROXY&&W(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.fo()},0),w}}function Mc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return new bT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zw(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new B(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wD extends jw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=MT(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ee.min():i.readTime?xn(i.readTime):ee.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=oh(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=Zd(a)?{documents:LT(s,a)}:{query:FT(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Pw(s,i.resumeToken);const l=rh(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(ee.min())>0){o.readTime=zl(s,i.snapshotVersion.toTimestamp());const l=rh(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=VT(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=oh(this.serializer),n.removeTarget=e,this.Wo(n)}}class kD extends jw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=OT(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.cu(r,n)}return Te(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=oh(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$T(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new B(C.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(C.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(C.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class SD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Un(n),this.mu=!1):W("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{ss(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ne(a);l.vu.add(4),await Qo(l),l.bu.set("Unknown"),l.vu.delete(4),await Ou(l)}(this))})}),this.bu=new SD(r,s)}}async function Ou(t){if(ss(t))for(const e of t.Ru)await e(!0)}async function Qo(t){for(const e of t.Ru)await e(!1)}function Bw(t,e){const n=ne(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),im(n)?sm(n):li(n).Ko()&&rm(n,e))}function qw(t,e){const n=ne(t),r=li(n);n.Au.delete(e),r.Ko()&&Hw(n,e),n.Au.size===0&&(r.Ko()?r.jo():ss(n)&&n.bu.set("Unknown"))}function rm(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}li(t).su(e)}function Hw(t,e){t.Vu.qt(e),li(t).iu(e)}function sm(t){t.Vu=new CT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),li(t).start(),t.bu.gu()}function im(t){return ss(t)&&!li(t).Uo()&&t.Au.size>0}function ss(t){return ne(t).vu.size===0}function Kw(t){t.Vu=void 0}async function _D(t){t.Au.forEach((e,n)=>{rm(t,e)})}async function ID(t,e){Kw(t),im(t)?(t.bu.Iu(e),sm(t)):t.bu.set("Unknown")}async function CD(t,e,n){if(t.bu.set("Online"),e instanceof Rw&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jl(t,r)}else if(e instanceof Ya?t.Vu.Ht(e):e instanceof bw?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ee.min()))try{const r=await Vw(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Vu.ce(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.Au.get(l);c&&s.Au.set(l,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const c=s.Au.get(a);if(!c)return;s.Au.set(a,c.withResumeToken(vt.EMPTY_BYTE_STRING,c.snapshotVersion)),Hw(s,a);const d=new rr(c.target,a,l,c.sequenceNumber);rm(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await jl(t,r)}}async function jl(t,e,n){if(!Ho(e))throw e;t.vu.add(1),await Qo(t),t.bu.set("Offline"),n||(n=()=>Vw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Ou(t)})}function Ww(t,e){return e().catch(n=>jl(t,n,e))}async function Lu(t){const e=ne(t),n=Sr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;TD(e);)try{const s=await hD(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,DD(e,s)}catch(s){await jl(e,s)}Gw(e)&&Qw(e)}function TD(t){return ss(t)&&t.Eu.length<10}function DD(t,e){t.Eu.push(e);const n=Sr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Gw(t){return ss(t)&&!Sr(t).Uo()&&t.Eu.length>0}function Qw(t){Sr(t).start()}async function AD(t){Sr(t).hu()}async function bD(t){const e=Sr(t);for(const n of t.Eu)e.uu(n.mutations)}async function RD(t,e,n){const r=t.Eu.shift(),s=Yf.from(r,e,n);await Ww(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function PD(t,e){e&&Sr(t).ou&&await async function(n,r){if(s=r.code,NT(s)&&s!==C.ABORTED){const i=n.Eu.shift();Sr(n).Qo(),await Ww(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Lu(n)}var s}(t,e),Gw(t)&&Qw(t)}async function jg(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=ss(n);n.vu.add(3),await Qo(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Ou(n)}async function MD(t,e){const n=ne(t);e?(n.vu.delete(2),await Ou(n)):e||(n.vu.add(2),await Qo(n),n.bu.set("Unknown"))}function li(t){return t.Su||(t.Su=function(e,n,r){const s=ne(e);return s.fu(),new wD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:_D.bind(null,t),ao:ID.bind(null,t),nu:CD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),im(t)?sm(t):t.bu.set("Unknown")):(await t.Su.stop(),Kw(t))})),t.Su}function Sr(t){return t.Du||(t.Du=function(e,n,r){const s=ne(e);return s.fu(),new kD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:AD.bind(null,t),ao:PD.bind(null,t),au:bD.bind(null,t),cu:RD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Lu(t)):(await t.Du.stop(),t.Eu.length>0&&(W("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new om(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Ho(t))return new B(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ii(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new Os(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Cu=new Oe(G.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Y():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xs{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xs(e,n,Os.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Nu=void 0,this.listeners=[]}}class OD{constructor(){this.queries=new ai(e=>yw(e),Du),this.onlineState="Unknown",this.ku=new Set}}async function Yw(t,e){const n=ne(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new $D),s)try{i.Nu=await n.onListen(r)}catch(o){const a=am(o,`Initialization of query '${nh(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&lm(n)}async function Xw(t,e){const n=ne(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function LD(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.$u(s)&&(r=!0);o.Nu=s}}r&&lm(n)}function FD(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function lm(t){t.ku.forEach(e=>{e.next()})}class Jw{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.key=e}}class ek{constructor(e){this.key=e}}class UD{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ce(),this.mutatedKeys=ce(),this.tc=vw(e),this.ec=new Os(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Bg,s=n?n.ec:this.ec;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),v=Au(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;f&&v?f.data.isEqual(v.data)?w!==E&&(r.track({type:3,doc:v}),x=!0):this.rc(f,v)||(r.track({type:2,doc:v}),x=!0,(l&&this.tc(v,l)>0||c&&this.tc(v,c)<0)&&(a=!0)):!f&&v?(r.track({type:0,doc:v}),x=!0):f&&!v&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(v?(o=o.add(v),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{ec:o,ic:r,zi:a,mutatedKeys:i}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((c,d)=>function(h,f){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return v(h)-v(f)}(c.type,d.type)||this.tc(c.doc,d.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,i.length!==0||l?{snapshot:new Xs(this.query,e.ec,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Bg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ce(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new ek(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new Zw(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ce();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Xs.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class VD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zD{constructor(e){this.key=e,this.fc=!1}}class jD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ai(a=>yw(a),Du),this._c=new Map,this.mc=new Set,this.gc=new Oe(G.comparator),this.yc=new Map,this.Ic=new em,this.Tc={},this.Ec=new Map,this.Ac=Ys.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function BD(t,e){const n=ZD(t);let r,s;const i=n.wc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const o=await fD(n.localStore,Vn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await qD(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Bw(n.remoteStore,o)}return s}async function qD(t,e,n,r,s){t.Rc=(h,f,v)=>async function(w,E,x,m){let g=E.view.sc(x);g.zi&&(g=await Ug(w.localStore,E.query,!1).then(({documents:T})=>E.view.sc(T,g)));const y=m&&m.targetChanges.get(E.targetId),k=E.view.applyChanges(g,w.isPrimaryClient,y);return Hg(w,E.targetId,k.cc),k.snapshot}(t,h,f,v);const i=await Ug(t.localStore,e,!0),o=new UD(e,i.ir),a=o.sc(i.documents),l=Go.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Hg(t,n,c.cc);const d=new VD(e,n,o);return t.wc.set(e,d),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function HD(t,e){const n=ne(t),r=n.wc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Du(i,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ah(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),qw(n.remoteStore,r.targetId),lh(n,r.targetId)}).catch(qo)):(lh(n,r.targetId),await ah(n.localStore,r.targetId,!0))}async function KD(t,e,n){const r=eA(t);try{const s=await function(i,o){const a=ne(i),l=ye.now(),c=o.reduce((f,v)=>f.add(v.key),ce());let d,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=zn(),w=ce();return a.Zi.getEntries(f,c).next(E=>{v=E,v.forEach((x,m)=>{m.isValidDocument()||(w=w.add(x))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,v)).next(E=>{d=E;const x=[];for(const m of o){const g=ET(m,d.get(m.key).overlayedDocument);g!=null&&x.push(new Dr(m.key,g,lw(g.value.mapValue),St.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,x,o)}).next(E=>{h=E;const x=E.applyToLocalDocumentSet(d,w);return a.documentOverlayCache.saveOverlays(f,E.batchId,x)})}).then(()=>({batchId:h.batchId,changes:ww(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.Tc[i.currentUser.toKey()];l||(l=new Oe(ge)),l=l.insert(o,a),i.Tc[i.currentUser.toKey()]=l}(r,s.batchId,n),await Yo(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=am(s,"Failed to persist write");n.reject(i)}}async function tk(t,e){const n=ne(t);try{const r=await cD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.yc.get(i);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?Te(o.fc):s.removedDocuments.size>0&&(Te(o.fc),o.fc=!1))}),await Yo(n,r,e)}catch(r){await qo(r)}}function qg(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=ne(i);a.onlineState=o;let l=!1;a.queries.forEach((c,d)=>{for(const h of d.listeners)h.Mu(o)&&(l=!0)}),l&&lm(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WD(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.yc.get(e),i=s&&s.key;if(i){let o=new Oe(G.comparator);o=o.insert(i,dt.newNoDocument(i,ee.min()));const a=ce().add(i),l=new Mu(ee.min(),new Map,new Oe(ge),o,a);await tk(r,l),r.gc=r.gc.remove(i),r.yc.delete(e),um(r)}else await ah(r.localStore,e,!1).then(()=>lh(r,e,n)).catch(qo)}async function GD(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await uD(n.localStore,e);rk(n,r,null),nk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yo(n,s)}catch(s){await qo(s)}}async function QD(t,e,n){const r=ne(t);try{const s=await function(i,o){const a=ne(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(d=>(Te(d!==null),c=d.keys(),a.mutationQueue.removeMutationBatch(l,d))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);rk(r,e,n),nk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yo(r,s)}catch(s){await qo(s)}}function nk(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function rk(t,e,n){const r=ne(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function lh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||sk(t,r)})}function sk(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(qw(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),um(t))}function Hg(t,e,n){for(const r of n)r instanceof Zw?(t.Ic.addReference(r.key,e),YD(t,r)):r instanceof ek?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||sk(t,r.key)):Y()}function YD(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(W("SyncEngine","New document in limbo: "+n),t.mc.add(r),um(t))}function um(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new G(Ie.fromString(e)),r=t.Ac.next();t.yc.set(r,new zD(n)),t.gc=t.gc.insert(n,r),Bw(t.remoteStore,new rr(Vn(Gf(n.path)),r,"TargetPurposeLimboResolution",jf.ct))}}async function Yo(t,e,n){const r=ne(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=nm.Li(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,l){const c=ne(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>O.forEach(l,h=>O.forEach(h.Fi,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>O.forEach(h.Bi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ho(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.Ji.get(h),v=f.snapshotVersion,w=f.withLastLimboFreeSnapshotVersion(v);c.Ji=c.Ji.insert(h,w)}}}(r.localStore,i))}async function XD(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Uw(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new B(C.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yo(n,r.er)}}function JD(t,e){const n=ne(t),r=n.yc.get(e);if(r&&r.fc)return ce().add(r.key);{let s=ce();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function ZD(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WD.bind(null,e),e.dc.nu=LD.bind(null,e.eventManager),e.dc.Pc=FD.bind(null,e.eventManager),e}function eA(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QD.bind(null,e),e}class Kg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return lD(this.persistence,new oD,e.initialUser,this.serializer)}createPersistence(e){return new sD(tm.zs,this.serializer)}createSharedClientState(e){return new pD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XD.bind(null,this.syncEngine),await MD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new OD}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new ED(s));var s;return function(i,o,a,l){return new xD(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>qg(this.syncEngine,a,0),o=zg.D()?new zg:new gD,new ND(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,c){const d=new jD(r,s,i,o,a,l);return c&&(d.vc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ne(e);W("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Qo(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=iw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{W("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(W("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=am(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $c(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Uw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sA(t);W("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>jg(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>jg(e.remoteStore,i)),t._onlineComponents=e}function rA(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function sA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await $c(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!rA(n))throw n;Ks("Error using user provided cache. Falling back to memory cache: "+n),await $c(t,new Kg)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await $c(t,new Kg);return t._offlineComponents}async function ok(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Wg(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Wg(t,new tA))),t._onlineComponents}function iA(t){return ok(t).then(e=>e.syncEngine)}async function uh(t){const e=await ok(t),n=e.eventManager;return n.onListen=BD.bind(null,e.syncEngine),n.onUnlisten=HD.bind(null,e.syncEngine),n}function oA(t,e,n={}){const r=new pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const c=new ik({next:h=>{i.enqueueAndForget(()=>Xw(s,d)),h.fromCache&&a.source==="server"?l.reject(new B(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Jw(o,c,{includeMetadataChanges:!0,Ku:!0});return Yw(s,d)}(await uh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e,n){if(!n)throw new B(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aA(t,e,n,r){if(e===!0&&r===!0)throw new B(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qg(t){if(!G.isDocumentKey(t))throw new B(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yg(t){if(G.isDocumentKey(t))throw new B(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fu(t);throw new B(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ak((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Uu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xg(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new bC;switch(n.type){case"firstParty":return new $C(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new B(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Gg.get(e);n&&(W("ComponentProvider","Removing Datastore"),Gg.delete(e),n.terminate())}(this),Promise.resolve()}}function lA(t,e,n,r={}){var s;const i=(t=Lt(t,Uu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ut.MOCK_USER;else{a=tS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new B(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ut(c)}t._authCredentials=new RC(new sw(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class gr extends is{constructor(e,n,r){super(e,n,Gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new G(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function Ft(t,e,...n){if(t=We(t),lk("collection","path",e),t instanceof Uu){const r=Ie.fromString(e,...n);return Yg(r),new gr(t,null,r)}{if(!(t instanceof Nt||t instanceof gr))throw new B(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Yg(r),new gr(t.firestore,null,r)}}function Fe(t,e,...n){if(t=We(t),arguments.length===1&&(e=iw.A()),lk("doc","path",e),t instanceof Uu){const r=Ie.fromString(e,...n);return Qg(r),new Nt(t,null,new G(r))}{if(!(t instanceof Nt||t instanceof gr))throw new B(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Qg(r),new Nt(t.firestore,t instanceof gr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zw(this,"async_queue_retry"),this.Xc=()=>{const n=Mc();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Mc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Mc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new pr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Ho(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Un("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=om.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&Y()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Jg(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class jn extends Uu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uk(this),this._firestoreClient.terminate()}}function cA(t,e){const n=typeof t=="object"?t:kv(),r=typeof t=="string"?t:"(default)",s=df(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Zx("firestore");i&&lA(s,...i)}return s}function Vu(t){return t._firestoreClient||uk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uk(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,l,c){return new WC(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ak(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new nA(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(vt.fromBase64String(e))}catch(n){throw new B(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Js(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^__.*__$/;class hA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wo(e,this.data,n,this.fieldTransforms)}}class ck{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class hm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Bl(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(dk(this.ca)&&dA.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class fA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}ya(e,n,r,s=!1){return new hm({ca:e,methodName:n,ga:r,path:ht.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jo(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new fA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fm(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);mm("Data must be an object, but it was:",o,r);const a=mk(r,o);let l,c;if(i.merge)l=new $t(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=ch(e,h,n);if(!o.contains(f))throw new B(C.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);gk(d,f)||d.push(f)}l=new $t(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new hA(new Tt(a),l,c)}class zu extends cm{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function hk(t,e,n,r){const s=t.ya(1,e,n);mm("Data must be an object, but it was:",s,r);const i=[],o=Tt.empty();rs(r,(l,c)=>{const d=pm(e,l,n);c=We(c);const h=s.da(d);if(c instanceof zu)i.push(d);else{const f=Zo(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new $t(i);return new ck(o,a,s.fieldTransforms)}function fk(t,e,n,r,s,i){const o=t.ya(1,e,n),a=[ch(e,r,n)],l=[s];if(i.length%2!=0)throw new B(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(ch(e,i[f])),l.push(i[f+1]);const c=[],d=Tt.empty();for(let f=a.length-1;f>=0;--f)if(!gk(c,a[f])){const v=a[f];let w=l[f];w=We(w);const E=o.da(v);if(w instanceof zu)c.push(v);else{const x=Zo(w,E);x!=null&&(c.push(v),d.set(v,x))}}const h=new $t(c);return new ck(d,h,o.fieldTransforms)}function mA(t,e,n,r=!1){return Zo(n,t.ya(r?4:3,e))}function Zo(t,e){if(pk(t=We(t)))return mm("Unsupported field value:",e,t),mk(t,e);if(t instanceof cm)return function(n,r){if(!dk(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Zo(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=We(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fT(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ye.fromDate(n);return{timestampValue:zl(r.serializer,s)}}if(n instanceof ye){const s=new ye(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zl(r.serializer,s)}}if(n instanceof dm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Js)return{bytesValue:Pw(r.serializer,n._byteString)};if(n instanceof Nt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Zf(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Fu(n)}`)}(t,e)}function mk(t,e){const n={};return ow(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rs(t,(r,s)=>{const i=Zo(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function pk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof dm||t instanceof Js||t instanceof Nt||t instanceof cm)}function mm(t,e,n){if(!pk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Fu(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function ch(t,e,n){if((e=We(e))instanceof Xo)return e._internalPath;if(typeof e=="string")return pm(t,e);throw Bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const pA=new RegExp("[~\\*/\\[\\]]");function pm(t,e,n){if(e.search(pA)>=0)throw Bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xo(...e.split("."))._internalPath}catch{throw Bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new B(C.INVALID_ARGUMENT,a+t+l)}function gk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gA extends yk{data(){return super.data()}}function gm(t,e){return typeof e=="string"?pm(t,e):e instanceof Xo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ym{}class yA extends ym{}function vm(t,e,...n){let r=[];e instanceof ym&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof Em).length,o=s.filter(a=>a instanceof ju).length;if(i>1||i>0&&o>0)throw new B(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ju extends yA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ju(e,n,r)}_apply(e){const n=this._parse(e);return wk(e._query,n),new is(e.firestore,e.converter,eh(e._query,n))}_parse(e){const n=Jo(e.firestore);return function(s,i,o,a,l,c,d){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new B(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){ey(d,c);const f=[];for(const v of d)f.push(Zg(a,s,v));h={arrayValue:{values:f}}}else h=Zg(a,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||ey(d,c),h=mA(o,i,d,c==="in"||c==="not-in");return qe.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ek(t,e,n){const r=e,s=gm("where",t);return ju._create(s,r,n)}class Em extends ym{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const a of o)wk(i,a),i=eh(i,a)}(e._query,n),new is(e.firestore,e.converter,eh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zg(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new B(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&n.indexOf("/")!==-1)throw new B(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!G.isDocumentKey(r))throw new B(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xg(t,new G(r))}if(n instanceof Nt)return xg(t,n._key);throw new B(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(n)}.`)}function ey(t,e){if(!Array.isArray(t)||t.length===0)throw new B(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wk(t,e){if(e.isInequality()){const r=Qf(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new B(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=pw(t);i!==null&&vA(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vA(t,e,n){if(!n.isEqual(e))throw new B(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class EA{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new dm(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wo(e));default:return null}}convertTimestamp(e){const n=xr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);Te(Fw(r));const s=new ko(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kk extends yk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xa extends kk{data(e={}){return super.data(e)}}class xk{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ti(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xa(this._firestore,this._userDataWriter,r.key,r,new Ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new Xa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ti(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Xa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ti(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:wA(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class km extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Sk(t){t=Lt(t,is);const e=Lt(t.firestore,jn),n=Vu(e),r=new km(e);return vk(t._query),oA(n,t._query).then(s=>new xk(e,r,t,s))}function kA(t,e,n){t=Lt(t,Nt);const r=Lt(t.firestore,jn),s=wm(t.converter,e,n);return ta(r,[fm(Jo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,St.none())])}function ql(t,e,n,...r){t=Lt(t,Nt);const s=Lt(t.firestore,jn),i=Jo(s);let o;return o=typeof(e=We(e))=="string"||e instanceof Xo?fk(i,"updateDoc",t._key,e,n,r):hk(i,"updateDoc",t._key,e),ta(s,[o.toMutation(t._key,St.exists(!0))])}function ea(t){return ta(Lt(t.firestore,jn),[new Pu(t._key,St.none())])}function Bu(t,e){const n=Lt(t.firestore,jn),r=Fe(t),s=wm(t.converter,e);return ta(n,[fm(Jo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,St.exists(!1))]).then(()=>r)}function xA(t,...e){var n,r,s;t=We(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Jg(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Jg(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof Nt)c=Lt(t.firestore,jn),d=Gf(t._key.path),l={next:h=>{e[o]&&e[o](SA(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Lt(t,is);c=Lt(h.firestore,jn),d=h._query;const f=new km(c);l={next:v=>{e[o]&&e[o](new xk(c,f,h,v))},error:e[o+1],complete:e[o+2]},vk(t._query)}return function(h,f,v,w){const E=new ik(w),x=new Jw(f,E,v);return h.asyncQueue.enqueueAndForget(async()=>Yw(await uh(h),x)),()=>{E.Dc(),h.asyncQueue.enqueueAndForget(async()=>Xw(await uh(h),x))}}(Vu(c),d,a,l)}function ta(t,e){return function(n,r){const s=new pr;return n.asyncQueue.enqueueAndForget(async()=>KD(await iA(n),r,s)),s.promise}(Vu(t),e)}function SA(t,e,n){const r=n.docs.get(e._key),s=new km(t);return new kk(t,s,e._key,r,new Ti(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jo(e)}set(e,n,r){this._verifyNotCommitted();const s=Oc(e,this._firestore),i=wm(s.converter,n,r),o=fm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,St.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Oc(e,this._firestore);let o;return o=typeof(n=We(n))=="string"||n instanceof Xo?fk(this._dataReader,"WriteBatch.update",i._key,n,r,s):hk(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,St.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oc(e,this._firestore);return this._mutations=this._mutations.concat(new Pu(n._key,St.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oc(t,e){if((t=We(t)).firestore!==e)throw new B(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){return Vu(t=Lt(t,jn)),new NA(t,e=>ta(t,e))}(function(t,e=!0){(function(n){oi=n})(ri),qs(new Gr("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new jn(new PC(n.getProvider("auth-internal")),new LC(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new B(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),mr(yg,"3.13.0",t),mr(yg,"3.13.0","esm2017")})();const _A={BASE_URL:"/mia_move/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_CONFIG:'{"apiKey":"AIzaSyDkiLiR8QI7XDLkQ3S4R7psfSiAhL8Ds7U","authDomain":"mia-move-dev.firebaseapp.com","projectId":"mia-move-dev","storageBucket":"mia-move-dev.firebasestorage.app","messagingSenderId":"539510852507","appId":"1:539510852507:web:0d2293397af8756a2f6f3e","measurementId":"G-JRW1F0E3K8"}'},IA=typeof __app_id<"u"?__app_id:"mia-move-app";let Zs=null;try{typeof import.meta<"u"&&_A&&(Zs=JSON.parse('{"apiKey":"AIzaSyDkiLiR8QI7XDLkQ3S4R7psfSiAhL8Ds7U","authDomain":"mia-move-dev.firebaseapp.com","projectId":"mia-move-dev","storageBucket":"mia-move-dev.firebasestorage.app","messagingSenderId":"539510852507","appId":"1:539510852507:web:0d2293397af8756a2f6f3e","measurementId":"G-JRW1F0E3K8"}'))}catch(t){console.warn("Falha ao parsear VITE_FIREBASE_CONFIG:",t)}Zs||(Zs=typeof __firebase_config<"u"?JSON.parse(__firebase_config):null);let hn,dh,Lc;Zs&&(AC("debug"),Lc=wv(Zs),hn=cA(Lc),dh=SI(Lc));const ve=(t,e)=>`/artifacts/${IA}/users/${t}/${e}`,zt="bg-pink-500 hover:bg-pink-600",na="bg-teal-500 hover:bg-teal-600",Zr="bg-red-500 hover:bg-red-600",ke="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",se="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 dark:placeholder-gray-400",Kl=5,he=t=>{const e=typeof t=="number"?t:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},Fc=t=>new Intl.NumberFormat("pt-BR").format(t),nn=t=>{const e=new Date(t);return e.setHours(0,0,0,0),e},CA=({isOpen:t,onClose:e,showToast:n,onSync:r,onUnsync:s,currentUid:i,isSynced:o})=>{const[a,l]=I.useState(""),c=()=>{const h=document.createElement("textarea");h.value=i,document.body.appendChild(h),h.select();try{document.execCommand("copy"),n("ID da Sessão copiado!","success")}catch{n("Falha ao copiar o ID.","error")}document.body.removeChild(h)},d=()=>{if(!a.trim()){n("Por favor, cole um ID para sincronizar.","error");return}r(a.trim()),e()};return u.createElement(Xt,{isOpen:t,onClose:e,title:"Sincronizar Dispositivos",size:"max-w-xl"},u.createElement("div",{className:"space-y-6"},u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Use esta função para acessar os mesmos dados em diferentes aparelhos (celulares, computadores, etc.)."),u.createElement("div",{className:"p-4 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50"},u.createElement("h4",{className:"font-semibold text-lg mb-2 text-gray-800 dark:text-gray-200"},"1. Copie o ID do Dispositivo Principal"),u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3"},'No dispositivo que já contém seus dados, clique no botão para copiar o "ID da Sessão" abaixo.'),u.createElement("div",{className:"mt-4 text-center bg-pink-100 dark:bg-pink-900/40 p-3 rounded-lg flex items-center justify-between"},u.createElement("span",{className:"text-sm font-mono break-all text-pink-800 dark:text-pink-200"},i),u.createElement("button",{onClick:c,className:"ml-4 px-3 py-2 text-sm font-semibold bg-pink-500 text-white rounded-lg hover:bg-pink-600 flex-shrink-0"},"Copiar"))),u.createElement("div",{className:"p-4 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50"},u.createElement("h4",{className:"font-semibold text-lg mb-2 text-gray-800 dark:text-gray-200"},"2. Cole o ID no Novo Dispositivo"),u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3"},'No seu segundo aparelho, cole o ID copiado no campo abaixo e clique em "Sincronizar".'),u.createElement("div",{className:"flex space-x-2"},u.createElement("input",{type:"text",value:a,onChange:h=>l(h.target.value),placeholder:"Cole o ID da Sessão aqui",className:se}),u.createElement("button",{onClick:d,className:`px-6 py-2 font-semibold text-white rounded-lg ${na} whitespace-nowrap`},"Sincronizar"))),o&&u.createElement("div",{className:"text-center pt-4 border-t dark:border-gray-600"},u.createElement("button",{onClick:s,className:`px-4 py-2 text-sm font-semibold rounded-full ${Zr} text-white`},"Desfazer Sincronização neste Dispositivo"))))},hh=()=>u.createElement("div",{className:"flex justify-center items-center h-full"},u.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"}),u.createElement("p",{className:"ml-3 text-gray-600 dark:text-gray-300"},"Carregando...")),Xt=({title:t,children:e,isOpen:n,onClose:r,actions:s,size:i="max-w-lg"})=>n?u.createElement("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:r},u.createElement("div",{className:`bg-white dark:bg-gray-800 rounded-xl w-full ${i} p-6 shadow-2xl transition duration-300 transform scale-100`,onClick:o=>o.stopPropagation()},u.createElement("div",{className:"flex justify-between items-center mb-4 border-b pb-2 border-gray-200 dark:border-gray-700"},u.createElement("h3",{className:"text-xl font-bold text-pink-600"},t),u.createElement("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),u.createElement("div",{className:"mb-6"},e),s&&u.createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},s))):null,TA=({message:t,type:e,onClose:n})=>{const r="fixed bottom-5 right-5 p-4 rounded-lg shadow-xl text-white font-semibold flex items-center space-x-3 transition-opacity duration-300 z-50";let s="";switch(e){case"success":s="bg-teal-500";break;case"error":s="bg-red-500";break;default:s="bg-gray-700"}return u.createElement("div",{className:`${r} ${s}`},u.createElement("span",null,t),u.createElement("button",{onClick:n,className:"ml-4 opacity-75 hover:opacity-100"},"×"))},Nk=({sales:t})=>{const e=I.useMemo(()=>{const r=[],s=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"];for(let i=6;i>=0;i--){const o=new Date;o.setDate(o.getDate()-i);const a=nn(o);r.push({day:s[o.getDay()],revenue:0,date:a})}return t.filter(i=>i.status!=="estornada").forEach(i=>{const o=nn(i.date.toDate()),a=r.find(l=>l.date.getTime()===o.getTime());a&&(a.revenue+=i.totalAmount)}),r},[t]),n=Math.max(...e.map(r=>r.revenue),0);return u.createElement("div",{className:"flex justify-around items-end h-[200px] p-2 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-700"},e.map((r,s)=>u.createElement("div",{key:s,className:"flex flex-col items-center flex-shrink-0 w-12 text-center"},u.createElement("div",{className:"text-xs font-semibold text-pink-600 dark:text-pink-400 mb-1"},he(r.revenue)),u.createElement("div",{style:{height:`${n>0?r.revenue/n*120:0}px`,minHeight:"2px"},className:"w-8 bg-pink-400 rounded-t-md transition-all duration-500 shadow-md"}),u.createElement("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mt-1"},r.day))))},DA=({sales:t})=>{const e=I.useMemo(()=>{const r=t.filter(i=>i.status!=="estornada").reduce((i,o)=>(i[o.paymentMethod]=(i[o.paymentMethod]||0)+o.totalAmount,i),{}),s=Object.values(r).reduce((i,o)=>i+o,0);return{data:Object.entries(r).map(([i,o])=>({method:i,amount:o,percentage:s>0?o/s*100:0})),total:s}},[t]);if(e.total===0)return u.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400"},"Sem dados de pagamento.");const n={"Cartão de Crédito":"bg-indigo-500",PIX:"bg-green-500",Dinheiro:"bg-yellow-500",Débito:"bg-pink-500",Outro:"bg-gray-400"};return u.createElement("div",{className:"space-y-4"},u.createElement("div",{className:"flex h-6 rounded-full overflow-hidden shadow-inner"},e.data.map(r=>u.createElement("div",{key:r.method,style:{width:`${r.percentage}%`},className:n[r.method]||"bg-gray-400",title:`${r.method}: ${r.percentage.toFixed(1)}%`}))),u.createElement("ul",{className:"grid grid-cols-2 gap-2 text-sm"},e.data.map(r=>u.createElement("li",{key:r.method,className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300"},u.createElement("span",{className:`w-3 h-3 rounded-full ${n[r.method]||"bg-gray-400"}`}),u.createElement("span",null,r.method,":"),u.createElement("span",{className:"font-semibold"},r.percentage.toFixed(1),"%")))))},AA=({sales:t,expenses:e,products:n,monthlyGoal:r,setActiveTab:s})=>{const i=nn(new Date),{todayRevenue:o,todayNetProfit:a}=I.useMemo(()=>{const v=t.filter(y=>y.date.toDate()>=i&&y.status!=="estornada"),w=e.filter(y=>y.date.toDate()>=i&&y.status==="pago"),E=v.reduce((y,k)=>y+k.totalAmount,0),x=v.reduce((y,k)=>y+(k.profit||0),0),m=w.reduce((y,k)=>y+k.amount,0),g=x-m;return{todayRevenue:E,todayNetProfit:g}},[t,e,i]),l=I.useMemo(()=>n.flatMap(v=>(v.variants||[]).map(w=>({...w,productName:v.name}))),[n]),c=I.useMemo(()=>l.filter(v=>v.quantity<Kl),[l]),d=I.useMemo(()=>t.filter(v=>v.paymentStatus==="a_receber"&&v.status!=="estornada"&&v.dueDate&&new Date(v.dueDate.replace(/-/g,"/"))<i),[t,i]),h=I.useMemo(()=>e.filter(v=>v.status==="a_pagar"&&v.dueDate&&new Date(v.dueDate.replace(/-/g,"/"))<i),[e,i]),f=I.useMemo(()=>{const v=new Date;v.setDate(v.getDate()-7);const w=nn(v),E=t.filter(g=>g.date.toDate()>=w&&g.status!=="estornada"),x={};E.forEach(g=>{g.items.forEach(y=>{x[y.sku]=(x[y.sku]||0)+y.quantity})});const m=new Map(l.map(g=>[g.sku,g]));return Object.entries(x).map(([g,y])=>({...m.get(g),quantitySold:y})).filter(g=>g.productName).sort((g,y)=>y.quantitySold-g.quantitySold).slice(0,3)},[t,l]);return u.createElement("div",{className:"space-y-8"},u.createElement("div",null,u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Painel de Controle"),u.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Resumo do seu negócio hoje, ",new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"}),".")),u.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},u.createElement("div",{className:`${ke} border-l-4 border-pink-500 col-span-1 md:col-span-2`},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Visão Geral do Dia"),u.createElement("div",{className:"mt-2 grid grid-cols-2 gap-4"},u.createElement("div",null,u.createElement("p",{className:"text-3xl font-bold text-pink-600"},he(o)),u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Vendas Hoje")),u.createElement("div",null,u.createElement("p",{className:`text-3xl font-bold ${a>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`},he(a)),u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Lucro Líquido Hoje")))),u.createElement("div",{className:`${ke} border-l-4 border-purple-500 col-span-1 md:col-span-2`},u.createElement(UA,{sales:t,expenses:e,monthlyGoal:r,showTitle:!0}))),u.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},u.createElement("div",{className:"lg:col-span-2 space-y-6"},u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"📈 Desempenho da Semana"),u.createElement(Nk,{sales:t})),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"🔥 Produtos Quentes (Últimos 7 dias)"),f.length>0?u.createElement("ul",{className:"space-y-3"},f.map(v=>u.createElement("li",{key:v.sku,className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-xl border-l-4 border-pink-300 dark:border-pink-500"},u.createElement("span",{className:"font-medium text-gray-800 dark:text-gray-200"},v.productName," (",v.size," - ",v.color,")"),u.createElement("span",{className:"font-bold text-pink-600 dark:text-pink-400"},v.quantitySold," uni.")))):u.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Nenhuma venda nos últimos 7 dias."))),u.createElement("div",{className:"space-y-6"},u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"⚠️ Avisos Importantes"),u.createElement("div",{className:"space-y-3"},c.length>0&&u.createElement("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/40 rounded-lg flex justify-between items-center"},u.createElement("p",{className:"text-orange-700 dark:text-orange-300 text-sm"},c.length," variaçõe(s) com estoque baixo."),u.createElement("button",{onClick:()=>s("Estoque"),className:"text-sm font-semibold text-orange-800 dark:text-orange-200 hover:underline"},"Ver")),d.length>0&&u.createElement("div",{className:"p-3 bg-red-50 dark:bg-red-900/40 rounded-lg flex justify-between items-center"},u.createElement("p",{className:"text-red-700 dark:text-red-300 text-sm"},d.length," conta(s) a receber vencidas."),u.createElement("button",{onClick:()=>s("Relatórios"),className:"text-sm font-semibold text-red-800 dark:text-red-200 hover:underline"},"Ver")),h.length>0&&u.createElement("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/40 border-l-4 border-yellow-500 rounded-lg flex justify-between items-center"},u.createElement("p",{className:"text-yellow-800 dark:text-yellow-300 text-sm"},h.length," despesa(s) vencida(s)."),u.createElement("button",{onClick:()=>s("Despesas"),className:"text-sm font-semibold text-yellow-900 dark:text-yellow-200 hover:underline"},"Ver")),c.length===0&&d.length===0&&h.length===0&&u.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Tudo em ordem por aqui!"))),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"🚀 Acesso Rápido"),u.createElement("div",{className:"space-y-3"},u.createElement("button",{onClick:()=>s("Vendas"),className:`w-full text-center p-4 rounded-lg text-white font-bold ${zt}`},"+ Nova Venda"),u.createElement("button",{onClick:()=>s("Despesas"),className:`w-full text-center p-4 rounded-lg text-white font-bold ${na}`},"+ Nova Despesa"),u.createElement("button",{onClick:()=>s("Estoque"),className:"w-full text-center p-4 rounded-lg text-white font-bold bg-indigo-500 hover:bg-indigo-600"},"+ Novo Produto"))))))},bA=({db:t,userId:e,products:n,showToast:r,categories:s})=>{const[i,o]=I.useState(!1),[a,l]=I.useState(null),[c,d]=I.useState(!1),[h,f]=I.useState(null),[v,w]=I.useState(!1),[E,x]=I.useState(null),[m,g]=I.useState(!1),[y,k]=I.useState(null),[T,R]=I.useState([]),[P,S]=I.useState("all"),[L,N]=I.useState(!1),M={sku:"",size:"",color:"",quantity:"",costPrice:"",salePrice:""},[D,U]=I.useState({name:"",categoryId:"",variants:[M]}),[H,J]=I.useState(""),[Z,j]=I.useState(""),[A,F]=I.useState("");I.useEffect(()=>{a?U({name:a.name||"",categoryId:a.categoryId||"",variants:a.variants&&a.variants.length>0?a.variants:[M]}):(U({name:"",categoryId:"",variants:[M]}),J(""),j(""),F(""))},[a]);const K=b=>{U(Q=>({...Q,[b.target.name]:b.target.value}))},oe=(b,Q)=>{const{name:z,value:re}=Q.target,xe=[...D.variants];xe[b]={...xe[b],[z]:re},U(ue=>({...ue,variants:xe}))},De=()=>{U(b=>({...b,variants:[...b.variants,M]}))},ae=b=>{if(D.variants.length<=1)return;const Q=D.variants.filter((z,re)=>re!==b);U(z=>({...z,variants:Q}))},be=()=>{const b=H.split(",").map(ue=>ue.trim()).filter(Boolean),Q=Z.split(",").map(ue=>ue.trim()).filter(Boolean);if(b.length===0&&Q.length===0)return r("Preencha Cores e/ou Tamanhos para gerar as variações.","error");const z=[],re=ue=>ue.toUpperCase().replace(/\s+/g,"-");b.length>0&&Q.length>0?b.forEach(ue=>{Q.forEach(cn=>z.push({color:ue,size:cn}))}):b.length>0?b.forEach(ue=>z.push({color:ue,size:""})):Q.forEach(ue=>z.push({color:"",size:ue}));const xe=z.map(ue=>{const cn=A?`${re(A)}-`:"",ra=ue.color?`${re(ue.color)}`:"",qu=ue.size?`-${re(ue.size)}`:"";return{...M,sku:`${cn}${ra}${qu}`,size:ue.size,color:ue.color}});U(ue=>({...ue,variants:xe}))},it=(b,Q)=>{U(z=>({...z,variants:z.variants.map(re=>({...re,[b]:Q}))}))},Et=async b=>{if(b.preventDefault(),!D.name.trim()){r("O nome do produto é obrigatório.","error");return}if(!t||!e){r("Conexão com o banco indisponível. Verifique a configuração do Firebase.","error");return}if(D.variants.some(z=>!z.sku.trim()||parseFloat(z.salePrice)<=0))return r("Todas as variações devem ter SKU e Preço de Venda válidos.","error");const Q=Ft(t,ve(e,"products"));try{const z={...D,variants:D.variants.map(re=>({...re,quantity:parseInt(re.quantity,10)||0,costPrice:parseFloat(re.costPrice)||0,salePrice:parseFloat(re.salePrice)||0})),updatedAt:ye.now()};try{console.debug("Firestore write: products",{path:ve(e,"products"),userId:e,payload:z}),a?(console.debug("Firestore update (product):",a.id,z),await ql(Fe(Q,a.id),z),r("Produto atualizado!","success")):(console.debug("Firestore add (product):",z),await Bu(Q,{...z,createdAt:ye.now()}),r("Novo produto adicionado!","success"))}catch(re){console.error("Erro ao salvar produto:",re),r("Erro ao salvar produto. Verifique conexão e permissões.","error")}o(!1),l(null)}catch(z){console.error("Erro ao salvar o produto:",z),r("Erro ao salvar produto.","error")}},un=async()=>{if(!(!t||!e||!h))try{await ea(Fe(t,ve(e,"products"),h.id)),r(`Produto ${h.name} excluído.`,"success")}catch{r("Erro ao deletar produto.","error")}finally{d(!1),f(null)}},os=(b=null)=>{l(b),o(!0)},ui=b=>{x(b),w(!0)},_=async b=>{k(b);const Q=Ft(t,ve(e,"stockMovements")),z=vm(Q,Ek("variantSku","==",b.sku));try{const xe=(await Sk(z)).docs.map(ue=>ue.data());xe.sort((ue,cn)=>cn.date.seconds-ue.date.seconds),R(xe),g(!0)}catch{r("Erro ao buscar histórico.","error")}},le=async(b,Q)=>{if(!E||Q.trim()===""){r("Nova quantidade e motivo são obrigatórios.","error");return}const z=Fe(t,ve(e,"products"),E.productId),re=n.find(sa=>sa.id===E.productId),xe=re.variants.findIndex(sa=>sa.sku===E.sku);if(xe===-1)return;const ue=re.variants[xe].quantity,cn=b-ue,ra=[...re.variants];ra[xe].quantity=b;const qu={date:ye.now(),productId:E.productId,productName:E.productName,variantSku:E.sku,type:cn>0?"ajuste_entrada":"ajuste_saida",quantityChange:Math.abs(cn),reason:Q,oldQuantity:ue,newQuantity:b},Hu=Hl(t);Hu.update(z,{variants:ra}),Hu.set(Fe(Ft(t,ve(e,"stockMovements"))),qu);try{await Hu.commit(),r("Estoque ajustado com sucesso!","success"),w(!1),x(null)}catch{r("Erro ao ajustar estoque.","error")}},me=I.useMemo(()=>n.filter(b=>P==="all"||b.categoryId===P).flatMap(b=>(b.variants||[]).map(Q=>{var z;return{...Q,productId:b.id,productName:b.name,category:((z=s.find(re=>re.id===b.categoryId))==null?void 0:z.name)||"Sem Categoria"}})),[n,s,P]),Re=I.useMemo(()=>me.filter(b=>b.quantity<Kl),[me]);return u.createElement("div",{className:"space-y-6"},u.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Estoque Mia Move"),u.createElement("div",{className:"flex items-center space-x-2 mt-4 md:mt-0"},u.createElement("select",{value:P,onChange:b=>S(b.target.value),className:se+" max-w-xs"},u.createElement("option",{value:"all"},"Todas as Categorias"),s.map(b=>u.createElement("option",{key:b.id,value:b.id},b.name))),u.createElement("button",{onClick:()=>N(!0),className:"px-4 py-3 text-pink-600 dark:text-pink-300 font-semibold bg-pink-100 dark:bg-pink-900/40 rounded-lg hover:bg-pink-200 dark:hover:bg-pink-900/60 whitespace-nowrap"},"Gerenciar Categorias"),u.createElement("button",{onClick:()=>os(),className:`px-4 py-3 text-white font-semibold rounded-lg ${zt} shadow-md whitespace-nowrap`},"+ Novo Produto"))),u.createElement(PA,{variants:me}),Re.length>0&&u.createElement("div",{className:"bg-orange-100 dark:bg-orange-900/40 border-l-4 border-orange-500 p-4 rounded-xl shadow-md"},u.createElement("p",{className:"font-bold text-orange-800 dark:text-orange-200"},"⚠️ ",Re.length," Variaçõe(s) com Estoque Baixo!")),u.createElement("div",{className:`${ke}`},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Variações em Estoque (",me.length,")"),u.createElement("div",{className:"overflow-x-auto"},u.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},u.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},u.createElement("tr",null,u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Produto / Categoria"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"SKU"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Variação"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qtd"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Venda"),u.createElement("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Ações"))),u.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},me.map((b,Q)=>{const z=n.find(re=>re.id===b.productId);return u.createElement("tr",{key:`${b.productId}-${b.sku}-${Q}`,className:b.quantity<Kl?"bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50":"hover:bg-gray-50 dark:hover:bg-gray-700"},u.createElement("td",{className:"px-3 py-4 text-sm font-medium"},b.productName," ",u.createElement("span",{className:"block text-xs text-gray-500 dark:text-gray-400"},b.category)),u.createElement("td",{className:"px-3 py-4 text-sm"},b.sku),u.createElement("td",{className:"px-3 py-4 text-sm text-gray-600 dark:text-gray-300"},b.size," - ",b.color),u.createElement("td",{className:"px-3 py-4 text-sm font-bold"},b.quantity),u.createElement("td",{className:"px-3 py-4 text-sm font-semibold text-teal-600 dark:text-teal-400"},he(b.salePrice)),u.createElement("td",{className:"px-3 py-4 text-right text-sm font-medium space-x-2"},u.createElement("button",{onClick:()=>_(b),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100"},"Histórico"),u.createElement("button",{onClick:()=>ui(b),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},"Ajustar"),u.createElement("button",{onClick:()=>os(z),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},"Editar")))}))))),u.createElement(Xt,{isOpen:i,onClose:()=>o(!1),title:a?"Editar Produto":"Adicionar Novo Produto",size:"max-w-4xl",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:Et,className:`px-4 py-2 text-white rounded-full ${zt}`},a?"Salvar Alterações":"Adicionar Produto"))},u.createElement("form",{className:"space-y-6"},u.createElement("div",{className:"p-4 border dark:border-gray-700 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Nome do Produto:"),u.createElement("input",{type:"text",name:"name",value:D.name,onChange:K,required:!0,className:se})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Categoria:"),u.createElement("select",{name:"categoryId",value:D.categoryId,onChange:K,className:se},u.createElement("option",{value:""},"Selecione uma categoria"),s.map(b=>u.createElement("option",{key:b.id,value:b.id},b.name))))),!a&&u.createElement("div",{className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700/50"},u.createElement("h4",{className:"font-semibold text-lg mb-3 text-gray-700 dark:text-gray-200"},"Gerador de Variações em Massa"),u.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Cores (separadas por vírgula):"),u.createElement("input",{type:"text",value:H,onChange:b=>J(b.target.value),placeholder:"Preto, Azul, Rosa",className:se+" p-2 text-sm"})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Tamanhos (separadas por vírgula):"),u.createElement("input",{type:"text",value:Z,onChange:b=>j(b.target.value),placeholder:"P, M, G",className:se+" p-2 text-sm"})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Prefixo do SKU (Opcional):"),u.createElement("input",{type:"text",value:A,onChange:b=>F(b.target.value),placeholder:"LEG-FLARE",className:se+" p-2 text-sm"}))),u.createElement("button",{type:"button",onClick:be,className:`w-full text-center py-2 text-sm font-semibold text-white rounded-lg ${na} transition`},"Gerar Variações")),u.createElement("div",{className:"space-y-4"},u.createElement("h4",{className:"font-semibold text-lg text-gray-700 dark:text-gray-200"},"Variações do Produto"),u.createElement("div",{className:"max-h-[40vh] overflow-y-auto space-y-4 pr-2 border-t border-b py-4 dark:border-gray-700"},D.variants.map((b,Q)=>u.createElement("div",{key:Q,className:"p-3 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 relative"},u.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 items-end"},u.createElement("div",null,u.createElement("label",{className:"block text-xs font-medium"},"SKU*:"),u.createElement("input",{type:"text",name:"sku",value:b.sku,onChange:z=>oe(Q,z),required:!0,className:se+" p-2 text-sm"})),u.createElement("div",null,u.createElement("label",{className:"block text-xs font-medium"},"Tamanho:"),u.createElement("input",{type:"text",name:"size",value:b.size,onChange:z=>oe(Q,z),className:se+" p-2 text-sm"})),u.createElement("div",null,u.createElement("label",{className:"block text-xs font-medium"},"Cor:"),u.createElement("input",{type:"text",name:"color",value:b.color,onChange:z=>oe(Q,z),className:se+" p-2 text-sm"})),u.createElement("div",null,u.createElement("label",{className:"block text-xs font-medium"},"Qtd*:"),u.createElement("input",{type:"number",name:"quantity",value:b.quantity,onChange:z=>oe(Q,z),required:!0,min:"0",className:se+" p-2 text-sm"})),u.createElement("div",{className:"flex items-center"},u.createElement("div",{className:"flex-grow"},u.createElement("label",{className:"block text-xs font-medium"},"Custo (R$):"),u.createElement("input",{type:"number",name:"costPrice",value:b.costPrice,onChange:z=>oe(Q,z),step:"0.01",min:"0",className:se+" p-2 text-sm"})),Q===0&&D.variants.length>1&&u.createElement("button",{type:"button",onClick:()=>it("costPrice",b.costPrice),title:"Aplicar a todos",className:"ml-1 p-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})))),u.createElement("div",{className:"flex items-center"},u.createElement("div",{className:"flex-grow"},u.createElement("label",{className:"block text-xs font-medium"},"Venda (R$)*:"),u.createElement("input",{type:"number",name:"salePrice",value:b.salePrice,onChange:z=>oe(Q,z),required:!0,step:"0.01",min:"0.01",className:se+" p-2 text-sm"})),Q===0&&D.variants.length>1&&u.createElement("button",{type:"button",onClick:()=>it("salePrice",b.salePrice),title:"Aplicar a todos",className:"ml-1 p-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"}))))),D.variants.length>1&&u.createElement("button",{type:"button",onClick:()=>ae(Q),className:"absolute top-2 right-2 text-red-500 hover:text-red-700 text-lg font-bold"},"×")))),u.createElement("button",{type:"button",onClick:De,className:"w-full text-center py-2 text-sm font-semibold text-pink-600 dark:text-pink-400 border-2 border-dashed border-pink-300 dark:border-pink-500 rounded-lg hover:bg-pink-50 dark:hover:bg-pink-900/30 transition"},"+ Adicionar Variação Manualmente")))),u.createElement(Xt,{isOpen:c,onClose:()=>d(!1),title:"Confirmar Exclusão",size:"max-w-md",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:un,className:`px-4 py-2 text-white rounded-full ${Zr}`},"Excluir"))},u.createElement("p",null,"Você tem certeza que deseja deletar o produto **",h==null?void 0:h.name,"** e todas as suas variações?")),E&&u.createElement(RA,{isOpen:v,onClose:()=>w(!1),variant:E,onAdjust:le}),y&&u.createElement(MA,{isOpen:m,onClose:()=>g(!1),variant:y,movements:T}),L&&u.createElement(HA,{db:t,userId:e,showToast:r,categories:s,isOpen:L,onClose:()=>N(!1)}))},RA=({isOpen:t,onClose:e,variant:n,onAdjust:r})=>{const[s,i]=I.useState(n.quantity),[o,a]=I.useState(""),l=["Avaria","Perda","Acerto de contagem","Devolução","Outro"];return u.createElement(Xt,{isOpen:t,onClose:e,title:`Ajustar Estoque: ${n.productName}`,size:"max-w-md",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:e,className:"px-4 py-2 bg-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:()=>r(parseInt(s,10),o),className:`px-4 py-2 text-white rounded-full ${zt}`},"Confirmar Ajuste"))},u.createElement("div",{className:"space-y-4"},u.createElement("p",null,"Variação: ",u.createElement("strong",null,n.size," - ",n.color)," (SKU: ",n.sku,")"),u.createElement("p",null,"Quantidade Atual: ",u.createElement("strong",null,n.quantity)),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Nova Quantidade:"),u.createElement("input",{type:"number",value:s,onChange:c=>i(c.target.value),className:se,min:"0"})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Motivo do Ajuste:"),u.createElement("select",{value:o,onChange:c=>a(c.target.value),className:se},u.createElement("option",{value:""},"Selecione um motivo"),l.map(c=>u.createElement("option",{key:c,value:c},c))))))},PA=({variants:t})=>{const n=I.useMemo(()=>{if(t.length===0)return{full:{count:0,percentage:0},medium:{count:0,percentage:0},low:{count:0,percentage:0},outOfStock:{count:0,percentage:0},total:0};let s=0,i=0,o=0,a=0;t.forEach(c=>{c.quantity===0?a++:c.quantity<Kl?o++:c.quantity<10?i++:s++});const l=t.length;return{full:{count:s,percentage:s/l*100},medium:{count:i,percentage:i/l*100},low:{count:o,percentage:o/l*100},outOfStock:{count:a,percentage:a/l*100},total:l}},[t]),r=({percentage:s,color:i,radius:o,strokeWidth:a,label:l,count:c})=>{const d=2*Math.PI*o,h=d-s/100*d;return u.createElement("div",{className:"relative flex flex-col items-center justify-center"},u.createElement("svg",{className:"transform -rotate-90",width:o*2+a*2,height:o*2+a*2},u.createElement("circle",{className:"text-gray-200 dark:text-gray-700",stroke:"currentColor",strokeWidth:a,fill:"transparent",r:o,cx:o+a,cy:o+a}),u.createElement("circle",{className:i,stroke:"currentColor",strokeWidth:a,strokeLinecap:"round",fill:"transparent",r:o,cx:o+a,cy:o+a,style:{strokeDasharray:d,strokeDashoffset:h,transition:"stroke-dashoffset 0.5s ease-out"}})),u.createElement("div",{className:"absolute flex flex-col items-center"},u.createElement("span",{className:"text-xl font-bold"},c),u.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400"},l)))};return u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Visão Geral do Estoque"),n.total===0?u.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8"},"Nenhum item em estoque para exibir."):u.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center text-center"},u.createElement(r,{percentage:n.full.percentage,color:"text-green-500",radius:40,strokeWidth:8,label:"Estoque Cheio",count:n.full.count}),u.createElement(r,{percentage:n.medium.percentage,color:"text-blue-500",radius:40,strokeWidth:8,label:"Estoque Médio",count:n.medium.count}),u.createElement(r,{percentage:n.low.percentage,color:"text-orange-500",radius:40,strokeWidth:8,label:"Estoque Baixo",count:n.low.count}),u.createElement(r,{percentage:n.outOfStock.percentage,color:"text-red-500",radius:40,strokeWidth:8,label:"Esgotado",count:n.outOfStock.count})))},MA=({isOpen:t,onClose:e,variant:n,movements:r})=>{const s=i=>{switch(i){case"venda":return u.createElement("span",{className:"text-red-600 font-semibold"},"Venda");case"estorno":return u.createElement("span",{className:"text-blue-600 font-semibold"},"Estorno");case"ajuste_entrada":return u.createElement("span",{className:"text-green-600 font-semibold"},"Ajuste (Entrada)");case"ajuste_saida":return u.createElement("span",{className:"text-orange-600 font-semibold"},"Ajuste (Saída)");case"saida_defeito":return u.createElement("span",{className:"text-yellow-600 font-semibold"},"Saída (Defeito)");default:return i}};return u.createElement(Xt,{isOpen:t,onClose:e,title:`Histórico: ${n.productName} (${n.size} - ${n.color})`,size:"max-w-2xl"},u.createElement("div",{className:"max-h-[60vh] overflow-y-auto"},u.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},u.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},u.createElement("tr",null,u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Data"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Tipo"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Alteração"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Saldo Final"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Motivo / Venda ID"))),u.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},r.map((i,o)=>u.createElement("tr",{key:o},u.createElement("td",{className:"px-3 py-4 text-sm"},i.date.toDate().toLocaleString("pt-BR")),u.createElement("td",{className:"px-3 py-4 text-sm"},s(i.type)),u.createElement("td",{className:`px-3 py-4 text-sm font-bold ${i.type==="ajuste_entrada"||i.type==="estorno"?"text-green-600":"text-red-600"}`},i.type==="ajuste_entrada"||i.type==="estorno"?`+${i.quantityChange}`:`-${i.quantityChange}`),u.createElement("td",{className:"px-3 py-4 text-sm font-bold"},i.newQuantity),u.createElement("td",{className:"px-3 py-4 text-sm"},i.reason||i.saleId)))))))},$A=({db:t,userId:e,products:n,sales:r,showToast:s})=>{const[i,o]=I.useState("new"),[a,l]=I.useState([]),[c,d]=I.useState(""),[h,f]=I.useState(!1),[v,w]=I.useState("Cartão de Crédito"),[E,x]=I.useState(0),[m,g]=I.useState("recebido"),[y,k]=I.useState(""),[T,R]=I.useState(""),[P,S]=I.useState(""),[L,N]=I.useState(""),[M,D]=I.useState(null),[U,H]=I.useState(!1),[J,Z]=I.useState(null),j=I.useMemo(()=>n.flatMap(_=>(_.variants||[]).map(le=>({...le,productId:_.id,productName:_.name}))).filter(_=>_.quantity>0&&(_.productName.toLowerCase().includes(c.toLowerCase())||_.color.toLowerCase().includes(c.toLowerCase())||_.size.toLowerCase().includes(c.toLowerCase())||_.sku.toLowerCase().includes(c.toLowerCase()))).sort((_,le)=>_.productName.localeCompare(le.productName)),[n,c]),{subtotal:A,costOfGoodsSold:F,totalAmount:K}=I.useMemo(()=>{const _=a.reduce((me,Re)=>(me.subtotal+=Re.salePrice*Re.quantity,me.costOfGoodsSold+=Re.costPrice*Re.quantity,me),{subtotal:0,costOfGoodsSold:0}),le=_.subtotal*(1-E/100);return{..._,totalAmount:Math.max(0,le)}},[a,E]),oe=A-K,De=_=>{const le=a.find(me=>me.sku===_.sku);le?le.quantity<_.quantity?l(me=>me.map(Re=>Re.sku===_.sku?{...Re,quantity:Re.quantity+1}:Re)):s("Estoque insuficiente.","error"):l(me=>[...me,{productId:_.productId,productName:_.productName,sku:_.sku,size:_.size,color:_.color,quantity:1,salePrice:_.salePrice,costPrice:_.costPrice,stockQuantity:_.quantity}]),d("")},ae=(_,le)=>{l(me=>me.map(Re=>Re.sku===_?{...Re,quantity:Math.min(Math.max(1,le),Re.stockQuantity)}:Re))},be=_=>{l(le=>le.filter(me=>me.sku!==_))},it=async()=>{if(a.length===0||!t||!e)return s("O carrinho está vazio.","error");if(m==="a_receber"&&(!y||!T.trim()))return s("Preencha o nome da cliente e a data de vencimento.","error");f(!0);try{const _=Hl(t),le=Ft(t,ve(e,"sales")),me=Fe(le),Re={date:ye.now(),status:"concluida",subtotal:A,discountPercentage:E,totalDiscount:oe,totalAmount:K,costOfGoodsSold:F,profit:K-F,paymentMethod:v,paymentStatus:m,...m==="a_receber"&&{dueDate:y,customerName:T},items:a.map(z=>({productId:z.productId,sku:z.sku,name:z.productName,size:z.size,color:z.color,quantity:z.quantity,salePrice:z.salePrice})),userId:e,saleNotes:P.trim()};_.set(me,Re);const b={},Q=Ft(t,ve(e,"stockMovements"));a.forEach(z=>{if(!b[z.productId]){const xe=n.find(ue=>ue.id===z.productId);b[z.productId]={original:xe,variants:[...xe.variants||[]]}}const re=b[z.productId].variants.findIndex(xe=>xe.sku===z.sku);if(re>-1){const xe=b[z.productId].variants[re].quantity,ue=xe-z.quantity;b[z.productId].variants[re].quantity=ue;const cn={date:ye.now(),productId:z.productId,productName:z.productName,variantSku:z.sku,type:"venda",quantityChange:z.quantity,reason:`Venda #${me.id.substring(0,8)}`,oldQuantity:xe,newQuantity:ue,saleId:me.id};_.set(Fe(Q),cn)}});for(const[z,re]of Object.entries(b)){const xe=Fe(t,ve(e,"products"),z);_.update(xe,{variants:re.variants})}await _.commit(),s(`Venda de ${he(K)} registrada!`,"success"),l([]),x(0),w("Cartão de Crédito"),g("recebido"),k(""),R(""),S("")}catch(_){console.error("Erro ao processar a venda:",_),s("Erro ao processar a venda.","error")}finally{f(!1)}},Et=I.useMemo(()=>r.filter(_=>{if(!L)return!0;const le=L.toLowerCase();return _.id.toLowerCase().includes(le)||_.customerName&&_.customerName.toLowerCase().includes(le)||_.items.some(me=>me.name.toLowerCase().includes(le))}).sort((_,le)=>le.date.seconds-_.date.seconds),[r,L]),un=_=>{D(_),H(!0)},os=async()=>{if(!(!M||h)){f(!0);try{const _=Hl(t),le=Fe(t,ve(e,"sales"),M.id);_.update(le,{status:"estornada"});const me={},Re=Ft(t,ve(e,"stockMovements"));for(const b of M.items){if(!me[b.productId]){const re=n.find(xe=>xe.id===b.productId);if(!re)continue;me[b.productId]={...re,variants:JSON.parse(JSON.stringify(re.variants))}}const Q=me[b.productId],z=Q.variants.findIndex(re=>re.sku===b.sku);if(z>-1){const re=Q.variants[z].quantity,xe=re+b.quantity;Q.variants[z].quantity=xe;const ue={date:ye.now(),productId:b.productId,productName:b.name,variantSku:b.sku,type:"estorno",quantityChange:b.quantity,reason:`Estorno da Venda #${M.id.substring(0,8)}`,oldQuantity:re,newQuantity:xe,saleId:M.id};_.set(Fe(Re),ue)}}for(const[b,Q]of Object.entries(me)){const z=Fe(t,ve(e,"products"),b);_.update(z,{variants:Q.variants})}await _.commit(),s("Venda estornada com sucesso! Estoque atualizado.","success")}catch(_){console.error("Erro ao estornar venda:",_),s("Erro ao estornar venda.","error")}finally{f(!1),H(!1),D(null)}}},ui=_=>{switch(_){case"estornada":return u.createElement("span",{className:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-200 rounded-full dark:bg-gray-600 dark:text-gray-200"},"Estornada");case"concluida":return u.createElement("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full dark:bg-green-900/50 dark:text-green-300"},"Concluída");default:return u.createElement("span",{className:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full dark:bg-yellow-900/50 dark:text-yellow-300"},_)}};return u.createElement("div",{className:"space-y-6"},u.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Vendas"),u.createElement("div",{className:"flex rounded-lg shadow-sm border border-gray-300 dark:border-gray-600 mt-4 md:mt-0"},u.createElement("button",{onClick:()=>o("new"),className:`px-4 py-2 font-semibold rounded-l-lg transition ${i==="new"?"bg-pink-500 text-white":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`},"Nova Venda"),u.createElement("button",{onClick:()=>o("history"),className:`px-4 py-2 font-semibold rounded-r-lg transition ${i==="history"?"bg-pink-500 text-white":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`},"Histórico de Vendas"))),i==="new"&&u.createElement("div",{className:"grid lg:grid-cols-3 gap-6"},u.createElement("div",{className:"lg:col-span-1 space-y-4"},u.createElement("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100"},"1. Adicionar Produtos"),u.createElement("input",{type:"text",placeholder:"Buscar produto...",value:c,onChange:_=>d(_.target.value),className:se+" sticky top-0 z-10"}),u.createElement("div",{className:`${ke} max-h-[500px] overflow-y-auto`},u.createElement("div",{className:"space-y-2"},j.map(_=>u.createElement("div",{key:_.sku,className:"flex justify-between items-center p-3 border dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-pink-100 dark:hover:bg-pink-900/40 transition"},u.createElement("div",null,u.createElement("p",{className:"font-medium text-gray-800 dark:text-gray-200"},_.productName," (",_.size," - ",_.color,")"),u.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Qtd: ",_.quantity," | ",he(_.salePrice))),u.createElement("button",{onClick:()=>De(_),className:`p-2 text-white rounded-full ${na} text-sm shadow-md`},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},u.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})))))))),u.createElement("div",{className:"lg:col-span-2 space-y-4"},u.createElement("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100"},"2. Finalizar Venda"),u.createElement("div",{className:`${ke} border-t-4 border-pink-500 space-y-4`},u.createElement("h3",{className:"font-semibold text-xl mb-4 text-teal-600 dark:text-teal-400"},"Resumo da Venda"),a.length===0?u.createElement("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8"},"O carrinho está vazio."):u.createElement("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 mb-4 border-b pb-4 dark:border-gray-700"},a.map(_=>u.createElement("div",{key:_.sku,className:"flex items-center justify-between border-b pb-2 dark:border-gray-700"},u.createElement("div",null,u.createElement("p",{className:"font-medium text-gray-800 dark:text-gray-200"},_.productName," (",_.size," - ",_.color,")"),u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},he(_.salePrice)," x ",_.quantity)),u.createElement("div",{className:"flex items-center space-x-2"},u.createElement("input",{type:"number",min:"1",max:_.stockQuantity,value:_.quantity,onChange:le=>ae(_.sku,parseInt(le.target.value,10)),className:"w-16 p-1 text-center border rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600"}),u.createElement("button",{onClick:()=>be(_.sku),className:"text-red-500 hover:text-red-700"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},u.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))))))),u.createElement("div",{className:"grid grid-cols-2 gap-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Pagamento:"),u.createElement("select",{value:v,onChange:_=>w(_.target.value),className:se},u.createElement("option",null,"Cartão de Crédito"),u.createElement("option",null,"PIX"),u.createElement("option",null,"Dinheiro"),u.createElement("option",null,"Débito"),u.createElement("option",null,"Outro"))),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Desconto (%):"),u.createElement("input",{type:"number",min:"0",max:"100",value:E,onChange:_=>x(parseFloat(_.target.value)||0),className:se}))),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status:"),u.createElement("div",{className:"flex rounded-lg shadow-sm"},u.createElement("button",{type:"button",onClick:()=>g("recebido"),className:`w-full py-2 text-sm font-semibold rounded-l-lg transition ${m==="recebido"?"bg-teal-500 text-white":"bg-gray-200 dark:bg-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`},"✅ Recebido"),u.createElement("button",{type:"button",onClick:()=>g("a_receber"),className:`w-full py-2 text-sm font-semibold rounded-r-lg transition ${m==="a_receber"?"bg-yellow-500 text-white":"bg-gray-200 dark:bg-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`},"⌛ A Receber"))),m==="a_receber"&&u.createElement("div",{className:"grid sm:grid-cols-2 gap-4 mt-2"},u.createElement("div",null,u.createElement("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Nome Cliente:"),u.createElement("input",{type:"text",id:"customerName",value:T,onChange:_=>R(_.target.value),className:se,placeholder:"Nome de quem irá pagar"})),u.createElement("div",null,u.createElement("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Vencimento:"),u.createElement("input",{type:"date",id:"dueDate",value:y,onChange:_=>k(_.target.value),className:se,min:new Date().toISOString().split("T")[0]}))),u.createElement("div",null,u.createElement("label",{htmlFor:"saleNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mt-4"},"Observações:"),u.createElement("textarea",{id:"saleNotes",value:P,onChange:_=>S(_.target.value),className:se,rows:"2",placeholder:"Detalhes da venda (ex: embrulhar para presente)..."})),u.createElement("div",{className:"space-y-2 border-t pt-4 dark:border-gray-700"},u.createElement("div",{className:"flex justify-between text-base text-gray-500 dark:text-gray-400"},u.createElement("span",null,"Subtotal:"),u.createElement("span",null,he(A))),u.createElement("div",{className:"flex justify-between text-base text-red-500 dark:text-red-400 font-medium"},u.createElement("span",null,"Desconto:"),u.createElement("span",null,"- ",he(oe))),u.createElement("div",{className:"flex justify-between text-2xl font-bold text-gray-800 dark:text-gray-100 pt-2 border-t dark:border-gray-700"},u.createElement("span",null,"Total:"),u.createElement("span",{className:"text-pink-600 dark:text-pink-400"},he(K)))),u.createElement("button",{onClick:it,disabled:a.length===0||h||K<=0,className:`mt-4 w-full py-3 text-white font-bold rounded-full transition ${zt} disabled:opacity-50`},h?"Processando...":"Finalizar Venda")))),i==="history"&&u.createElement("div",{className:"space-y-4"},u.createElement("input",{type:"text",placeholder:"Buscar por ID da Venda, Cliente ou Produto...",value:L,onChange:_=>N(_.target.value),className:se}),u.createElement("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto pr-2"},Et.map(_=>u.createElement("div",{key:_.id,className:`${ke} border-l-4 ${_.status==="estornada"?"border-gray-400":"border-teal-500"}`},u.createElement("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center"},u.createElement("div",null,u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"ID: ",_.id.substring(0,8),"... | Data: ",_.date.toDate().toLocaleString("pt-BR")),u.createElement("p",{className:"font-bold text-lg dark:text-gray-100"},_.customerName||"Venda Rápida"," - ",u.createElement("span",{className:"text-pink-600 dark:text-pink-400"},he(_.totalAmount)))),u.createElement("div",{className:"flex items-center space-x-4 mt-3 sm:mt-0"},ui(_.status),u.createElement("button",{onClick:()=>Z(J===_.id?null:_.id),className:"text-sm font-semibold text-gray-600 dark:text-gray-300"},"Detalhes"),_.status!=="estornada"&&u.createElement("button",{onClick:()=>un(_),className:`px-3 py-1 text-sm text-white font-semibold rounded-full ${Zr}`},"Estornar"))),J===_.id&&u.createElement("div",{className:"mt-4 pt-4 border-t dark:border-gray-700 space-y-2 text-sm"},u.createElement("ul",{className:"list-disc list-inside space-y-1"},_.items.map(le=>u.createElement("li",{key:le.sku},le.quantity,"x ",le.name," (",le.size," - ",le.color,") - ",he(le.salePrice),"/unid."))),u.createElement("p",null,u.createElement("strong",null,"Pagamento:")," ",_.paymentMethod," (",_.paymentStatus,")"),_.saleNotes&&u.createElement("p",null,u.createElement("strong",null,"Observações:")," ",_.saleNotes)))))),u.createElement(Xt,{isOpen:U,onClose:()=>H(!1),title:"Confirmar Estorno da Venda",size:"max-w-md",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:os,className:`px-4 py-2 text-white rounded-full ${Zr}`},"Confirmar Estorno"))},u.createElement("p",null,"Você tem certeza que deseja estornar a venda para ",u.createElement("strong",null,(M==null?void 0:M.customerName)||"N/A")," no valor de ",u.createElement("strong",null,he(M==null?void 0:M.totalAmount)),"?"),u.createElement("p",{className:"mt-2 text-sm text-yellow-600"},"Os itens desta venda retornarão ao estoque.")))},OA=({db:t,userId:e,expenses:n,showToast:r,recurringExpenses:s,onLaunchRecurring:i})=>{const[o,a]=I.useState(!1),[l,c]=I.useState(null),[d,h]=I.useState(!1),[f,v]=I.useState(null),[w,E]=I.useState(!1),x={description:"",amount:"",category:"Matéria Prima",date:new Date().toISOString().split("T")[0],status:"pago",dueDate:""},[m,g]=I.useState(x),y=["Matéria Prima","Marketing","Aluguel","Salários","Impostos","Outros"];I.useEffect(()=>{if(l){const N=l.date instanceof ye?l.date.toDate().toISOString().split("T")[0]:l.date,M=l.dueDate?l.dueDate instanceof ye?l.dueDate.toDate().toISOString().split("T")[0]:l.dueDate:"";g({...l,date:N,dueDate:M})}},[l]);const k=(N=null)=>{c(null),g(N?{...x,...N}:x),a(!0)};I.useEffect(()=>{i&&k(i)},[i]);const T=N=>{const{name:M,value:D,type:U}=N.target;g(H=>({...H,[M]:D}))},R=async N=>{if(N.preventDefault(),!t||!e||!m.description||parseFloat(m.amount)<=0)return r("Preencha a descrição e um valor válido.","error");try{const M={...m,amount:parseFloat(m.amount),date:ye.fromDate(new Date(m.date.replace(/-/g,"/"))),dueDate:m.status==="a_pagar"&&m.dueDate?ye.fromDate(new Date(m.dueDate.replace(/-/g,"/"))):null},D=Ft(t,ve(e,"expenses"));try{console.debug("Firestore write: expenses",{path:ve(e,"expenses"),userId:e,payload:M}),l?(console.debug("Firestore update (expense):",l.id,M),await ql(Fe(D,l.id),M),r("Despesa atualizada!","success")):(console.debug("Firestore add (expense):",M),await Bu(D,M),r("Despesa adicionada!","success"))}catch(U){console.error("Erro ao salvar despesa:",U),r("Erro ao salvar despesa. Verifique conexão e permissões.","error")}a(!1),c(null)}catch(M){console.error("Erro ao salvar despesa:",M),r("Erro ao salvar despesa.","error")}},P=N=>{v(N),h(!0)},S=async()=>{if(!(!t||!e||!f))try{await ea(Fe(t,ve(e,"expenses"),f.id)),r("Despesa excluída.","success")}catch{r("Erro ao excluir.","error")}finally{h(!1),v(null)}},L=async N=>{const M=Fe(t,ve(e,"expenses"),N.id);try{await ql(M,{status:"pago"}),r("Despesa marcada como paga!","success")}catch{r("Erro ao atualizar despesa.","error")}};return u.createElement("div",{className:"space-y-6"},u.createElement("div",{className:"flex justify-between items-center"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Controle de Despesas"),u.createElement("div",{className:"flex space-x-2"},u.createElement("button",{onClick:()=>E(!0),className:"px-4 py-2 text-teal-600 dark:text-teal-300 font-semibold bg-teal-100 dark:bg-teal-900/40 rounded-lg hover:bg-teal-200 dark:hover:bg-teal-900/60 whitespace-nowrap"},"Gerenciar Recorrentes"),u.createElement("button",{onClick:()=>k(),className:`px-4 py-2 text-white font-semibold rounded-lg ${zt} shadow-md`},"+ Nova Despesa"))),u.createElement(LA,{expenses:n}),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Despesas Registradas (",n.length,")"),u.createElement("div",{className:"overflow-x-auto"},u.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},u.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},u.createElement("tr",null,u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Data"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Descrição"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Categoria"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Valor"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Status"),u.createElement("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Ações"))),u.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},n.map(N=>{const M=N.status==="a_pagar"&&N.dueDate&&N.dueDate.toDate()<nn(new Date);return u.createElement("tr",{key:N.id,className:`hover:bg-gray-50 dark:hover:bg-gray-700 ${M?"bg-red-50 dark:bg-red-900/30":""}`},u.createElement("td",{className:"px-3 py-4 text-sm text-gray-500 dark:text-gray-400"},N.date.toDate().toLocaleDateString("pt-BR")),u.createElement("td",{className:"px-3 py-4 text-sm font-medium text-gray-900 dark:text-gray-100"},N.description),u.createElement("td",{className:"px-3 py-4 text-sm text-gray-500 dark:text-gray-400"},u.createElement("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-200"},N.category)),u.createElement("td",{className:"px-3 py-4 text-sm font-semibold text-red-600 dark:text-red-400"},he(N.amount)),u.createElement("td",{className:"px-3 py-4 text-sm"},N.status==="pago"?u.createElement("span",{className:"text-green-600 dark:text-green-400 font-semibold"},"Pago"):u.createElement("span",{className:"text-yellow-600 dark:text-yellow-400 font-semibold"},"A Pagar ",N.dueDate?`em ${N.dueDate.toDate().toLocaleDateString("pt-BR")}`:"")),u.createElement("td",{className:"px-3 py-4 text-right text-sm space-x-2"},N.status==="a_pagar"&&u.createElement("button",{onClick:()=>L(N),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},"Pagar"),u.createElement("button",{onClick:()=>{c(N),a(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},"Editar"),u.createElement("button",{onClick:()=>P(N),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},"Deletar")))}))))),u.createElement(Xt,{isOpen:o,onClose:()=>a(!1),title:l?"Editar Despesa":"Adicionar Despesa",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:R,className:`px-4 py-2 text-white rounded-full ${zt}`},l?"Salvar":"Adicionar"))},u.createElement("form",{className:"space-y-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Nome / Descrição da Despesa"),u.createElement("input",{type:"text",name:"description",value:m.description,onChange:T,className:se})),u.createElement("div",{className:"grid grid-cols-2 gap-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Valor (R$)"),u.createElement("input",{type:"number",name:"amount",value:m.amount,onChange:T,className:se})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Data"),u.createElement("input",{type:"date",name:"date",value:m.date,onChange:T,className:se}))),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Categoria"),u.createElement("select",{name:"category",value:m.category,onChange:T,className:se},y.map(N=>u.createElement("option",{key:N,value:N},N)))),u.createElement("div",{className:"grid grid-cols-2 gap-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Status:"),u.createElement("div",{className:"flex rounded-lg shadow-sm mt-1"},u.createElement("button",{type:"button",onClick:()=>g({...m,status:"pago"}),className:`w-full py-2 text-sm font-semibold rounded-l-lg transition ${m.status==="pago"?"bg-teal-500 text-white":"bg-gray-200 hover:bg-gray-300"}`},"✅ Pago"),u.createElement("button",{type:"button",onClick:()=>g({...m,status:"a_pagar"}),className:`w-full py-2 text-sm font-semibold rounded-r-lg transition ${m.status==="a_pagar"?"bg-yellow-500 text-white":"bg-gray-200 hover:bg-gray-300"}`},"⌛ A Pagar"))),m.status==="a_pagar"&&u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"Vencimento:"),u.createElement("input",{type:"date",name:"dueDate",value:m.dueDate,onChange:T,className:se}))))),u.createElement(Xt,{isOpen:d,onClose:()=>h(!1),title:"Confirmar Exclusão",size:"max-w-md",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 rounded-full"},"Cancelar"),u.createElement("button",{onClick:S,className:`px-4 py-2 text-white rounded-full ${Zr}`},"Excluir"))},u.createElement("p",null,"Tem certeza que deseja excluir a despesa **",f==null?void 0:f.description,"**?")),w&&u.createElement(FA,{isOpen:w,onClose:()=>E(!1),db:t,userId:e,showToast:r,recurringExpenses:s,onLaunch:N=>{E(!1),k(N)},expenseCategories:y}))},LA=({expenses:t})=>{const e=I.useMemo(()=>{const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),1),o=t.filter(l=>l.date.toDate()>=s).reduce((l,c)=>(l[c.category]=(l[c.category]||0)+c.amount,l),{}),a=Object.values(o).reduce((l,c)=>l+c,0);return Object.entries(o).map(([l,c])=>({category:l,amount:c,percentage:a>0?c/a*100:0})).sort((l,c)=>c.amount-l.amount)},[t]);if(e.length===0)return null;const n=["bg-pink-500","bg-teal-500","bg-yellow-500","bg-purple-500","bg-orange-500","bg-indigo-500"];return u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Despesas do Mês por Categoria"),u.createElement("div",{className:"space-y-4"},u.createElement("div",{className:"flex h-6 rounded-full overflow-hidden shadow-inner"},e.map((r,s)=>u.createElement("div",{key:r.category,style:{width:`${r.percentage}%`},className:`${n[s%n.length]}`,title:`${r.category}: ${r.percentage.toFixed(1)}%`}))),u.createElement("ul",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2 text-sm"},e.map((r,s)=>u.createElement("li",{key:r.category,className:"flex items-center space-x-2"},u.createElement("span",{className:`w-3 h-3 rounded-full ${n[s%n.length]}`}),u.createElement("span",{className:"text-gray-700 dark:text-gray-300"},r.category,":"),u.createElement("span",{className:"font-semibold text-gray-800 dark:text-gray-100"},he(r.amount)))))))},FA=({isOpen:t,onClose:e,db:n,userId:r,showToast:s,recurringExpenses:i,onLaunch:o,expenseCategories:a})=>{const l={description:"",amount:"",category:"Matéria Prima"},[c,d]=I.useState(l),h=E=>{d({...c,[E.target.name]:E.target.value})},f=async()=>{if(!c.description.trim()||parseFloat(c.amount)<=0){s("Descrição e valor são obrigatórios","error");return}try{const E=ve(r,"recurringExpenses"),x={...c,amount:parseFloat(c.amount)};console.debug("Firestore add: recurringExpenses",{path:E,userId:r,payload:x}),await Bu(Ft(n,E),x),d(l),s("Despesa recorrente adicionada!","success")}catch(E){console.error("Erro ao adicionar despesa recorrente:",E),s("Erro ao adicionar despesa recorrente. Verifique conexão e permissões.","error")}},v=async E=>{await ea(Fe(n,ve(r,"recurringExpenses"),E)),s("Despesa recorrente excluída","success")},w=E=>{o({description:E.description,amount:E.amount,category:E.category,status:"a_pagar",date:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0]})};return u.createElement(Xt,{isOpen:t,onClose:e,title:"Gerenciar Despesas Recorrentes",size:"max-w-2xl"},u.createElement("div",{className:"space-y-4"},u.createElement("div",{className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700/50 space-y-3"},u.createElement("h4",{className:"font-semibold dark:text-gray-200"},"Adicionar Nova Despesa Recorrente"),u.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},u.createElement("input",{type:"text",name:"description",placeholder:"Descrição (Ex: Aluguel)",value:c.description,onChange:h,className:se+" p-2 text-sm"}),u.createElement("input",{type:"number",name:"amount",placeholder:"Valor (R$)",value:c.amount,onChange:h,className:se+" p-2 text-sm"}),u.createElement("select",{name:"category",value:c.category,onChange:h,className:se+" p-2 text-sm"},a.map(E=>u.createElement("option",{key:E,value:E},E)))),u.createElement("button",{onClick:f,className:`w-full py-2 text-white font-semibold rounded-lg ${zt}`},"Adicionar")),u.createElement("div",{className:"max-h-64 overflow-y-auto"},u.createElement("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700"},i.map(E=>u.createElement("li",{key:E.id,className:"py-3 flex justify-between items-center"},u.createElement("div",null,u.createElement("p",{className:"font-medium dark:text-gray-200"},E.description," - ",he(E.amount)),u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},E.category)),u.createElement("div",{className:"space-x-2"},u.createElement("button",{onClick:()=>w(E),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded-full hover:bg-blue-600"},"Lançar no Mês"),u.createElement("button",{onClick:()=>v(E.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},"Excluir"))))))))},UA=({sales:t,expenses:e,monthlyGoal:n,showTitle:r=!1})=>{const{currentValue:s,progressPercentage:i,goalType:o,goalAmount:a}=I.useMemo(()=>{if(!n)return{currentValue:0,progressPercentage:0};const l=new Date,c=new Date(l.getFullYear(),l.getMonth(),1),d=t.filter(w=>w.date.toDate()>=c&&w.status!=="estornada"),h=e.filter(w=>w.date.toDate()>=c&&w.status==="pago");let f=0;if(n.type==="revenue")f=d.reduce((w,E)=>w+E.totalAmount,0);else{const w=d.reduce((x,m)=>x+(m.profit||0),0),E=h.reduce((x,m)=>x+m.amount,0);f=w-E}const v=n.amount>0?f/n.amount*100:0;return{currentValue:f,progressPercentage:Math.min(v,100),goalType:n.type==="revenue"?"Faturamento":"Lucro Líquido",goalAmount:n.amount}},[t,e,n]);return n?u.createElement("div",null,r&&u.createElement("h3",{className:"text-xl font-semibold mb-2 text-gray-700 dark:text-gray-200"},"🎯 Meta do Mês (",o,")"),u.createElement("div",{className:"flex justify-between items-end mb-1"},u.createElement("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400"},he(s)),u.createElement("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"de ",he(a))),u.createElement("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 shadow-inner"},u.createElement("div",{className:"bg-purple-500 h-4 rounded-full transition-all duration-500",style:{width:`${i}%`}})),u.createElement("p",{className:"text-right text-sm text-gray-600 dark:text-gray-300 mt-1"},i.toFixed(1),"% alcançado")):u.createElement("div",null,r&&u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"🎯 Meta do Mês"),u.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Nenhuma meta definida para este mês. Vá para a aba 'Metas' para criar uma."))},VA=({db:t,userId:e,sales:n,expenses:r,allGoals:s,showToast:i})=>{const o=new Date,a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`,l=I.useMemo(()=>s.find(m=>m.id===a),[s,a]),[c,d]=I.useState("revenue"),[h,f]=I.useState(""),v=[{value:"revenue",label:"Faturamento (Receita Total)",format:he},{value:"netProfit",label:"Lucro Líquido",format:he},{value:"salesCount",label:"Número de Vendas",format:Fc},{value:"itemsSold",label:"Itens Vendidos",format:Fc},{value:"averageTicket",label:"Ticket Médio (R$)",format:he}];I.useEffect(()=>{l?(d(l.type),f(l.amount)):(d("revenue"),f(""))},[l]);const w=async()=>{const m=parseFloat(h);if(!t||!e||isNaN(m)||m<=0){i("Por favor, insira um valor de meta válido.","error");return}const g=Fe(t,ve(e,"goals"),a);try{await kA(g,{type:c,amount:m}),i("Meta salva com sucesso!","success")}catch(y){i("Erro ao salvar a meta.","error"),console.error("Erro ao salvar meta:",y)}},E=(m,g,y)=>{if(!m)return{achieved:0,percentage:0};const[k,T]=m.id.split("-").map(Number),R=new Date(k,T-1,1),P=new Date(k,T,0,23,59,59),S=g.filter(U=>{const H=U.date.toDate();return H>=R&&H<=P&&U.status!=="estornada"}),L=y.filter(U=>{const H=U.date.toDate();return H>=R&&H<=P&&U.status==="pago"});let N=0;const M=S.reduce((U,H)=>U+H.totalAmount,0);switch(m.type){case"revenue":N=M;break;case"netProfit":const U=S.reduce((J,Z)=>J+(Z.profit||0),0),H=L.reduce((J,Z)=>J+Z.amount,0);N=U-H;break;case"salesCount":N=S.length;break;case"itemsSold":N=S.reduce((J,Z)=>J+Z.items.reduce((j,A)=>j+A.quantity,0),0);break;case"averageTicket":N=S.length>0?M/S.length:0;break;default:N=0}const D=m.amount>0?N/m.amount*100:0;return{achieved:N,percentage:D}},x=I.useMemo(()=>s.filter(m=>m.id!==a).sort((m,g)=>g.id.localeCompare(m.id)),[s,a]);return u.createElement("div",{className:"space-y-8"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Metas e Objetivos"),u.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Definir Meta para ",new Date().toLocaleDateString("pt-BR",{month:"long"})),u.createElement("div",{className:"space-y-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipo de Meta"),u.createElement("select",{value:c,onChange:m=>d(m.target.value),className:se},v.map(m=>u.createElement("option",{key:m.value,value:m.value},m.label)))),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Valor da Meta"),u.createElement("input",{type:"number",value:h,onChange:m=>f(m.target.value),className:se,placeholder:"Ex: 5000"})),u.createElement("button",{onClick:w,className:`w-full text-center p-3 rounded-full text-white font-bold ${zt}`},l?"Atualizar Meta":"Salvar Meta"))),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Ritmo para Atingir a Meta"),l?u.createElement(zA,{goal:l,sales:n,expenses:r,goalTypes:v}):u.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10"},"Defina uma meta para ver o ritmo de progresso."))),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Histórico de Metas"),u.createElement("div",{className:"max-h-96 overflow-y-auto"},u.createElement("ul",{className:"space-y-3"},x.map(m=>{const g=E(m,n,r),y=v.find(S=>S.value===m.type)||{format:Fc},k=g.percentage>=100,[T,R]=m.id.split("-"),P=new Date(T,R-1,1).toLocaleDateString("pt-BR",{month:"long"});return u.createElement("li",{key:m.id,className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600"},u.createElement("p",{className:"font-bold text-gray-800 dark:text-gray-200 capitalize"},P," de ",T),u.createElement("div",{className:"flex justify-between items-center mt-1"},u.createElement("div",null,u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Meta (",y.label,"): ",y.format(m.amount)),u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Atingido: ",u.createElement("span",{className:"font-semibold"},y.format(g.achieved)))),u.createElement("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${k?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300"}`},g.percentage.toFixed(1),"% ",k?"✅":"❌")))})))))},zA=({goal:t,sales:e,expenses:n,goalTypes:r})=>{const s=I.useMemo(()=>{const x=new Date,m=x.getFullYear(),g=x.getMonth(),y=new Date(m,g+1,0).getDate(),k=x.getDate(),T=t.amount/y,R=Array.from({length:y},(M,D)=>T*(D+1)),P=e.filter(M=>M.date.toDate().getMonth()===g&&M.date.toDate().getFullYear()===m&&M.status!=="estornada"),S=n.filter(M=>M.date.toDate().getMonth()===g&&M.date.toDate().getFullYear()===m&&M.status==="pago"),L=Array(y).fill(0);switch(t.type){case"revenue":case"averageTicket":P.forEach(M=>{L[M.date.toDate().getDate()-1]+=M.totalAmount});break;case"netProfit":P.forEach(M=>{L[M.date.toDate().getDate()-1]+=M.profit||0}),S.forEach(M=>{L[M.date.toDate().getDate()-1]-=M.amount});break;case"salesCount":P.forEach(M=>{L[M.date.toDate().getDate()-1]+=1});break;case"itemsSold":P.forEach(M=>{const D=M.date.toDate().getDate()-1;L[D]+=M.items.reduce((U,H)=>U+H.quantity,0)});break}const N=L.map((M=>(D,U)=>{if(M+=D,t.type==="averageTicket"){const H=P.filter(J=>J.date.toDate().getDate()<=U+1);return H.length>0?M/H.length:0}return M})(0));return{idealPath:R,actualPath:N,daysInMonth:y,today:k}},[t,e,n]),{idealPath:i,actualPath:o,daysInMonth:a,today:l}=s,c=Math.max(...i,...o,t.amount);if(c===0)return u.createElement("p",null,"Sem dados para exibir.");const d=500,h=200,f=x=>x.map((m,g)=>`${g/(a-1)*d},${h-m/c*h}`).join(" "),v=f(i),w=f(o.slice(0,l)),E=r.find(x=>x.value===t.type);return u.createElement("div",{className:"text-center"},u.createElement("svg",{viewBox:`0 0 ${d} ${h}`,className:"w-full h-auto"},u.createElement("polyline",{fill:"none",stroke:"#cbd5e1",strokeWidth:"2",strokeDasharray:"4 4",points:v}),u.createElement("polyline",{fill:"none",stroke:"#ec4899",strokeWidth:"3",points:w})),u.createElement("div",{className:"flex justify-center items-center space-x-4 text-sm mt-2"},u.createElement("div",{className:"flex items-center"},u.createElement("span",{className:"w-4 h-0.5 bg-pink-500 mr-2"})," Realizado"),u.createElement("div",{className:"flex items-center"},u.createElement("span",{className:"w-4 h-0.5 bg-gray-300 border-t-2 border-dashed border-gray-300 mr-2"})," Ideal")),u.createElement("p",{className:"text-sm mt-2"},"Valor atual: ",u.createElement("strong",{className:"text-pink-600 dark:text-pink-400"},E.format(o[l-1]||0))))},jA=({sales:t,expenses:e})=>{const n=I.useMemo(()=>{const s=t.filter(o=>o.paymentStatus==="recebido"&&o.status!=="estornada").reduce((o,a)=>o+a.totalAmount,0),i=e.filter(o=>o.status==="pago").reduce((o,a)=>o+a.amount,0);return{inflow:s,outflow:i,balance:s-i}},[t,e]),r=Math.max(n.inflow,n.outflow);return u.createElement("div",{className:"space-y-4"},u.createElement("div",{className:"flex justify-around items-end h-48"},u.createElement("div",{className:"flex flex-col items-center"},u.createElement("p",{className:"font-bold text-green-600 dark:text-green-400"},he(n.inflow)),u.createElement("div",{className:"w-16 bg-green-400 rounded-t-lg",style:{height:`${r>0?n.inflow/r*150:0}px`}}),u.createElement("p",{className:"text-sm font-medium"},"Entradas")),u.createElement("div",{className:"flex flex-col items-center"},u.createElement("p",{className:"font-bold text-red-600 dark:text-red-400"},he(n.outflow)),u.createElement("div",{className:"w-16 bg-red-400 rounded-t-lg",style:{height:`${r>0?n.outflow/r*150:0}px`}}),u.createElement("p",{className:"text-sm font-medium"},"Saídas"))),u.createElement("div",{className:"text-center border-t dark:border-gray-700 pt-3"},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Saldo do Período"),u.createElement("p",{className:`text-2xl font-bold ${n.balance>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`},he(n.balance))))},BA=({sales:t,expenses:e,dateRange:n})=>{const r=I.useMemo(()=>{if(!n.start||!n.end)return[];const f=new Map,v=new Date(n.start);for(;v<=n.end;)f.set(v.toISOString().split("T")[0],0),v.setDate(v.getDate()+1);t.filter(E=>E.status!=="estornada").forEach(E=>{const x=E.date.toDate().toISOString().split("T")[0];f.has(x)&&f.set(x,f.get(x)+(E.profit||0))}),e.forEach(E=>{if(E.status!=="pago")return;const x=E.date.toDate().toISOString().split("T")[0];f.has(x)&&f.set(x,f.get(x)-E.amount)});let w=0;return Array.from(f.values()).map(E=>(w+=E,w))},[t,e,n]);if(r.length===0)return u.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400"},"Selecione um período para ver a tendência.");const s=Math.max(...r,0),i=Math.min(...r,0),o=s-i,a=500,l=200,c=f=>o===0?l/2:l-(f-i)/o*l,d=f=>{if(f.length===1){const v=c(f[0]);return`0,${v} ${a},${v}`}return f.map((v,w)=>`${w/(f.length-1)*a},${c(v)}`).join(" ")},h=c(0);return u.createElement("div",{className:"text-center"},u.createElement("svg",{viewBox:`0 0 ${a} ${l}`,className:"w-full h-auto"},h>=0&&h<=l&&u.createElement("line",{x1:"0",y1:h,x2:a,y2:h,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"4 4"}),u.createElement("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:d(r)})),u.createElement("p",{className:"text-sm mt-2"},"Lucro líquido acumulado no período."))},qA=({sales:t,products:e,expenses:n,db:r,userId:s,showToast:i})=>{const[o,a]=I.useState("month"),[l,c]=I.useState(""),[d,h]=I.useState(""),{filteredSales:f,filteredExpenses:v,dateRange:w}=I.useMemo(()=>{const D=new Date;let U,H=new Date;H.setHours(23,59,59,999);const J=t.filter(j=>j.status!=="estornada");o==="custom"&&l&&d?(U=nn(new Date(l.replace(/-/g,"/"))),H=new Date(d.replace(/-/g,"/")),H.setHours(23,59,59,999)):o==="30days"?(U=new Date,U.setDate(D.getDate()-30),U=nn(U)):o==="month"?U=nn(new Date(D.getFullYear(),D.getMonth(),1)):o==="year"?U=nn(new Date(D.getFullYear(),0,1)):U=null;const Z=(j,A=!1)=>{const F=A?J:j;return U?F.filter(K=>{const oe=K.date.toDate();return oe>=U&&oe<=H}):F};return{filteredSales:Z(t,!0),filteredExpenses:Z(n),dateRange:{start:U,end:H}}},[t,n,o,l,d]),E=(D,U,H)=>{const J=new Date;let Z,j;if(D==="month")Z=new Date(J.getFullYear(),J.getMonth()-1,1),j=new Date(J.getFullYear(),J.getMonth(),0);else if(D==="30days")Z=new Date,Z.setDate(J.getDate()-60),j=new Date,j.setDate(J.getDate()-30);else if(D==="year")Z=new Date(J.getFullYear()-1,0,1),j=new Date(J.getFullYear()-1,11,31);else return null;return{start:nn(Z),end:j}},x=(D,U)=>{const H=D.reduce((A,F)=>(A.totalRevenue+=F.totalAmount,A.totalSalesCount+=1,A.grossProfit+=F.profit||0,A),{totalRevenue:0,grossProfit:0,totalSalesCount:0}),Z=U.filter(A=>A.status==="pago").reduce((A,F)=>A+F.amount,0),j=H.grossProfit-Z;return{...H,totalExpenses:Z,netProfit:j}},m=I.useMemo(()=>{const D=x(f,v),U=E(o,w.start,w.end);if(!U)return{current:D,changes:null};const H=t.filter(F=>F.status!=="estornada"&&F.date.toDate()>=U.start&&F.date.toDate()<=U.end),J=n.filter(F=>F.date.toDate()>=U.start&&F.date.toDate()<=U.end),Z=x(H,J),j=(F,K)=>K===0?F>0?100:0:(F-K)/K*100,A={revenue:j(D.totalRevenue,Z.totalRevenue),netProfit:j(D.netProfit,Z.netProfit),salesCount:j(D.totalSalesCount,Z.totalSalesCount)};return{current:D,changes:A}},[f,v,t,n,o,w]),{totalRevenue:g,grossProfit:y,totalSalesCount:k,totalExpenses:T,netProfit:R}=m.current;I.useMemo(()=>{const D=e.flatMap(J=>J.variants||[]),U=D.reduce((J,Z)=>J+Z.costPrice*Z.quantity,0),H=D.reduce((J,Z)=>J+Z.salePrice*Z.quantity,0);return{totalStockCost:U,totalStockValue:H}},[e]);const P=I.useMemo(()=>t.filter(D=>D.paymentStatus==="a_receber"&&D.status!=="estornada").sort((D,U)=>(D.dueDate||D.date).seconds-(U.dueDate||U.date).seconds),[t]),S=async D=>{try{const U=`${ve(s,"sales")}/${D}`,H={paymentStatus:"recebido"};console.debug("Firestore update: sales",{path:U,userId:s,payload:H}),await ql(Fe(r,ve(s,"sales"),D),H),i("Venda marcada como recebida!","success")}catch(U){console.error("Erro ao marcar venda como paga:",U),i("Erro ao marcar venda como paga. Verifique conexão e permissões.","error")}};I.useMemo(()=>{const D=e.flatMap(j=>(j.variants||[]).map(A=>({...A,productId:j.id,productName:j.name,createdAt:j.createdAt}))),U=new Date;U.setDate(U.getDate()-90);const H=new Map;t.filter(j=>j.status!=="estornada").forEach(j=>j.items.forEach(A=>{const F=j.date.toDate();(!H.has(A.sku)||F>H.get(A.sku))&&H.set(A.sku,F)}));const J=D.filter(j=>{var A;return(H.get(j.sku)||((A=j.createdAt)==null?void 0:A.toDate()))<U}).slice(0,5),Z=D.filter(j=>j.salePrice>j.costPrice).map(j=>({...j,margin:j.salePrice-j.costPrice})).sort((j,A)=>A.margin-j.margin).slice(0,5);return{slowMoving:J,highMargin:Z}},[e,t]);const L=[{value:"month",label:"Este Mês"},{value:"30days",label:"Últimos 30 Dias"},{value:"year",label:"Este Ano"},{value:"all",label:"Todo o Período"},{value:"custom",label:"Personalizado"}],N=D=>{if(D===null||isNaN(D))return u.createElement("span",{className:"text-xs text-gray-400"},"s/ comp.");const U=D>=0,H=U?"text-green-500":"text-red-500";return u.createElement("span",{className:`text-sm font-bold ${H}`},U?"▲":"▼"," ",Math.abs(D).toFixed(1),"%")},M=()=>{const D=["Data","Tipo","Descrição","Valor","Status"],U=f.map(F=>[F.date.toDate().toISOString(),"Venda",`Venda para ${F.customerName||"N/A"}`,F.totalAmount,F.paymentStatus]),H=v.map(F=>[F.date.toDate().toISOString(),"Despesa",F.description,-F.amount,F.status]),J=[...U,...H].sort((F,K)=>new Date(F[0])-new Date(K[0])),Z=[D.join(","),...J.map(F=>F.join(","))].join(`
`),j=new Blob([`\uFEFF${Z}`],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(j),A.setAttribute("download","relatorio_mia_move.csv"),document.body.appendChild(A),A.click(),document.body.removeChild(A),i("Exportação concluída!","success")};return u.createElement("div",{className:"space-y-8"},u.createElement("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Relatórios e Análises"),u.createElement("div",{className:"flex items-center gap-2 flex-wrap"},u.createElement("select",{value:o,onChange:D=>a(D.target.value),className:se+" w-48"},L.map(D=>u.createElement("option",{key:D.value,value:D.value},D.label))),o==="custom"&&u.createElement(u.Fragment,null,u.createElement("input",{type:"date",value:l,onChange:D=>c(D.target.value),className:se+" w-40"}),u.createElement("input",{type:"date",value:d,onChange:D=>h(D.target.value),className:se+" w-40"})),u.createElement("button",{onClick:M,className:"px-4 py-3 text-sm font-semibold bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600"},"Exportar CSV"))),u.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4"},u.createElement("div",{className:`${ke} border-l-4 border-pink-500`},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Receita Total"),u.createElement("p",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400 mt-1"},he(g)),m.changes&&u.createElement("div",{className:"mt-1"},N(m.changes.revenue))),u.createElement("div",{className:`${ke} border-l-4 border-teal-500`},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Lucro Bruto (Vendas)"),u.createElement("p",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400 mt-1"},he(y))),u.createElement("div",{className:`${ke} border-l-4 border-red-500`},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Despesas (Pagas)"),u.createElement("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1"},he(T))),u.createElement("div",{className:`${ke} border-l-4 border-green-500 col-span-2 lg:col-span-1`},u.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Lucro Líquido"),u.createElement("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1"},he(R)),m.changes&&u.createElement("div",{className:"mt-1"},N(m.changes.netProfit)))),u.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},u.createElement("div",{className:`${ke}`},u.createElement("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-200"},"📊 Fluxo de Caixa (Recebido vs. Pago)"),u.createElement(jA,{sales:f,expenses:v})),u.createElement("div",{className:`${ke}`},u.createElement("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-200"},"📈 Tendência de Lucro no Período"),u.createElement(BA,{sales:f,expenses:v,dateRange:w}))),u.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},u.createElement("div",{className:`${ke}`},u.createElement("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-200"},"Desempenho por Dia da Semana"),u.createElement(Nk,{sales:f})),u.createElement("div",{className:`${ke}`},u.createElement("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-200"},"Distribuição de Pagamentos"),u.createElement(DA,{sales:f}))),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-200"},"🗓️ Contas a Receber (Geral) (",P.length,")"),u.createElement("div",{className:"overflow-x-auto max-h-80"},u.createElement("table",{className:"min-w-full divide-y dark:divide-gray-700"},u.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0"},u.createElement("tr",null,u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Vencimento"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Cliente"),u.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Valor"),u.createElement("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Ação"))),u.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y dark:divide-gray-700"},P.map(D=>{const U=D.dueDate?new Date(D.dueDate.replace(/-/g,"/")):D.date.toDate(),H=U<nn(new Date);return u.createElement("tr",{key:D.id,className:H?"bg-red-50 dark:bg-red-900/30":""},u.createElement("td",{className:"px-3 py-4 text-sm dark:text-gray-300"},U.toLocaleDateString("pt-BR")),u.createElement("td",{className:"px-3 py-4 text-sm font-medium dark:text-gray-200"},D.customerName||"N/A"),u.createElement("td",{className:"px-3 py-4 text-sm font-bold text-yellow-600 dark:text-yellow-400"},he(D.totalAmount)),u.createElement("td",{className:"px-3 py-4 text-right"},u.createElement("button",{onClick:()=>S(D.id),className:"px-3 py-1 text-xs text-white font-semibold rounded-full bg-green-500 hover:bg-green-600"},"Recebido")))}))))))},HA=({db:t,userId:e,showToast:n,categories:r,isOpen:s,onClose:i})=>{const[o,a]=I.useState(""),l=async()=>{if(o.trim()==="")return;const d=Ft(t,ve(e,"categories"));try{const h=ve(e,"categories"),f={name:o.trim()};console.debug("Firestore add: categories",{path:h,userId:e,payload:f}),await Bu(d,f),a(""),n("Categoria adicionada!","success")}catch(h){console.error("Erro ao adicionar categoria:",h),n("Erro ao adicionar categoria. Verifique conexão e permissões.","error")}},c=async d=>{const h=Ft(t,ve(e,"products")),f=vm(h,Ek("categoryId","==",d));if(!(await Sk(f)).empty){n("Não é possível excluir. Categoria em uso por produtos.","error");return}const w=Fe(t,ve(e,"categories"),d);await ea(w),n("Categoria excluída!","success")};return u.createElement(Xt,{isOpen:s,onClose:i,title:"Gerenciar Categorias",size:"max-w-md"},u.createElement("div",{className:"space-y-4"},u.createElement("div",{className:"flex space-x-2"},u.createElement("input",{type:"text",value:o,onChange:d=>a(d.target.value),placeholder:"Nome da nova categoria",className:se}),u.createElement("button",{onClick:l,className:`px-4 py-2 text-white font-semibold rounded-lg ${zt}`},"Adicionar")),u.createElement("div",{className:"max-h-64 overflow-y-auto"},u.createElement("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700"},r.map(d=>u.createElement("li",{key:d.id,className:"py-2 flex justify-between items-center"},u.createElement("span",{className:"dark:text-gray-200"},d.name),u.createElement("button",{onClick:()=>c(d.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},"Excluir")))))))},KA=({db:t,userId:e,products:n,defectiveItems:r,showToast:s})=>{const[i,o]=I.useState(!1),[a,l]=I.useState(""),[c,d]=I.useState(null),[h,f]=I.useState(""),[v,w]=I.useState(""),[E,x]=I.useState(null),[m,g]=I.useState(!1),y=I.useMemo(()=>n.flatMap(S=>(S.variants||[]).map(L=>({...L,productId:S.id,productName:S.name}))).filter(S=>S.quantity>0&&(S.productName.toLowerCase().includes(a.toLowerCase())||S.sku.toLowerCase().includes(a.toLowerCase()))),[n,a]),k=()=>{o(!0),d(null),f(""),w(""),l("")},T=async()=>{if(!c||!h.trim()){s("Selecione um produto e descreva o defeito.","error");return}const S=Hl(t),L=n.find(j=>j.id===c.productId);if(!L){s("Produto original não encontrado.","error");return}const N=Fe(t,ve(e,"products"),c.productId),M=L.variants.findIndex(j=>j.sku===c.sku),D=L.variants[M].quantity,U=D-1;if(U<0){s("Estoque insuficiente para registrar o defeito.","error");return}const H=[...L.variants];H[M].quantity=U,S.update(N,{variants:H});const J={date:ye.now(),productId:c.productId,productName:c.productName,variantSku:c.sku,type:"saida_defeito",quantityChange:1,reason:`Defeito: ${h.substring(0,30)}...`,oldQuantity:D,newQuantity:U};S.set(Fe(Ft(t,ve(e,"stockMovements"))),J);const Z={...c,defectDescription:h,suggestedAction:v,registeredAt:ye.now(),status:"pendente"};S.set(Fe(Ft(t,ve(e,"defectiveItems"))),Z);try{await S.commit(),s("Item defeituoso registrado com sucesso!","success"),o(!1)}catch(j){s("Erro ao registrar item defeituoso.","error"),console.error("Error registering defective item:",j)}},R=async()=>{if(E){g(!0);try{await ea(Fe(t,ve(e,"defectiveItems"),E.id)),s("Item defeituoso resolvido e removido da lista.","success")}catch{s("Erro ao resolver o item.","error")}finally{x(null),g(!1)}}},P=S=>{const L=`*Relatório de Defeito - Mia Move*

*Produto:* ${S.productName}
*Variação:* ${S.size} - ${S.color}
*SKU:* ${S.sku}

*Defeito Descrito:*
${S.defectDescription}

*Ação Sugerida:*
${S.suggestedAction||"Nenhuma"}`,N=`https://wa.me/?text=${encodeURIComponent(L)}`;window.open(N,"_blank")};return u.createElement("div",{className:"space-y-6"},u.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Controle de Defeitos"),u.createElement("button",{onClick:k,className:`px-4 py-3 text-white font-semibold rounded-lg ${zt} shadow-md`},"+ Registrar Defeito")),u.createElement("div",{className:ke},u.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Itens com Defeito (",r.length,")"),u.createElement("div",{className:"space-y-4"},r.map(S=>u.createElement("div",{key:S.id,className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700/50"},u.createElement("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start"},u.createElement("div",null,u.createElement("p",{className:"font-bold text-lg dark:text-gray-100"},S.productName," (",S.size," - ",S.color,")"),u.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"SKU: ",S.sku," | Registrado em: ",S.registeredAt.toDate().toLocaleDateString("pt-BR"))),u.createElement("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0"},u.createElement("button",{onClick:()=>P(S),className:"px-3 py-1 text-sm text-white font-semibold rounded-full bg-green-500 hover:bg-green-600 flex items-center space-x-1"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},u.createElement("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.428A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})),u.createElement("span",null,"WhatsApp")),u.createElement("button",{onClick:()=>x(S),className:`px-3 py-1 text-sm text-white font-semibold rounded-full ${Zr}`},"Resolver"))),u.createElement("div",{className:"mt-3 pt-3 border-t dark:border-gray-600 text-sm space-y-2"},u.createElement("p",null,u.createElement("strong",null,"Defeito:")," ",S.defectDescription),u.createElement("p",null,u.createElement("strong",null,"Ação Sugerida:")," ",S.suggestedAction||"N/A")))))),u.createElement(Xt,{isOpen:i,onClose:()=>o(!1),title:"Registrar Item com Defeito",size:"max-w-2xl",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-full"},"Cancelar"),u.createElement("button",{onClick:T,className:`px-4 py-2 text-white rounded-full ${zt}`},"Registrar e Dar Baixa"))},u.createElement("div",{className:"space-y-4"},u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"1. Encontre o Produto em Estoque"),u.createElement("input",{type:"text",placeholder:"Buscar por nome ou SKU...",value:a,onChange:S=>l(S.target.value),className:se}),u.createElement("div",{className:"max-h-40 overflow-y-auto mt-2 space-y-1 pr-2"},a&&y.map(S=>u.createElement("button",{key:S.sku,onClick:()=>{d(S),l("")},className:"w-full text-left p-2 rounded-lg hover:bg-pink-100 dark:hover:bg-pink-900/40"},S.productName," (",S.size," - ",S.color,") - Estoque: ",S.quantity)))),c&&u.createElement("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/40 rounded-lg"},u.createElement("p",{className:"font-semibold text-teal-800 dark:text-teal-200"},"Selecionado: ",c.productName," (",c.size," - ",c.color,")")),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"2. Descreva o Defeito"),u.createElement("textarea",{value:h,onChange:S=>f(S.target.value),rows:"3",className:se,placeholder:"Ex: Costura solta na manga direita."})),u.createElement("div",null,u.createElement("label",{className:"block text-sm font-medium"},"3. Ação Sugerida (Opcional)"),u.createElement("input",{type:"text",value:v,onChange:S=>w(S.target.value),className:se,placeholder:"Ex: Trocar com fornecedor."})))),u.createElement(Xt,{isOpen:!!E,onClose:()=>x(null),title:"Confirmar Resolução",size:"max-w-md",actions:u.createElement(u.Fragment,null,u.createElement("button",{onClick:()=>x(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-full"},"Cancelar"),u.createElement("button",{onClick:R,disabled:m,className:`px-4 py-2 text-white rounded-full ${Zr} disabled:opacity-50`},m?"Resolvendo...":"Confirmar e Remover"))},u.createElement("p",null,"Tem certeza que deseja marcar o item ",u.createElement("strong",null,E==null?void 0:E.productName," (",E==null?void 0:E.size," - ",E==null?void 0:E.color,")")," como resolvido?"),u.createElement("p",{className:"text-sm text-gray-500 mt-2"},"Esta ação irá remover o item permanentemente da lista de defeitos.")))},WA=({sales:t,products:e,expenses:n,showToast:r})=>{const[s,i]=I.useState(!1),[o,a]=I.useState(!1),[l,c]=I.useState(""),[d,h]=I.useState(""),f=async(x,m)=>{var T,R,P,S,L;const y="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=",k={contents:[{parts:[{text:m}]}],systemInstruction:{parts:[{text:x}]}};try{const N=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!N.ok){const U=await N.text();throw new Error(`API Error: ${N.status} ${N.statusText} - ${U}`)}const D=(L=(S=(P=(R=(T=(await N.json()).candidates)==null?void 0:T[0])==null?void 0:R.content)==null?void 0:P.parts)==null?void 0:S[0])==null?void 0:L.text;if(!D)throw new Error("Resposta da IA está vazia ou em formato incorreto.");return D}catch(N){return console.error("Erro na chamada da API Gemini:",N),r("Erro ao contatar o consultor de IA.","error"),null}},v=async()=>{i(!0),c("");const x="Você é um especialista em marketing digital para pequenos negócios de moda feminina no Brasil. Sua tarefa é fornecer ideias criativas, práticas e de baixo custo. Use um tom amigável, direto e motivador. Formate sua resposta com títulos em negrito (usando asteriscos, ex: *Título*) e listas com hífens.",m=new Date;m.setDate(m.getDate()-30);const g=t.filter(L=>L.date.toDate()>=m&&L.status!=="estornada"),y={};g.forEach(L=>L.items.forEach(N=>{y[N.sku]=(y[N.sku]||0)+N.quantity}));const k=new Map(e.flatMap(L=>L.variants||[]).map(L=>[L.sku,{productName:p.name,...L}])),T=Object.entries(y).map(([L,N])=>({...k.get(L),quantitySold:N})).filter(L=>L.productName).sort((L,N)=>N.quantitySold-L.quantitySold).slice(0,3).map(L=>`${L.productName} (${L.size}, ${L.color})`),R=[...new Set(e.map(L=>L.category))].filter(Boolean),P=`Analise os dados do meu negócio de moda feminina e me dê 3 ideias de marketing para os próximos 15 dias. Inclua sugestões de campanhas, cupons de desconto e posts para redes sociais.

Dados:
- Meus produtos mais vendidos nos últimos 30 dias são: ${T.join(", ")||"Nenhum"}.
- Minhas categorias de produto são: ${R.join(", ")||"Nenhuma"}.

Seja criativo e focado em resultados rápidos!`,S=await f(x,P);S&&c(S),i(!1)},w=async()=>{a(!0),h("");const x="Você é um consultor financeiro experiente, especializado em varejo de moda no Brasil. Sua tarefa é analisar os dados financeiros e fornecer uma avaliação sincera e construtiva sobre a saúde do negócio. Aponte 1 ponto forte, 1 ponto de atenção e 3 sugestões práticas e diretas para melhorar a lucratividade. Use uma linguagem clara e objetiva. Formate a resposta com títulos em negrito (usando asteriscos) e listas com hífens.",m=new Date;m.setDate(m.getDate()-30);const g=t.filter(M=>M.date.toDate()>=m&&M.status!=="estornada"),y=n.filter(M=>M.date.toDate()>=m&&M.status==="pago"),k=g.reduce((M,D)=>M+D.totalAmount,0),T=g.reduce((M,D)=>M+(D.profit||0),0),R=y.reduce((M,D)=>M+D.amount,0),P=T-R,S=g.length>0?k/g.length:0,L=`Analise os seguintes dados financeiros dos últimos 30 dias do meu negócio e me forneça sua consultoria. Seja direto e prático nas sugestões.

Dados Financeiros (Últimos 30 dias):
- Receita Total: ${he(k)}
- Lucro Bruto (apenas de vendas): ${he(T)}
- Total de Despesas Pagas: ${he(R)}
- Lucro Líquido: ${he(P)}
- Número de Vendas: ${g.length}
- Ticket Médio por Venda: ${he(S)}`,N=await f(x,L);N&&h(N),a(!1)},E=x=>x?x.split(`
`).map((m,g)=>m.startsWith("*")&&m.endsWith("*")?u.createElement("p",{key:g,className:"font-bold text-lg mt-4"},m.slice(1,-1)):m.startsWith("- ")?u.createElement("li",{key:g,className:"ml-5 list-disc"},m.slice(2)):u.createElement("p",{key:g},m)):null;return u.createElement("div",{className:"space-y-8"},u.createElement("div",null,u.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Consultor - IA"),u.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Receba insights e sugestões personalizadas para o seu negócio.")),u.createElement("div",{className:"grid lg:grid-cols-2 gap-8"},u.createElement("div",{className:`${ke} flex flex-col`},u.createElement("h3",{className:"text-xl font-bold text-pink-600 dark:text-pink-400"},"💡 Assistente de Marketing"),u.createElement("p",{className:"text-gray-600 dark:text-gray-300 mt-2 mb-4 flex-grow"},"Receba ideias para campanhas, cupons e estratégias para impulsionar suas vendas, com base nos seus produtos mais populares."),u.createElement("button",{onClick:v,disabled:s,className:`w-full text-center p-3 rounded-full text-white font-bold ${zt} disabled:opacity-50`},s?"Gerando ideias...":"Gerar Ideias de Marketing"),u.createElement("div",{className:"mt-6 border-t dark:border-gray-700 pt-4 min-h-[150px]"},s&&u.createElement(hh,null),l&&u.createElement("div",null,E(l)))),u.createElement("div",{className:`${ke} flex flex-col`},u.createElement("h3",{className:"text-xl font-bold text-teal-600 dark:text-teal-400"},"💰 Consultor Financeiro"),u.createElement("p",{className:"text-gray-600 dark:text-gray-300 mt-2 mb-4 flex-grow"},"Obtenha uma análise da saúde financeira do seu negócio e sugestões práticas para otimizar seus custos e aumentar os lucros."),u.createElement("button",{onClick:w,disabled:o,className:`w-full text-center p-3 rounded-full text-white font-bold ${na} disabled:opacity-50`},o?"Analisando finanças...":"Analisar Minhas Finanças"),u.createElement("div",{className:"mt-6 border-t dark:border-gray-700 pt-4 min-h-[150px]"},o&&u.createElement(hh,null),d&&u.createElement("div",null,E(d))))))},GA=()=>{const[t,e]=I.useState(localStorage.getItem("mia-move-theme")||"light"),[n,r]=I.useState("Início"),[s,i]=I.useState([]),[o,a]=I.useState([]),[l,c]=I.useState([]),[d,h]=I.useState([]),[f,v]=I.useState([]),[w,E]=I.useState([]),[x,m]=I.useState([]),[g,y]=I.useState(null),[k,T]=I.useState(null),[R,P]=I.useState(null),[S,L]=I.useState(!1),[N,M]=I.useState(null),[D,U]=I.useState(null),[H,J]=I.useState(!1);I.useEffect(()=>{const ae=window.document.documentElement;t==="dark"?(ae.classList.add("dark"),localStorage.setItem("mia-move-theme","dark")):(ae.classList.remove("dark"),localStorage.setItem("mia-move-theme","light"))},[t]);const Z=()=>{e(ae=>ae==="light"?"dark":"light")},j=I.useCallback((ae,be="info")=>{M({message:ae,type:be}),setTimeout(()=>M(null),3e3)},[]);I.useEffect(()=>{if(!Zs){T(localStorage.getItem("mia-move-fallback-uid")||crypto.randomUUID()),L(!0);return}const ae=d_(dh,be=>{if(be){console.log("Usuário autenticado:",be.uid,"Anônimo:",be.isAnonymous),P(be);const it=localStorage.getItem("mia-move-shared-uid");T(it||be.uid),L(!0)}else console.log("Nenhum usuário. Tentando login anônimo..."),i_(dh).catch(it=>{console.error("Falha no login anônimo:",it),j("Não foi possível iniciar uma sessão. Verifique sua conexão.","error")})});return()=>ae()},[]),I.useEffect(()=>{if(!hn||!k){i([]),a([]),c([]),h([]),v([]),E([]),m([]);return}const ae=(le,me)=>{const Re=vm(Ft(hn,ve(k,le)));return xA(Re,b=>{me(b.docs.map(Q=>({id:Q.id,...Q.data()})))},b=>console.error(`Erro ao ouvir ${le}:`,b))},be=ae("products",i),it=ae("sales",a),Et=ae("expenses",c),un=ae("categories",h),os=ae("recurringExpenses",v),ui=ae("goals",E),_=ae("defectiveItems",m);return()=>{be(),it(),Et(),un(),os(),ui(),_()}},[hn,k]),I.useEffect(()=>{const ae=new Date,be=`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}`,it=w.find(Et=>Et.id===be);y(it||null)},[w]);const A=ae=>{localStorage.setItem("mia-move-shared-uid",ae),T(ae),window.location.reload(),j("Sincronizado! A página será recarregada.","success")},F=()=>{localStorage.removeItem("mia-move-shared-uid"),R&&T(R.uid),window.location.reload(),j("Sincronização removida. A página será recarregada.","info")},K=I.useMemo(()=>R?k!==R.uid:!1,[k,R]),oe=()=>{switch(n){case"Início":return u.createElement(AA,{sales:o,expenses:l,products:s,monthlyGoal:g,setActiveTab:r});case"Estoque":return u.createElement(bA,{db:hn,userId:k,products:s,showToast:j,categories:d});case"Vendas":return u.createElement($A,{db:hn,userId:k,products:s,sales:o,showToast:j});case"Despesas":return u.createElement(OA,{db:hn,userId:k,expenses:l,showToast:j,recurringExpenses:f,onLaunchRecurring:D});case"Metas":return u.createElement(VA,{db:hn,userId:k,sales:o,expenses:l,allGoals:w,showToast:j});case"Relatórios":return u.createElement(qA,{sales:o,products:s,expenses:l,db:hn,userId:k,showToast:j});case"Defeitos":return u.createElement(KA,{db:hn,userId:k,products:s,defectiveItems:x,showToast:j});case"Consultor - IA":return u.createElement(WA,{sales:o,products:s,expenses:l,showToast:j});default:return null}},De=["Início","Estoque","Vendas","Despesas","Metas","Relatórios","Defeitos","Consultor - IA"];return!S||!k?u.createElement("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900"},u.createElement(hh,null)):u.createElement("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200"},u.createElement("header",{className:"bg-white dark:bg-gray-800 shadow-md"},u.createElement("div",{className:"p-4 flex justify-between items-center"},u.createElement("h1",{className:"text-3xl font-extrabold text-pink-600 tracking-wider"},"Mia Move ",u.createElement("span",{className:"text-teal-500 text-sm font-medium"},"Gestão")),u.createElement("div",{className:"flex items-center space-x-2 sm:space-x-4"},K&&u.createElement("div",{className:"hidden sm:flex items-center p-2 bg-teal-100 dark:bg-teal-900/50 rounded-full"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-teal-600 dark:text-teal-300",viewBox:"0 0 20 20",fill:"currentColor"},u.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})),u.createElement("span",{className:"text-sm text-teal-800 dark:text-teal-200 ml-1 font-semibold"},"Sincronizado")),u.createElement("button",{onClick:()=>J(!0),title:"Sincronizar Dispositivos",className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M20 20v-5h-5M4 20h5v-5M20 4h-5v5"}))),u.createElement("button",{onClick:Z,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"},t==="light"?u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})):u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})))))),u.createElement("main",{className:"p-4 sm:p-6 lg:p-8"},u.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6 sticky top-0 bg-gray-50 dark:bg-gray-900 z-20"},u.createElement("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto"},De.map(ae=>u.createElement("button",{key:ae,onClick:()=>r(ae),className:`flex-shrink-0 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-base sm:text-lg transition ${n===ae?"border-pink-500 text-pink-600 dark:border-pink-400 dark:text-pink-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"}`},ae)))),k&&oe()),H&&u.createElement(CA,{isOpen:H,onClose:()=>J(!1),showToast:j,onSync:A,onUnsync:F,currentUid:R==null?void 0:R.uid,isSynced:K}),N&&u.createElement(TA,{message:N.message,type:N.type,onClose:()=>M(null)}))},QA=dv(document.getElementById("root"));QA.render(u.createElement(GA,null));
